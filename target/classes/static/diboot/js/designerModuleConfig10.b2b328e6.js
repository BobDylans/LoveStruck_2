(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig10"],{"03e1":function(t,e,n){"use strict";n.r(e);var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-form",{attrs:{layout:"horizontal"}},[n("column-list-selector",{attrs:{"need-ref-entity":!1,"valid-columns-filter":t.validColumnsFilter,title:"搜索项配置"},on:{change:function(e){t.moduleConfig.metadata.columns=t._.cloneDeep(e)}}}),n("h3",{staticClass:"title separator"},[t._v("\n    日期搜索方式\n  ")]),t._l(t.moduleConfig.metadata.columns,function(e,l){return["Date"===e.fieldPackagingType||"DATETIMEPICKER"===e.columnExt.formType||"DATEPICKER"===e.columnExt.formType?n("a-form-item",{key:l,staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:e.fieldLabel}},[n("a-radio-group",{attrs:{"button-style":"solid",size:"small"},model:{value:e.columnExt.searchType,callback:function(n){t.$set(e.columnExt,"searchType",n)},expression:"col.columnExt.searchType"}},[n("a-tooltip",{attrs:{title:"日期选择",placement:"top"}},[n("a-radio-button",{attrs:{value:"DATE"}},[n("a-icon",{attrs:{type:"calendar"}})],1)],1),n("a-tooltip",{attrs:{title:"日期区间选择",placement:"top"}},[n("a-radio-button",{attrs:{value:"BETWEEN"}},[n("a-icon",{attrs:{type:"column-width"}})],1)],1)],1)],1):t._e()]})],2)},i=[],a=n("7f57"),o=n("6cc4"),s={name:"TableSearchConfig",methods:{validColumnsFilter:function(t){return"id"!==t.fieldName&&"uuid"!==t.fieldName&&"isDeleted"!==t.fieldName&&"extdata"!==t.fieldName&&"S_FILE_UPLOAD"!==t.columnExt.formType&&"M_FILE_UPLOAD"!==t.columnExt.formType&&"S_IMG_UPLOAD"!==t.columnExt.formType&&"M_IMG_UPLOAD"!==t.columnExt.formType&&"RICH_EDITOR"!==t.columnExt.formType}},components:{columnListSelector:o["a"]},mixins:[a["a"]]},u=s,r=(n("64bb"),n("2877")),c=Object(r["a"])(u,l,i,!1,null,"34298536",null);e["default"]=c.exports},"0dc0":function(t,e,n){},"64bb":function(t,e,n){"use strict";var l=n("88fa"),i=n.n(l);i.a},"6cc4":function(t,e,n){"use strict";var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"title separator"},[t._v("\n    "+t._s(t.title)+"\n    "),n("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",ghost:"",size:"small",title:"更改所有的显示标签",icon:"edit"},on:{click:t.showAllEdit}})],1),[t.resultColumns?n("draggable",{attrs:{element:"div",handle:".drag-handle",options:{group:{name:"columns",pull:"false",put:!1},sort:!0,forceFallback:!0}},model:{value:t.resultColumns,callback:function(e){t.resultColumns=e},expression:"resultColumns"}},t._l(t.resultColumns,function(e,l){return n("a-row",{key:l,staticClass:"config-form-item"},[n("a-col",{attrs:{span:2}},[n("span",{staticClass:"col-icon-span drag-handle",attrs:{title:"拖拽可排序"}},[n("a-icon",{staticStyle:{fontSize:"20px"},attrs:{type:"bars"}})],1)]),n("a-col",{attrs:{span:e.showInput?18:16}},[e.showInput?n("a-input",{attrs:{id:t.voType+"FieldNameEditInput_"+e.fieldName,size:"small"},on:{keyup:[function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.saveEdit(e)},function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:t.cancelEdit(e)}]},model:{value:e.editFieldLabel,callback:function(n){t.$set(e,"editFieldLabel",n)},expression:"col.editFieldLabel"}},[n("template",{slot:"addonAfter"},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"close",title:"关闭"},on:{click:function(n){return t.cancelEdit(e)}}}),n("a-divider",{attrs:{type:"vertical"}}),n("a-icon",{staticStyle:{color:"#2198f7",cursor:"pointer"},attrs:{type:"check",title:"保存"},on:{click:function(n){return t.saveEdit(e)}}})],1)],2):n("p",{staticClass:"icon-small-line"},[n("span",{staticStyle:{"padding-right":"2px"}},[t._v("\n              "+t._s(e.fieldLabel)+"\n            ")]),"BindEntity"===e.refCodeType?n("a-tag",{attrs:{color:"cyan"}},[t._v("\n              对象.字段\n            ")]):t._e(),"BindFieldList"===e.refCodeType?n("a-tag",{attrs:{color:"blue"}},[t._v("\n              对象字段列表\n            ")]):t._e()],1)],1),n("a-col",{attrs:{span:e.showInput?4:6}},[e.showInput?t._e():n("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",size:"small",title:"更改该项显示标签",icon:"edit"},on:{click:function(n){return t.showEdit(e)}}}),n("a-button",{staticStyle:{color:"#f36e70"},attrs:{type:"link",size:"small",title:"删除该项",icon:"delete"},on:{click:function(e){return t.removeColumn(l)}}})],1)],1)}),1):t._e(),n("a-row",[n("a-col",{attrs:{span:"22"}},[t.selectColumns.length>0?n("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":t.filterOption,placeholder:"请选择搜索字段"},on:{change:function(e){return t.addColumn(e)}},model:{value:t.addFieldName,callback:function(e){t.addFieldName=e},expression:"addFieldName"}},t._l(t.selectColumns,function(e,l){return n("a-select-option",{key:l,attrs:{value:e.fieldName}},[t._v("\n            "+t._s(e.fieldLabel)+"["+t._s(e.fieldName)+"]\n          ")])}),1):t._e()],1)],1)]],2)},i=[],a=(n("6762"),n("2fdb"),n("ac6a"),n("75fc")),o=(n("7514"),n("2ef0")),s=n.n(o),u=n("3aa3"),r=n("b76a"),c=n.n(r),d={name:"ColumnListSelector",data:function(){return{resultColumns:[],validColumns:[],addFieldName:void 0,showAllEditFlag:!1}},methods:{initPrimaryKey:function(){if(!this.primaryKeyEvent||!this.columns||0===this.columns.length)return!1;var t=this.columns.find(function(t){return!0===t.primaryKey}),e=void 0===t?"id":t.fieldName;this.$emit("primaryKeyChange",e)},initValidColumns:function(){var t=this;if(this.columns&&this.columns.length>0){var e=this.columns;if(void 0!==this.validColumnsFilter&&(e=this.columns.filter(this.validColumnsFilter)),this.validColumns=s.a.cloneDeep(e),this.appendEditConfig(this.validColumns),this.voType){var n=this.columns[0]["tableName"];u["a"].get("/diboot/devtools/pcds/vorl/".concat(n,"/").concat(this.voType)).then(function(e){if(0===e.code&&e.data){var n,l=e.data.filter(function(t){return"BindEntity"!==t.refCodeType&&"BindEntityList"!==t.refCodeType});if(t.appendEditConfig(l),(n=t.validColumns).push.apply(n,Object(a["a"])(l)),t.value.length>0?t.resultColumns=s.a.cloneDeep(t.value):t.resultColumns=s.a.cloneDeep(t.validColumns),t.needRefEntity){var i,o=e.data.filter(function(t){return"BindEntity"===t.refCodeType&&void 0!==t.columns&&t.columns.length>0}),u=[];o.forEach(function(t){var e=t.columns.filter(function(t){return"id"!==t.fieldName&&"isDeleted"!==t.fieldName&&"extdata"!==t.fieldName&&!t.columnExt.refType}),n=e.map(function(e){return e.fieldName="".concat(t.fieldName,".").concat(e.fieldName),e.fieldLabel="".concat(t.fieldLabel).concat(e.fieldLabel),e.refCodeType=t.refCodeType,e.entityFieldName=t.fieldName,e});u.push.apply(u,Object(a["a"])(n))}),t.appendEditConfig(u),(i=t.validColumns).push.apply(i,u)}}else t.value.length>0?t.resultColumns=s.a.cloneDeep(t.value):t.resultColumns=s.a.cloneDeep(t.validColumns)}).catch(function(){t.value.length>0?t.resultColumns=s.a.cloneDeep(t.value):t.resultColumns=s.a.cloneDeep(t.validColumns)})}else this.value.length>0?this.resultColumns=s.a.cloneDeep(this.value):this.resultColumns=s.a.cloneDeep(this.validColumns)}},addColumn:function(t){var e=this.validColumns.find(function(e){return e.fieldName===t});if(void 0===e)return!1;this.addFieldName=void 0,this.resultColumns.push(e),this.$emit("change",this.resultColumns)},removeColumn:function(t){var e=this.resultColumns.splice(t,1);if(e.length>0){var n=e[0],l=this.validColumns.find(function(t){return t.colName===n.colName});if(void 0!==l){var i=this.validColumns.indexOf(l);-1!==i&&(this.validColumns[i]=n)}}this.$emit("change",this.resultColumns)},appendEditConfig:function(t){t.forEach(function(t){t.showInput=!1,t.editFieldLabel=t.fieldLabel})},showAllEdit:function(){var t=this;this.showAllEditFlag=!this.showAllEditFlag,this.resultColumns&&this.resultColumns.map(function(e){t.showAllEditFlag?e.showInput=!0:t.cancelEdit(e)})},showEdit:function(t){var e=this;t.showInput=!0,setTimeout(function(){document.getElementById("".concat(e.voType,"FieldNameEditInput_").concat(t.fieldName)).focus()},200)},cancelEdit:function(t){t.editFieldLabel=t.fieldLabel,t.showInput=!1,this.focusNextColumn(t)},saveEdit:function(t){if(!t.editFieldLabel)return this.$message.error("字段标签名称不可为空"),!1;t.fieldLabel=t.editFieldLabel,t.showInput=!1,this.$emit("change",this.resultColumns),this.focusNextColumn(t)},focusNextColumn:function(t){var e=this.resultColumns.indexOf(t)+1;if(e>0&&e<this.resultColumns.length){var n=this.resultColumns[e];n.showInput?document.getElementById("".concat(this.voType,"FieldNameEditInput_").concat(n.fieldName)).focus():this.focusNextColumn(n)}},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}},computed:{columns:function(){return this.initColumns?this.initColumns:this.$store.state.database.columns},selectColumns:function(){if(void 0===this.resultColumns)return[];var t=this.resultColumns.map(function(t){return t.fieldName});return this.validColumns.filter(function(e){return!t.includes(e.fieldName)})}},watch:{columns:function(){this.validColumns=[],this.resultColumns=[],this.initValidColumns(),this.initPrimaryKey()},resultColumns:function(t){this.$emit("change",t)}},components:{draggable:c.a},props:{title:{type:String,default:"数据项配置"},voType:{type:String,default:""},value:{type:Array,default:function(){return[]}},validColumnsFilter:{type:Function,default:void 0},needRefEntity:{type:Boolean,default:!0},initColumns:{type:Array,default:void 0},primaryKeyEvent:{type:Boolean,default:!1}},created:function(){this.validColumns=[],this.resultColumns=[],this.initValidColumns(),this.initPrimaryKey()}},m=d,f=(n("9a9a"),n("2877")),p=Object(f["a"])(m,l,i,!1,null,"574a18b6",null);e["a"]=p.exports},7411:function(t,e,n){"use strict";n.r(e);var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-form",{attrs:{layout:"horizontal"}},[n("h4",{staticClass:"title"},[t._v("\n    选择展示的实体对象:\n  ")]),n("a-row",[n("a-col",{attrs:{span:22}},[n("a-form-item",{attrs:{label:""}},[n("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",placeholder:"请选择展示的实体对象","filter-option":t.filterOption},on:{change:function(e){t.moduleConfig.metadata.fieldName=e}},model:{value:t.moduleConfig.metadata.fieldName,callback:function(e){t.$set(t.moduleConfig.metadata,"fieldName",e)},expression:"moduleConfig.metadata.fieldName"}},t._l(t.entityListColumns,function(e){return n("a-select-option",{key:e.fieldName,attrs:{value:e.fieldName}},[t._v("\n            "+t._s(e.fieldLabel)+" ["+t._s(e.fieldName)+"]\n          ")])}),1)],1)],1)],1),n("h4",{staticClass:"title"},[t._v("\n    样式配置:\n  ")]),n("a-row",[n("a-col",{attrs:{span:22}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"切换样式"}},[n("a-radio-group",{model:{value:t.moduleConfig.metadata.showType,callback:function(e){t.$set(t.moduleConfig.metadata,"showType",e)},expression:"moduleConfig.metadata.showType"}},[n("a-radio-button",{attrs:{value:"table"}},[t._v("\n            Table表格\n          ")]),n("a-radio-button",{attrs:{value:"timeline"}},[t._v("\n            时间轴\n          ")])],1)],1)],1),"timeline"===t.moduleConfig.metadata.showType?n("a-col",{attrs:{span:22}},[n("a-form-model-item",{attrs:{label:"布局列数",labelCol:{span:8},wrapperCol:{span:14}}},[n("a-radio-group",{attrs:{"button-style":"solid"},model:{value:t.moduleConfig.metadata.colNumber,callback:function(e){t.$set(t.moduleConfig.metadata,"colNumber",e)},expression:"moduleConfig.metadata.colNumber"}},t._l([1,2,3,4],function(e){return n("a-radio-button",{key:e,attrs:{title:e+"列",value:e}},[t._v("\n            "+t._s(e)+"\n          ")])}),1)],1)],1):t._e()],1),t.refColumns&&t.refColumns.length>0?n("column-list-selector-plus",{ref:"columnListSelector",attrs:{"is-expand":!0,"init-columns":t.refColumns,"need-ref-entity":!1,"valid-columns-filter":t.validColumnsFilter,"col-extra-properties-setter":t.setColExtraProperties,"expand-columns-filter":t.expandColumnsFilter,title:"列表项配置"},on:{change:function(e){t.moduleConfig.metadata.columns=t._.cloneDeep(e)}},scopedSlots:t._u([{key:"item-extra-content",fn:function(e){var l=e.col;return[l.fieldPackagingType&&"String"===l.fieldPackagingType?n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"缩略显示"}},[n("a-checkbox",{model:{value:l.ellipsis,callback:function(e){t.$set(l,"ellipsis",e)},expression:"col.ellipsis"}},[t._v("\n          内容超长缩略显示\n        ")])],1):t._e()]}}],null,!1,2696230147)}):t._e()],1)},i=[],a=(n("7514"),n("cebc")),o=n("e5b5"),s=n("4047"),u=n("3aa3"),r=n("2f62"),c=Object(r["a"])("database"),d=c.mapState,m=Object(r["a"])("DragConfig"),f=m.mapMutations,p={name:"RefEntityListPanelConfig",data:function(){return{entityListColumns:[]}},methods:Object(a["a"])({},f(["setRemoveModuleList"]),{setColExtraProperties:function(t){if("antdv"!==this.projectType)return!1;"String"===t.fieldPackagingType&&t.colLength&&t.colLength>255?t.ellipsis=!0:"String"===t.fieldPackagingType?t.ellipsis=!1:t.ellipsis=void 0},expandColumnsFilter:function(t){var e=this.projectType;return"antdv"===e&&"String"===t.fieldPackagingType},validColumnsFilter:function(t){return"id"!==t.fieldName&&"isDeleted"!==t.fieldName&&"extdata"!==t.fieldName&&"S_FILE_UPLOAD"!==t.columnExt.formType&&"M_FILE_UPLOAD"!==t.columnExt.formType&&"S_IMG_UPLOAD"!==t.columnExt.formType&&"M_IMG_UPLOAD"!==t.columnExt.formType&&"RICH_EDITOR"!==t.columnExt.formType&&!t.columnExt.refType},initEntityList:function(){var t=this;u["a"].get("/diboot/devtools/pcds/vorl/".concat(this.currentTableName,"/DetailVO")).then(function(e){if(0===e.code)if(e.data&&e.data.length>0){var n=e.data.filter(function(t){return"BindEntityList"===t.refCodeType});if(n.length>0){t.entityListColumns=n;var l=t.moduleConfig.metadata,i=l.fieldName,a=l.columns;i&&a&&a.length>0&&t.$nextTick(function(){var e=t.$refs.columnListSelector;e&&e.setResultColumns(a)}),i||(t.moduleConfig.metadata.fieldName=t.entityListColumns[0].fieldName)}else t.showInvalidInfo()}else t.showInvalidInfo();else t.showInvalidInfo()})},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},showInvalidInfo:function(){this.setRemoveModuleList([this.uuid]),this.$message.warning("该页面暂无附加信息，请确保detailVO中具有关联列表属性！")}}),computed:Object(a["a"])({},d({currentTableName:function(t){return t.currentTableName}}),{refColumns:function(){var t=this;if(0===this.entityListColumns.length||!this.moduleConfig.metadata.fieldName)return[];var e=this.entityListColumns.find(function(e){return t.moduleConfig.metadata.fieldName===e.fieldName});return void 0===e?[]:e.columns}}),mixins:[o["a"]],components:{columnListSelectorPlus:s["a"]},mounted:function(){var t=this;this.$nextTick(function(){t.initEntityList()})}},h=p,C=(n("8a03"),n("2877")),v=Object(C["a"])(h,l,i,!1,null,"7e7d31f0",null);e["default"]=v.exports},"88fa":function(t,e,n){},"8a03":function(t,e,n){"use strict";var l=n("eb9a"),i=n.n(l);i.a},"9a9a":function(t,e,n){"use strict";var l=n("0dc0"),i=n.n(l);i.a},eb9a:function(t,e,n){}}]);