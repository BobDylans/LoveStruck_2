(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf815da8"],{"11e7":function(e,t,n){"use strict";var a=n("af5f"),i=n.n(a);i.a},1248:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("draggable",{staticClass:"module-screen",class:{root:"root"===e.type,null:!e.targetList||0===e.targetList.length,preview:"preview"===e.code,panel:"panel"===e.tipClass,layoutc:"layoutc"===e.tipClass,notnull:e.targetList&&e.targetList.length>0},attrs:{element:"div",container:e.container,"ghost-class":"sortable-ghost",animation:340,options:{group:{name:e.disabled?"preview":"compgroup",pull:!1},sort:!e.disabled}},on:{add:e.addModule},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}},e._l(e.targetList,function(t,a){return n("div",{key:t.uuid,staticClass:"component-box",class:{current:e.currentModule.uuid===t.uuid}},[e.disabled?[t.uuid?n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"item.hidden === undefined || !item.hidden"}],tag:"component",staticClass:"preview-element",class:{current:e.currentModule.uuid===t.uuid},attrs:{uuid:t.uuid,"project-type":e.projectType,code:e.code},on:{click:function(n){return e.changeCurrentModule(n,t)}}}):e._e()]:[t.uuid?n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"item.hidden === undefined || !item.hidden"}],tag:"component",staticClass:"preview-element",class:{current:e.currentModule.uuid===t.uuid},attrs:{uuid:t.uuid,"project-type":e.projectType,code:e.code},nativeOn:{click:function(n){return n.stopPropagation(),e.changeCurrentModule(n,t)}}}):e._e()],n("div",{staticClass:"component-item-operate-box",class:{right:"left"!==e.previewBtnGroupAlign,left:"left"===e.previewBtnGroupAlign}},["layoutc"!==t.mark&&t.multi?n("a",{staticClass:"btn-icon",attrs:{title:"复制",href:"javascript:;"},on:{click:function(n){return n.stopPropagation(),e.copyModule(t,a)}}},[n("a-icon",{attrs:{type:"copy"}})],1):e._e(),n("a",{staticClass:"btn-icon",attrs:{title:"删除",href:"javascript:;"},on:{click:function(t){return t.stopPropagation(),e.removeModule(a)}}},[n("a-icon",{attrs:{type:"delete"}})],1)])],2)}),0)},i=[],r=(n("ac6a"),n("7514"),n("96cf"),n("3b8d")),o=n("cebc"),s=n("2f62"),l=n("381a"),c=n.n(l),u=n("2ef0"),d=n.n(u),f=n("b76a"),p=n.n(f),m=n("6892"),g=Object(s["a"])("panelDesigner"),h=g.mapMutations,v=g.mapActions,b={name:"WorkPanel",data:function(){return{targetList:[],componentMap:{}}},methods:Object(o["a"])({},h(["setModuleConfig","removeConfig","updateConfigMap","updateCurrentModule"]),v({modifyCurrentModule:"modifyCurrentModule"}),{addModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=2;break}return e.abrupt("return",!1);case 2:if(n=t.item._underlying_vm_,a={mark:n.mark,multi:n.multi,type:n.type},i=t.newIndex,this.beforeModuleJoinValidate(a)){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,this.addModuleObj(a,i);case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addPreviewModuleObj:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!==n&&this.updateConfigMap({key:this.code,configMap:n}),this.loadModule(t),this.targetList.splice(a,1,t);case 3:case"end":return e.stop()}},e,this)}));function t(t,n,a){return e.apply(this,arguments)}return t}(),addModuleObj:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,a){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return void 0===t.uuid&&(t.uuid=c()(16,{numbers:!1})),this.loadModule(t),e.next=4,this.modifyCurrentModule({key:this.code,module:t});case 4:i=void 0!==a&&a?0:1,this.targetList.splice(n,i,t),this.targetList=this.targetList.filter(function(e){return void 0!==e.uuid}),this.$emit("add",t),this.$emit("input",this.targetList),this.$forceUpdate();case 10:case"end":return e.stop()}},e,this)}));function t(t,n,a){return e.apply(this,arguments)}return t}(),autoAppendModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find(function(e){return e.mark===t}),void 0===n){e.next=3;break}return e.abrupt("return",!1);case 3:return a={mark:t,hidden:!0},e.next=6,this.addModuleObj(a,0,!0);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),copyModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var a,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=d.a.cloneDeep(t),a.uuid=c()(16,{numbers:!1}),i=d.a.cloneDeep(this.moduleConfigMap[t.uuid]),i.uuid=a.uuid,this.setModuleConfig({key:this.code,uuid:a.uuid,config:i}),this.targetList.splice(n+1,0,a),r=d.a.cloneDeep(this.targetList),e.next=9,this.modifyCurrentModule({key:this.code,module:a});case 9:this.$emit("add",a),this.$emit("input",r),this.$forceUpdate();case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),removeModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,a,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=d.a.cloneDeep(this.targetList[t]),a=void 0!==this.targetList[t-1]?this.targetList[t-1]:this.targetList[t+1],void 0===a){e.next=5;break}return e.next=5,this.modifyCurrentModule({key:this.code,module:a});case 5:i=n["uuid"],this.removeConfig({key:this.code,uuid:i}),this.targetList.splice(t,1),r=d.a.cloneDeep(this.targetList),this.$emit("remove",{m:n,targetList:r}),this.$emit("input",r);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),autoRemoveModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find(function(e){return e.mark===t}),void 0!==n){e.next=3;break}return e.abrupt("return",!1);case 3:if(a=this.targetList.indexOf(n),-1!==a){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,this.removeModule(a);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("8c5a")("./".concat(e.mark,"/index.vue"))})},changeCurrentModule:function(e,t){if(this.disabled)return!1;"layoutc"!==t.mark&&e.preventDefault(),this.modifyCurrentModule({key:this.code,module:t}),m["a"].$emit("switchModuleConfigPanel_".concat(this.code))},autoSetModuleConfig:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,a){var i,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.targetList.find(function(e){return e.mark===t}),void 0!==i){e.next=4;break}return e.next=4,this.autoAppendModule(t);case 4:if(i=this.targetList.find(function(e){return e.mark===t}),void 0!==i){e.next=7;break}return e.abrupt("return",!1);case 7:r=i.uuid,o=this.$store.state.panelDesigner[this.code].moduleConfigMap,n.uuid=r,n.mark=t,o[r]=n,this.updateConfigMap({key:this.code,configMap:o}),a&&a(i);case 14:case"end":return e.stop()}},e,this)}));function t(t,n,a){return e.apply(this,arguments)}return t}(),clearAllModuleList:function(){this.targetList=[]},clearModuleListConfig:function(e){var t=this;!e||e.length<0||e.forEach(function(e){t.removeModuleConfig(e)})},removeModuleConfig:function(e){this.removeConfig({key:this.code,uuid:e.uuid})}}),watch:{targetList:function(e){"preview"!==this.code&&this.$emit("input",e)}},computed:Object(o["a"])({},Object(s["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign}}),{currentModule:function(){return this.$store.state.panelDesigner[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.panelDesigner[this.code].moduleConfigMap},disabled:function(){return"preview"===this.code}}),mounted:function(){console.log("workpanel init value",d.a.cloneDeep(this.value)),this.targetList=d.a.cloneDeep(this.value)},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},code:{type:String,default:""},projectType:{type:String,required:!0},beforeModuleJoinValidate:{type:Function,default:function(){return!0}},container:{type:String,default:"root"},tipClass:{type:String,default:""}},components:{draggable:p.a},created:function(){var e=this;"root"===this.type&&(m["a"].$on("autoAppendModule_".concat(this.code),function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoAppendModule(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),m["a"].$on("autoRemoveModule_".concat(this.code),function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoRemoveModule(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),m["a"].$on("autoSetModuleConfig_".concat(this.code),function(t){var n=t.mark,a=t.moduleConfig,i=t.callback;e.autoSetModuleConfig(n,a,i)}),m["a"].$on("autoChangeCurrentModule_".concat(this.code),function(t){e.updateCurrentModule({key:e.code,module:t})}))},destroyed:function(){this.clearModuleListConfig(this.targetList),"root"===this.type&&(m["a"].$off("autoAppendModule_".concat(this.code)),m["a"].$off("autoRemoveModule_".concat(this.code)),m["a"].$off("autoSetModuleConfig_".concat(this.code)),m["a"].$off("autoChangeCurrentModule_".concat(this.code)))}},C=b,y=(n("8f04"),n("2877")),M=Object(y["a"])(C,a,i,!1,null,"4787b8aa",null);t["a"]=M.exports},"2d34":function(e,t,n){},3056:function(e,t,n){},"37c8":function(e,t,n){t.f=n("2b4c")},"3a72":function(e,t,n){var a=n("7726"),i=n("8378"),r=n("2d00"),o=n("37c8"),s=n("86cc").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},5444:function(e,t,n){"use strict";var a=n("3056"),i=n.n(a);i.a},"67ab":function(e,t,n){var a=n("ca5a")("meta"),i=n("d3f4"),r=n("69a8"),o=n("86cc").f,s=0,l=Object.isExtensible||function(){return!0},c=!n("79e5")(function(){return l(Object.preventExtensions({}))}),u=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,a)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[a].i},f=function(e,t){if(!r(e,a)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[a].w},p=function(e){return c&&m.NEED&&l(e)&&!r(e,a)&&u(e),e},m=e.exports={KEY:a,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},6831:function(e,t,n){},"6ef5":function(e,t,n){var a={"./generalForm/config.vue":["85e1","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","designerModuleConfig0"],"./generalList/config.vue":["44a5","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig1"],"./layoutc/config.vue":["7219","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig2"],"./multiForm/config.vue":["4b35","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig3"],"./operateLine/config.vue":["ab09","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig4"],"./paddingc/config.vue":["99ec","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig5"],"./panelContainer/config.vue":["0ef2","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","chunk-bf815da8","designerModuleConfig12~designerModuleConfig6","designerModuleConfig6"],"./panelData/config.vue":["3319","designerModuleConfig7~designerModuleConfig9","designerModuleConfig7"],"./panelProps/config.vue":["af7f","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","designerModuleConfig8"],"./statisticalChart/config.vue":["d777","designerModuleConfig7~designerModuleConfig9","designerModuleConfig9"],"./tableSearch/config.vue":["03e1","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig10"],"./tabsPage/config.vue":["d966","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig11"],"./timeline/config.vue":["5381","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","chunk-bf815da8","designerModuleConfig12~designerModuleConfig6","designerModuleConfig12"],"./titleLine/config.vue":["d007","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-57df489f","designerModuleConfig13"],"./treeList/config.vue":["42d3","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig14"],"./treeStruct/config.vue":["11f3","chunk-57df489f","designerModuleConfig15"]};function i(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(a)},i.id="6ef5",e.exports=i},"7bbc":function(e,t,n){var a=n("6821"),i=n("9093").f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==r.call(e)?s(e):i(a(e))}},"868f":function(e,t,n){"use strict";var a=n("efd6"),i=n.n(a);i.a},"8a81":function(e,t,n){"use strict";var a=n("7726"),i=n("69a8"),r=n("9e1e"),o=n("5ca1"),s=n("2aba"),l=n("67ab").KEY,c=n("79e5"),u=n("5537"),d=n("7f20"),f=n("ca5a"),p=n("2b4c"),m=n("37c8"),g=n("3a72"),h=n("d4c0"),v=n("1169"),b=n("cb7c"),C=n("d3f4"),y=n("4bf8"),M=n("6821"),k=n("6a99"),w=n("4630"),x=n("2aeb"),L=n("7bbc"),S=n("11e9"),_=n("2621"),P=n("86cc"),D=n("0d58"),$=S.f,O=P.f,j=L.f,E=a.Symbol,I=a.JSON,N=I&&I.stringify,R="prototype",A=p("_hidden"),F=p("toPrimitive"),T={}.propertyIsEnumerable,V=u("symbol-registry"),G=u("symbols"),z=u("op-symbols"),q=Object[R],K="function"==typeof E&&!!_.f,J=a.QObject,W=!J||!J[R]||!J[R].findChild,B=r&&c(function(){return 7!=x(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var a=$(q,t);a&&delete q[t],O(e,t,n),a&&e!==q&&O(q,t,a)}:O,U=function(e){var t=G[e]=x(E[R]);return t._k=e,t},Y=K&&"symbol"==typeof E.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof E},H=function(e,t,n){return e===q&&H(z,t,n),b(e),t=k(t,!0),b(n),i(G,t)?(n.enumerable?(i(e,A)&&e[A][t]&&(e[A][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,A)||O(e,A,w(1,{})),e[A][t]=!0),B(e,t,n)):O(e,t,n)},Q=function(e,t){b(e);var n,a=h(t=M(t)),i=0,r=a.length;while(r>i)H(e,n=a[i++],t[n]);return e},Z=function(e,t){return void 0===t?x(e):Q(x(e),t)},X=function(e){var t=T.call(this,e=k(e,!0));return!(this===q&&i(G,e)&&!i(z,e))&&(!(t||!i(this,e)||!i(G,e)||i(this,A)&&this[A][e])||t)},ee=function(e,t){if(e=M(e),t=k(t,!0),e!==q||!i(G,t)||i(z,t)){var n=$(e,t);return!n||!i(G,t)||i(e,A)&&e[A][t]||(n.enumerable=!0),n}},te=function(e){var t,n=j(M(e)),a=[],r=0;while(n.length>r)i(G,t=n[r++])||t==A||t==l||a.push(t);return a},ne=function(e){var t,n=e===q,a=j(n?z:M(e)),r=[],o=0;while(a.length>o)!i(G,t=a[o++])||n&&!i(q,t)||r.push(G[t]);return r};K||(E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(z,n),i(this,A)&&i(this[A],e)&&(this[A][e]=!1),B(this,e,w(1,n))};return r&&W&&B(q,e,{configurable:!0,set:t}),U(e)},s(E[R],"toString",function(){return this._k}),S.f=ee,P.f=H,n("9093").f=L.f=te,n("52a7").f=X,_.f=ne,r&&!n("2d00")&&s(q,"propertyIsEnumerable",X,!0),m.f=function(e){return U(p(e))}),o(o.G+o.W+o.F*!K,{Symbol:E});for(var ae="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ae.length>ie;)p(ae[ie++]);for(var re=D(p.store),oe=0;re.length>oe;)g(re[oe++]);o(o.S+o.F*!K,"Symbol",{for:function(e){return i(V,e+="")?V[e]:V[e]=E(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!K,"Object",{create:Z,defineProperty:H,defineProperties:Q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=c(function(){_.f(1)});o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function(e){return _.f(y(e))}}),I&&o(o.S+o.F*(!K||c(function(){var e=E();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){var t,n,a=[e],i=1;while(arguments.length>i)a.push(arguments[i++]);if(n=t=a[1],(C(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),a[1]=t,N.apply(I,a)}}),E[R][F]||n("32e9")(E[R],F,E[R].valueOf),d(E,"Symbol"),d(Math,"Math",!0),d(a.JSON,"JSON",!0)},"8c5a":function(e,t,n){var a={"./generalForm/index.vue":["18a5","designerModule0~designerModule3~designerModule4","designerModule0~designerModule1","designerModule0"],"./generalList/index.vue":["b13d","designerModule0~designerModule1","designerModule1"],"./layoutc/index.vue":["c3d1","designerModule2~designerModule5","designerModule2"],"./multiForm/index.vue":["921a","designerModule0~designerModule3~designerModule4","designerModule3"],"./operateLine/index.vue":["77b1","designerModule0~designerModule3~designerModule4","designerModule4"],"./paddingc/index.vue":["8c96","designerModule2~designerModule5","designerModule5"],"./panelContainer/index.vue":["2728","designerModule6~designerModule8","designerModule6"],"./panelData/index.vue":["df2c","designerModule7"],"./panelProps/index.vue":["05f4","designerModule6~designerModule8","designerModule8"],"./statisticalChart/index.vue":["b829","chunk-0973db29","designerModule9"],"./tableSearch/index.vue":["93fc","designerModule10"],"./tabsPage/index.vue":["920a","designerModule11"],"./timeline/index.vue":["539d","designerModule12"],"./titleLine/index.vue":["3a46","designerModule13"],"./treeList/index.vue":["c047","designerModule14"],"./treeStruct/index.vue":["f003","designerModule15"]};function i(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(a)},i.id="8c5a",e.exports=i},"8f04":function(e,t,n){"use strict";var a=n("2d34"),i=n.n(a);i.a},9391:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-spin",{attrs:{tip:e.submitStatus.text,spinning:e.submitStatus.loading}},[n("div",{staticClass:"app-main"},[n("div",{staticClass:"designer-container"},[n("a-form-model",{ref:"panelInfoForm",staticClass:"main-form",staticStyle:{background:"#e8f1ff"},attrs:{layout:"inline",model:e.panelInfo,rules:e.panelInfoRules}},[n("a-form-model-item",{staticStyle:{"margin-left":"5px","margin-right":"0"}},[n("a-popconfirm",{attrs:{title:"您确认新建一个面板吗？","ok-text":"确认","cancel-text":"取消",placement:"bottomLeft"},on:{confirm:e.reset}},[n("a-button",{attrs:{type:"link",icon:"plus"}})],1)],1),n("a-form-model-item",{staticStyle:{"margin-right":"0"}},[n("a-popover",{attrs:{placement:"bottomLeft",title:"选择面板进行编辑",trigger:"click"},model:{value:e.panelPopVisible,callback:function(t){e.panelPopVisible=t},expression:"panelPopVisible"}},[n("a-button",{attrs:{type:"link",icon:"edit"}}),n("div",{attrs:{slot:"content"},slot:"content"},[e.panelList&&e.panelList.length>0?n("div",{staticClass:"panel-list-container"},[n("a-input-search",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"请输入面板编码/名称后回车搜索","enter-button":""},on:{search:e.onPanelSearch}}),n("a-list",{attrs:{size:"small",bordered:"","data-source":e.validPanelList},scopedSlots:e._u([{key:"renderItem",fn:function(t,a){return n("a-list-item",{staticClass:"panel-list-item",staticStyle:{"padding-right":"40px"},on:{click:function(n){return e.onPanelChanged(t.id)}}},[n("p",{staticClass:"panel-info"},[e._v(e._s(t.panelName)+" ["+e._s(t.panelCode)+"]")]),n("a-button",{staticClass:"btn-delete",attrs:{size:"small",ghost:"",type:"danger",icon:"delete"},on:{click:function(n){return n.stopPropagation(),e.removePanel(t)}}})],1)}}],null,!1,13656519)})],1):[e._v("\n                还没有面板可供编辑，请先新建\n              ")]],2)],1)],1),n("a-form-model-item",[n("a-popover",{attrs:{placement:"leftTop",title:"常用设置",trigger:"click"}},[n("div",{staticStyle:{width:"280px",height:"120px"},attrs:{slot:"content"},slot:"content"},[n("a-form-model",e._b({attrs:{layout:"horizontal"}},"a-form-model",{labelCol:{span:12},wrapperCol:{span:12}},!1),[n("a-form-model-item",{attrs:{label:"预览区按钮对齐方式"}},[n("a-radio-group",{attrs:{value:e.previewBtnGroupAlign},on:{change:function(t){return e.$store.commit("SET_DESINGER_PREVIEW_BTN_GROUP_ALIGN",t.target.value)}}},[n("a-radio-button",{attrs:{value:"left"}},[n("a-icon",{attrs:{type:"align-left"}})],1),n("a-radio-button",{attrs:{value:"right"}},[n("a-icon",{attrs:{type:"align-right"}})],1)],1)],1)],1)],1),n("a-button",{attrs:{type:"link",icon:"setting",title:"设置"}})],1)],1),n("a-form-model-item",[void 0===e.panelInfo.id?[e._v("\n            状态：\n            "),n("a-tag",{attrs:{color:"#87d068"}},[e._v("\n              新建\n            ")])]:[e._v("\n            状态：\n            "),n("a-tag",{attrs:{color:"#2db7f5"}},[e._v("\n              更新\n            ")])]],2),n("a-form-model-item",{attrs:{label:"面板名称",prop:"name"}},[n("a-input",{model:{value:e.panelInfo.name,callback:function(t){e.$set(e.panelInfo,"name",t)},expression:"panelInfo.name"}})],1),n("a-form-model-item"),n("a-form-model-item",{attrs:{label:"编码/文件名",prop:"code"}},[n("a-input",{on:{change:function(t){e.panelInfo.fileName=e.panelInfo.code}},model:{value:e.panelInfo.code,callback:function(t){e.$set(e.panelInfo,"code",t)},expression:"panelInfo.code"}})],1),n("a-form-model-item",{attrs:{label:"所在目录",prop:"dirPath"}},[n("a-popover",{attrs:{trigger:"click"},model:{value:e.dirSelectorPopover,callback:function(t){e.dirSelectorPopover=t},expression:"dirSelectorPopover"}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n              所在目录选择\n              "),n("a-button",{staticStyle:{float:"right","margin-top":"-4px"},attrs:{type:"link",icon:"reload"},on:{click:function(t){return e.$refs.dirSelector.initDirList()}}})],1),n("a",{attrs:{slot:"content"},slot:"content"},[n("dir-selector",{ref:"dirSelector",on:{complete:function(t){e.dirSelectorPopover=!1}},model:{value:e.panelInfo.dirPath,callback:function(t){e.$set(e.panelInfo,"dirPath",t)},expression:"panelInfo.dirPath"}})],1),n("a-button",{attrs:{type:"link"}},[e._v("\n              "+e._s(e.panelInfo.dirPath)+"\n            ")])],1)],1),e.abstractPanel?e._e():n("a-form-model-item",[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:["f_pc_panel_generate"],expression:"['f_pc_panel_generate']"}],attrs:{type:"primary",loading:e.submitStatus.loading,icon:"plus"},on:{click:function(t){return e.beforeGenerate("generate")}}},[e._v("\n            添加&生成当前面板\n          ")]),n("a-button",{directives:[{name:"permission-missing",rawName:"v-permission-missing",value:["f_pc_panel_generate"],expression:"['f_pc_panel_generate']"}],attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.subscribeSuccess?e.beforeGenerate("generate"):e.$refs.nonePermissionModal.open()}}},[e._v("\n            添加&生成当前面板\n          ")])],1),e.abstractPanel?n("a-form-model-item",[n("a-button",{attrs:{type:"primary",loading:e.submitStatus.loading,icon:"plus"},on:{click:function(t){return e.beforeGenerate("saveAbstractPanel")}}},[e._v("\n            保存为生成策略\n          ")])],1):e._e(),e.isDevEnv?n("a-form-model-item",{attrs:{label:"抽象面板"}},[n("a-switch",{model:{value:e.abstractPanel,callback:function(t){e.abstractPanel=t},expression:"abstractPanel"}})],1):e._e()],1),n("div",{staticStyle:{height:"10px"}}),n("designer",{ref:"pc_designer_"+e.pane.code,attrs:{code:e.pane.code,"project-type":e.projectType,"init-module-mark-list":e.pane.moduleList},on:{add:e.addModule,remove:e.removeModule,change:function(t){return e.moduleListChanged(e.pane.code,t)},validateSuccess:e.onValidateSuccess,validateFailed:e.onValidateFailed}})],1),n("none-permission-modal",{ref:"nonePermissionModal",on:{subscribeSuccess:function(t){e.subscribeSuccess=!0}}})],1)])},i=[],r=n("cebc"),o=(n("6762"),n("2fdb"),n("28a5"),n("7514"),n("ac6a"),n("7f7f"),n("96cf"),n("3b8d")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-layout",{staticClass:"layout-container"},[n("a-layout-sider",{staticClass:"layout-sider-container sider-left",attrs:{width:e.sidebarState.left?260:0}},[e.sidebarState.left?n("div",{staticClass:"modules-box"},[e._l(e.sourceList,function(t,a){return[n("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"s.hidden === undefined || !s.hidden"}],key:t+"_"+a},[n("h3",{staticClass:"title-line"},[e._v(e._s(t.name))]),n("draggable",{attrs:{element:"a-row","ghost-class":"sortable-ghost",options:{group:{name:"compgroup",pull:"clone",put:!1},sort:!1},move:e.moveDrag},on:{end:e.endDrag},model:{value:t.list,callback:function(n){e.$set(t,"list",n)},expression:"s.list"}},[e._l(t.list,function(t){return[n("div",{key:t.type?t.type:t.mark,staticClass:"module-item",class:{current:e.currentModule.type?e.currentModule.type===t.type:e.currentModule.mark===t.mark}},[n("p",{staticClass:"item-line"},[n("span",{staticClass:"item-icon"},[n("a-icon",{attrs:{type:t.icon}})],1),e._v("\n                    "+e._s(t.name)+"\n                  ")])])]})],2)],1)]})],2):e._e()]),n("a-layout-content",{staticStyle:{background:"#fff"}},[n("div",{staticClass:"layout-content-container"},[n("div",{staticClass:"module-modal"},[n("work-panel",{ref:"workPanel",attrs:{type:"root",code:e.code,"project-type":e.projectType},on:{add:function(t){return e.$emit("add",t)},remove:function(t){return e.$emit("remove",t)}},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}})],1),n("div",{staticClass:"expand-btn expand-left",attrs:{title:e.sidebarState.left?"收起":"展开"},on:{click:function(t){e.sidebarState.left=!e.sidebarState.left}}},[e.sidebarState.left?n("a-icon",{attrs:{type:"double-left"}}):n("a-icon",{attrs:{type:"double-right"}})],1),n("div",{staticClass:"expand-btn expand-right",attrs:{title:e.sidebarState.right?"收起":"展开"},on:{click:function(t){e.sidebarState.right=!e.sidebarState.right}}},[e.sidebarState.right?n("a-icon",{attrs:{type:"double-right"}}):n("a-icon",{attrs:{type:"double-left"}})],1)])]),n("a-layout-sider",{staticClass:"layout-sider-container sider-right",attrs:{width:e.sidebarState.right?360:0}},[n("config-page",{ref:"configPage",attrs:{"project-type":e.projectType,code:e.code}})],1)],1)],1)},l=[],c=(n("ac4d"),n("8a81"),n("b76a")),u=n.n(c),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-container"},[n("a-tabs",{staticClass:"all-config-tabs",model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[n("a-tab-pane",{key:"config_1",attrs:{tab:"组件属性"}},[n("div",{staticClass:"config-container"},e._l(e.moduleConfigMap,function(t){return n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:!!e.currentModule.uuid&&e.currentModule.uuid===t.uuid,expression:"!!currentModule.uuid && currentModule.uuid === item.uuid"}],key:t.uuid,ref:e.code+"_config_"+t.uuid,refInFor:!0,tag:"component",attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType}})}),1)]),n("a-tab-pane",{key:"config_2",attrs:{tab:"通用属性","force-render":!0}},[n("common-config",{ref:"commonConfigTab",staticClass:"config-container",attrs:{"project-type":e.projectType,code:e.code}})],1)],1)],1)},f=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-box"},[n("general-props-config",{directives:[{name:"permission",rawName:"v-permission",value:["pc_panel_m_panelProps"],expression:"['pc_panel_m_panelProps']"}],ref:"generalPropsConfig",attrs:{code:e.code}}),n("general-data-config",{directives:[{name:"permission",rawName:"v-permission",value:["pc_panel_m_panelData"],expression:"['pc_panel_m_panelData']"}],ref:"generalDataConfig",attrs:{code:e.code}}),n("a-form",{directives:[{name:"permission",rawName:"v-permission",value:["f_pc_panel_event_kit"],expression:"['f_pc_panel_event_kit']"}],attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("面板事件设置")]),e.emitEventList.length>0?n("a-collapse",{attrs:{"default-active-key":"config_panel_0",bordered:!1}},[e._l(e.emitEventList,function(t,a){return[n("a-collapse-panel",{key:"config_panel_"+a,attrs:{header:t.key?t.key:"事件设置"}},[n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"事件"}},[n("a-tag",{attrs:{color:"blue"}},[e._v("\n              "+e._s(t.key)+"\n            ")])],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"参数"}},[t.params.length>0?e._l(t.params,function(t){return n("a-tag",{key:t.key,attrs:{color:"cyan"}},[e._v("\n                "+e._s(t.key)+"\n              ")])}):[e._v("\n              无\n            ")]],2),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"来源"}},[n("a-tag",{attrs:{color:"#2db7f5"}},[e._v("\n              "+e._s(t.origin)+"\n            ")])],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"备注"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"事件备注"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"emitEvent.name"}})],1)],1)]})],2):[e._v("\n      暂无事件列表\n    ")]],2)],1)},m=[],g=n("75fc"),h=(n("a481"),n("4917"),n("2ef0")),v=n.n(h),b=n("2f62"),C=n("6892"),y=Object(b["a"])("panelDesigner"),M=y.mapState,k={data:function(){return{emitEventList:[]}},methods:{extractEmitEventList:function(e,t){if(e&&e.includes("this.$emit(")){var n=/this.\$emit\((.+?)\)/g,a=e.match(n);if(a&&0!==a.length){for(var i=0,r=[],o=0;o<a.length;o++){var s=a[o];s=s.replace(/this.\$emit\(/g,"").replace(/\)/g,"");for(var l=s.split(","),c="",u=0,d=[],f=0;f<l.length;f++){var p=l[f];p=p.trim(),p&&(p.includes('"')||p.includes("'")?c=p.replace(/"/g,"").replace(/'/g,""):(p.includes(".")&&(p=p.slice(p.lastIndexOf(".")+1,p.length)),d.push({key:p,name:"参数".concat(++u),type:"String"})))}c&&r.push({key:c,name:"事件说明".concat(++i),params:d,origin:t})}return r}}},collectEmitEvents4configMap:function(e){var t=this,n=[];if(v.a.forEach(e,function(e,a){if("panelProps"===e.mark){if(e.metadata.propConfigList&&e.metadata.propConfigList.length>0)for(var i=0;i<e.metadata.propConfigList.length;i++){var r,o=e.metadata.propConfigList[i],s=t.extractEmitEventList(o.watchCode,"自定义入参watch函数");void 0!==s&&(r=n).push.apply(r,Object(g["a"])(s))}}else if("operateLine"===e.mark){if(e.metadata.btnConfigList&&e.metadata.btnConfigList.length>0)for(var l=0;l<e.metadata.btnConfigList.length;l++){var c,u=e.metadata.btnConfigList[l],d=[];"click"===u.event?d=t.extractEmitEventList(u.clickEvent.handlerCode,"操作栏按钮点击事件"):"popWindow"===u.event&&u.confirmEvent.open&&(d=t.extractEmitEventList(u.confirmEvent.handlerCode,"操作栏弹窗确认事件")),void 0!==d&&0!==d.length&&(c=n).push.apply(c,Object(g["a"])(d))}}else if(e.scriptConfig){if(e.scriptConfig.event&&e.scriptConfig.event.length>0)for(var f=0;f<e.scriptConfig.event.length;f++){var p,m=e.scriptConfig.event[f],h=t.extractEmitEventList(m.handlerCode,"自定义事件处理函数");void 0!==h&&(p=n).push.apply(p,Object(g["a"])(h))}if(e.scriptConfig.emitEvent&&e.scriptConfig.emitEvent.length>0)for(var b=0;b<e.scriptConfig.emitEvent.length;b++){var C=v.a.cloneDeep(e.scriptConfig.emitEvent[b]);C.origin="组件内置/生成代码",n.push(C)}}}),0===n.length)return[];var a={};return n=n.reduce(function(e,t){return!a[t.key]&&(a[t.key]=e.push(t)),e},[]),n},smartMergeEventList:function(e){var t;if(void 0===e&&(e=[]),0!==this.emitEventList.length){var n=e.map(function(e){return e.key});this.emitEventList=this.emitEventList.filter(function(e){return n.includes(e.key)});var a={};e.forEach(function(e){a[e.key]=e});for(var i=0;i<this.emitEventList.length;i++){var r=this.emitEventList[i],o=a[r.key];if(o){var s=r.params.map(function(e){return e.key}).join("_"),l=o.params.map(function(e){return e.key}).join("_");s!==l&&(r.params=o.params)}}var c=this.emitEventList.map(function(e){return e.key}),u=e.filter(function(e){return!c.includes(e.key)});(t=this.emitEventList).push.apply(t,Object(g["a"])(u))}else{var d;(d=this.emitEventList).push.apply(d,Object(g["a"])(e))}}},computed:Object(r["a"])({},M({moduleConfigMap:function(e){return e.default.moduleConfigMap}})),watch:{moduleConfigMap:{handler:function(e){var t=this.collectEmitEvents4configMap(e);this.smartMergeEventList(t)},deep:!0}},created:function(){var e=this;C["a"].$on("collectPanelEvents",function(t){C["a"].$emit("collectPanelEventsComplete",{type:t,emitEventList:e.emitEventList})})},destroyed:function(){C["a"].$off("collectPanelEvents")}},w=n("8141"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form",{staticClass:"panel-props-config ",attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("\n      面板入参props\n      "),n("a-icon",{staticStyle:{cursor:"pointer",color:"rgb(24, 144, 255)"},attrs:{type:"plus-circle"},on:{click:e.addProp}})],1),n("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.moduleConfig.metadata.propConfigList,function(t,a){return[n("a-collapse-panel",{key:"config_panel_"+a,attrs:{header:t.key?t.key:"参数"+(a+1)+" 配置"}},[n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"参数"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数名称"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"config.key"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"说明"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数说明"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"config.name"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"类型"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"参数类型",size:"small"},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"config.type"}},[n("a-select-option",{attrs:{value:"String"}},[e._v("\n                String\n              ")]),n("a-select-option",{attrs:{value:"Array"}},[e._v("\n                Array\n              ")]),n("a-select-option",{attrs:{value:"Object"}},[e._v("\n                Object\n              ")]),n("a-select-option",{attrs:{value:"Function"}},[e._v("\n                Function\n              ")]),n("a-select-option",{attrs:{value:"Number"}},[e._v("\n                Number\n              ")]),n("a-select-option",{attrs:{value:"Boolean"}},[e._v("\n                Boolean\n              ")])],1)],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"默认值"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数默认值"},model:{value:t.default,callback:function(n){e.$set(t,"default",n)},expression:"config.default"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"必填项"}},[n("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.required,callback:function(n){e.$set(t,"required",n)},expression:"config.required"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数变化检测"}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"不启用"},model:{value:t.hasWatch,callback:function(n){e.$set(t,"hasWatch",n)},expression:"config.hasWatch"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"初始化时检测"}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"不启用"},model:{value:t.immediate,callback:function(n){e.$set(t,"immediate",n)},expression:"config.immediate"}})],1),t.hasWatch?n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数检测代码"}},[n("a-popover",{attrs:{title:"参数检测代码编辑",placement:"left",trigger:"click"}},[n("template",{slot:"content"},[n("smart-code-editor",{attrs:{code:e.code},model:{value:t.watchCode,callback:function(n){e.$set(t,"watchCode",n)},expression:"config.watchCode"}})],1),n("a-button",{attrs:{type:"link"}},[e._v("\n                设置\n              ")])],2)],1):e._e(),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"操作"}},[n("a-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",type:"primary",icon:"copy"},on:{click:function(t){return e.copyProp(a)}}},[e._v("\n              复制\n            ")]),n("a-popconfirm",{attrs:{placement:"topLeft",title:"是否确认删除该按钮？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.removeProp(a)}}},[n("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("\n                删除\n              ")])],1)],1)],1)]})],2)],1)],1)},L=[],S=n("788b"),_=n("80da"),P={key:"props",name:"入参参数",type:"String",default:"",required:!1,hasWatch:!0,immediate:!1,watchCode:"function(val) {\n  // 数据更改处理流程\n}"},D="panelProps",$={name:"GeneralPropsConfig",data:function(){return{panelActiveKey:"config_panel_0",moduleConfig:{metadata:{propConfigList:[]}}}},methods:{validateComplete:function(e){this.moduleConfig.metadata.propConfigList.length>0&&C["a"].$emit("validateComplete",{mark:this.moduleConfig.mark,err:e})},addProp:function(){this.moduleConfig.metadata.propConfigList.push(v.a.cloneDeep(P)),this.panelActiveKey="config_panel_".concat(this.moduleConfig.metadata.propConfigList.length-1)},autoAddProp:function(e){if(!e)return!1;var t=this.moduleConfig.metadata.propConfigList.find(function(t){return t.key===e.key});if(void 0!==t)return!1;this.moduleConfig.metadata.propConfigList.push(v.a.clone(e))},autoRemoveProp:function(e){if(!e||0===e.length)return!1;this.moduleConfig.metadata.propConfigList=this.moduleConfig.metadata.propConfigList.filter(function(t){return void 0!==t&&!e.includes(t.key)})},copyProp:function(e){var t=v.a.cloneDeep(this.moduleConfig.metadata.propConfigList[e]);this.moduleConfig.metadata.propConfigList.splice(e,0,t),this.panelActiveKey="config_panel_".concat(e+1)},removeProp:function(e){this.moduleConfig.metadata.propConfigList.splice(e,1),e>0?this.panelActiveKey="config_panel_".concat(e-1):this.moduleConfig.metadata.propConfigList.length>0&&(this.panelActiveKey="config_panel_".concat(0))},onModuleConfigChanged:function(e){var t=this;if(0===e.metadata.propConfigList.length)C["a"].$emit("autoRemoveModule_".concat(this.code),D);else{var n=this.$store.state[this.workspace][this.code].currentModule;C["a"].$emit("autoSetModuleConfig_".concat(this.code),{mark:D,moduleConfig:e,callback:function(e){e&&n&&e.uuid!==n.uuid&&C["a"].$emit("autoChangeCurrentModule_".concat(t.code),n)}})}},resetData:function(){console.log("general props config reset data")}},components:{smartCodeEditor:S["a"]},mixins:[_["a"]],props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""}},created:function(){var e=this;this.unwatch=this.$watch("moduleConfig",{handler:this.onModuleConfigChanged,deep:!0}),C["a"].$on("setGeneralPropsConfig_".concat(this.code),function(t){e.unwatch&&e.unwatch(),void 0!==t?e.moduleConfig=t:e.moduleConfig.metadata.propConfigList=[],e.unwatch=e.$watch("moduleConfig",{handler:e.onModuleConfigChanged,deep:!0})}),C["a"].$on("addGlobalProp",function(t){e.autoAddProp(t)}),C["a"].$on("removeGlobalProp",function(t){e.autoRemoveProp(t)})},destroyed:function(){C["a"].$off("setGeneralPropsConfig"),C["a"].$off("addGlobalProp"),C["a"].$off("removeGlobalProp")}},O=$,j=(n("d39e"),n("2877")),E=Object(j["a"])(O,x,L,!1,null,"63511a4c",null),I=E.exports,N={name:"CommonConfig",mixins:[k],methods:{resetData:function(){this.$refs.generalPropsConfig.resetData(),this.$refs.generalDataConfig.resetData()}},components:{generalDataConfig:w["a"],generalPropsConfig:I},props:{code:{type:String,default:""}}},R=N,A=(n("f014"),Object(j["a"])(R,p,m,!1,null,"541ff1e0",null)),F=A.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event-layout"},[n("a-form",{attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("入参配置")]),n("a-row",[n("a-col",{attrs:{spna:22}})],1)],1)],1)},V=[],G={name:"EventLayout",data:function(){return{}}},z=G,q=(n("5444"),Object(j["a"])(z,T,V,!1,null,"2e1342a2",null)),K=q.exports,J={name:"ConfigPage",data:function(){return{panelActiveKey:"config_1",showConfigPannel:!0,componentMap:{}}},methods:{removeCurrentModule:function(){this.$emit("removeCurrentModule")},loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("6ef5")("./".concat(e.mark,"/config.vue"))})},resetData:function(){this.$refs.commonConfigTab.resetData()}},watch:{currentModule:function(e){e.mark&&e.uuid&&this.loadModule(e)}},computed:Object(r["a"])({},Object(b["f"])({panelWidthType:function(e){return e.customProperties.designer.configPanelWidthType}}),Object(b["d"])(["designerConfigPanelWidth"]),{currentModule:function(){return this.$store.state.panelDesigner[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.panelDesigner[this.code].moduleConfigMap}}),components:{commonConfig:F,eventLayout:K},props:{code:{type:String,required:!0},projectType:{type:String,required:!0}},created:function(){var e=this;C["a"].$on("switchModuleConfigPanel_".concat(this.code),function(){e.panelActiveKey="config_1"})}},W=J,B=(n("11e7"),Object(j["a"])(W,d,f,!1,null,"38e2b6c4",null)),U=B.exports,Y=n("1248"),H=[{name:"业务组件",list:[{name:"树列表",icon:"align-left",mark:"treeList",unique:!0,multi:!1},{name:"树结构",icon:"apartment",mark:"treeStruct",unique:!0,multi:!1},{name:"通用列表",icon:"align-center",mark:"generalList",unique:!0,multi:!1},{name:"通用表单",icon:"form",mark:"generalForm",unique:!0,multi:!1},{name:"多行表单",icon:"ordered-list",mark:"multiForm",unique:!0,multi:!1},{name:"标签页",icon:"border-top",mark:"tabsPage",multi:!1},{name:"时间轴",icon:"clock-circle",mark:"timeline",unique:!0,multi:!1}]},{name:"基础组件",list:[{name:"间隔行",multi:!0,icon:"column-height",mark:"paddingc"},{name:"标题行",multi:!0,icon:"line-height",mark:"titleLine"},{name:"操作栏",multi:!0,icon:"control",mark:"operateLine"},{name:"布局器",multi:!0,icon:"layout",mark:"layoutc"}]},{name:"统计图表",list:[{name:"折线图",multi:!1,icon:"line-chart",mark:"statisticalChart",type:"lineChart"},{name:"柱状图",multi:!1,icon:"bar-chart",mark:"statisticalChart",type:"barChart"},{name:"饼图",multi:!1,icon:"pie-chart",mark:"statisticalChart",type:"pieChart"}]},{name:"面板集成",hidden:!0,list:[{name:"入参配置",icon:"login",mark:"panelProps",multi:!0},{name:"通用参数",icon:"code-sandbox",mark:"panelData",multi:!0}]},{name:"自定义组件",list:[{name:"面板组件",multi:!0,icon:"block",mark:"panelContainer"}]}],Q={treeList:["treeStruct","generalList","multiForm","generalForm","tabsPage","timeline","layoutc","statisticalChart"],treeStruct:["treeList","generalList","multiForm","generalForm","tabsPage","timeline","layoutc","statisticalChart"],generalList:["treeList","treeStruct","multiForm","generalForm","tabsPage","timeline","layoutc","statisticalChart"],multiForm:["treeList","treeStruct","generalList","generalForm","tabsPage","timeline","layoutc","statisticalChart"],generalForm:["treeList","treeStruct","generalList","multiForm","tabsPage","timeline","layoutc","statisticalChart"],tabsPage:["treeList","treeStruct","generalList","multiForm","generalForm","timeline","layoutc","statisticalChart"],timeline:["treeList","treeStruct","generalList","multiForm","generalForm","tabsPage","layoutc","statisticalChart"],layoutc:["treeList","treeStruct","generalList","multiForm","generalForm","timeline","statisticalChart"],statisticalChart:["treeList","treeStruct","generalList","multiForm","generalForm","tabsPage","timeline","layoutc"]},Z=["paddingc","titleLine","operateLine","layoutc","panelContainer"],X=function(e){if(!e||0===e.length)return[];var t=[];return e.forEach(function(e){if(!e.list||0===e.list.length)return!0;var n=e.list.map(function(t){var n=v.a.cloneDeep(t);return n.allName="".concat(e.name,"-").concat(t.name),n});t.push.apply(t,Object(g["a"])(n))}),t},ee=function(e){if(!e||0===e.length)return{};var t={};return e.forEach(function(e){if(!e.list||0===e.list.length)return!0;e.list.forEach(function(n){t[n.mark]={allName:"".concat(e.name,"-").concat(n.name),icon:n.icon,name:n.name,mark:n.mark}})}),t},te=Object(b["a"])("panelDesigner"),ne=te.mapState,ae=te.mapMutations,ie={name:"PanelDesigner",data:function(){return{validateSumCounter:0,validateStartComplete:!1,deepIdList:[],sourceList:H,targetList:[],sidebarState:{left:!0,right:!0},allowDrag:!0,notAllowDragMsg:""}},methods:Object(r["a"])({},ae(["resetDesigner","updateConfigMap","initValidateInfo","startValidateModule","updateCurrentModule","optimizeConfigMap"]),{moveDrag:function(e,t){var n=e.relatedContext.component.$vnode.data.attrs["container"],a=e.draggedContext.element;if("root"===n){var i=Q[a.mark];if(i){var r=this.targetList.find(function(e){return i.includes(e.mark)});if(r)return this.notAllowDragMsg="工作区存在互斥组件，请使用面板组件处理！",this.allowDrag=!1,!1}if(!a.multi){var o=this.targetList.filter(function(e){return e.mark===a.mark});if(o.length>0)return this.notAllowDragMsg="当前组件不允许重复添加，请使用面板组件处理！",this.allowDrag=!1,!1}return!0}return!("component"===n&&!Z.includes(a.mark))||(this.notAllowDragMsg="当前容器只允许添加基础组件或面板组件！",this.allowDrag=!1,!1)},endDrag:function(){this.allowDrag||this.$message.error(this.notAllowDragMsg),this.allowDrag=!0,this.notAllowDragMsg=""},toggleSidebar:function(e){this.sidebarState[e]=!this.sidebarState[e]},reset:function(){this.targetList=[],this.resetDesigner(),this.$refs.workPanel.clearAllModuleList()},resetData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.moduleList,a=t.configMap,this.reset(),e.next=4,this.setData({moduleList:n,configMap:a});case 4:this.$refs.configPage.resetData();case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.moduleList,a=t.configMap,this.updateConfigMap({key:this.code,configMap:a}),!(n&&n.length>0)){e.next=11;break}i=0;case 4:if(!(i<n.length)){e.next=11;break}return r=n[i],e.next=8,this.$refs.workPanel.addModuleObj(r,i);case 8:i++,e.next=4;break;case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validate:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.validateSumCounter=0,this.validateStartComplete=!1,console.log("start designer validate"),this.initValidateInfo(),this.deepIdList=[],console.log("start designer validate moduleList",this.targetList),e.next=8,this.validateModuleList(this.targetList);case 8:this.validateStartComplete=!0;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),validateModuleList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a,i,r,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=!0,a=!1,i=void 0,e.prev=3,r=t[Symbol.iterator]();case 5:if(n=(o=r.next()).done){e.next=12;break}return s=o.value,e.next=9,this.validateModule(s);case 9:n=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),a=!0,i=e.t0;case 18:e.prev=18,e.prev=19,n||null==r.return||r.return();case 21:if(e.prev=21,!a){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,this,[[3,14,18,26],[19,,21,25]])}));function t(t){return e.apply(this,arguments)}return t}(),validateModule:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a,i,r,o,s,l,c,u,d,f,p,m,g,h,v,b,C;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.mark,a=t.uuid,this.deepIdList.push(a),e.next=4,this.sleep(200);case 4:if(console.log("validateModule",t),this.startValidateModule({uuid:a}),this.validateSumCounter++,void 0!==n){e.next=9;break}return e.abrupt("return",!1);case 9:if(i=this.configMap[a],"layoutc"!==n){e.next=42;break}r=i.metadata.colList,o=!0,s=!1,l=void 0,e.prev=15,c=r[Symbol.iterator]();case 17:if(o=(u=c.next()).done){e.next=26;break}if(d=u.value,f=d.moduleList,!(f&&f.length>0)){e.next=23;break}return e.next=23,this.validateModuleList(f);case 23:o=!0,e.next=17;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](15),s=!0,l=e.t0;case 32:e.prev=32,e.prev=33,o||null==c.return||c.return();case 35:if(e.prev=35,!s){e.next=38;break}throw l;case 38:return e.finish(35);case 39:return e.finish(32);case 40:e.next=73;break;case 42:if("tabsPage"!==n){e.next=73;break}if(p=i.metadata.tabs,!(p&&p.length>0)){e.next=73;break}m=!0,g=!1,h=void 0,e.prev=48,v=p[Symbol.iterator]();case 50:if(m=(b=v.next()).done){e.next=59;break}if(C=b.value,f=C.moduleList,!(f&&f.length>0)){e.next=56;break}return e.next=56,this.validateModuleList(f);case 56:m=!0,e.next=50;break;case 59:e.next=65;break;case 61:e.prev=61,e.t1=e["catch"](48),g=!0,h=e.t1;case 65:e.prev=65,e.prev=66,m||null==v.return||v.return();case 68:if(e.prev=68,!g){e.next=71;break}throw h;case 71:return e.finish(68);case 72:return e.finish(65);case 73:case"end":return e.stop()}},e,this,[[15,28,32,40],[33,,35,39],[48,61,65,73],[66,,68,72]])}));function t(t){return e.apply(this,arguments)}return t}(),sleep:function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},validateSuccess:function(){var e=this.deepIdList;this.optimizeConfigMap({idList:e}),this.$emit("validateSuccess")},validateFailed:function(e){var t=e.pop();console.log("failedId",t);var n="default";"globalFormConfig"===t?this.updateCurrentModule({key:n,module:{}}):this.updateCurrentModule({key:n,module:{uuid:t}}),this.$emit("validateFailed")},validateConfigMap:function(){var e=this;return new Promise(function(t,n){var a=e.$store.state.panelDesigner[e.code].moduleConfigMap,i=[];if(v.a.forEach(a,function(e){i.push(e.mark)}),0===i.length)return t(),!1;var r=X(H),o=[];if(r.forEach(function(e){if(!0!==e.unique)return!0;var t=i.filter(function(t){return e.mark===t});t.length>1&&o.push(e.allName)}),0===o.length)return t(),!1;n(new Error("".concat(o.join("、")," 组件重复，请保持当前页面只有一个相同组件")))})}}),computed:Object(r["a"])({},ne({validateInfo:function(e){return e.validateInfo}}),{currentModule:function(){return this.$store.state.panelDesigner[this.code].currentModule},configMap:function(){return this.$store.state.panelDesigner[this.code].moduleConfigMap}}),watch:{targetList:function(e,t){1!==t.length||2!==e.length||e[0].uuid||(e[0]=t[0]),this.$emit("change",e)},"validateInfo.counter":function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sleep(100);case 2:if(0!==t&&this.validateStartComplete){e.next=4;break}return e.abrupt("return",!1);case 4:t===this.validateSumCounter&&(n=this.validateInfo.failedIdList,0===n.length?this.validateSuccess():this.validateFailed(n));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},components:{draggable:u.a,"work-panel":Y["a"],"config-page":U},props:{code:{type:String,required:!0},projectType:{type:String,required:!0},initModuleMarkList:{type:Array,required:!1,default:void 0}},mounted:function(){this.$nextTick(Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.initModuleMarkList){e.next=9;break}t=0;case 2:if(!(t<this.initModuleMarkList.length)){e.next=9;break}return n=this.initModuleMarkList[t],e.next=6,this.$refs.workPanel.addModuleObj({mark:n},t);case 6:t++,e.next=2;break;case 9:case"end":return e.stop()}},e,this)})))},created:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}}},re=ie,oe=(n("d11e"),Object(j["a"])(re,s,l,!1,null,"4770054c",null)),se=oe.exports,le=n("3aa3"),ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dir-selector"},[n("a-alert",{attrs:{message:"当前目录："+e.value,type:"success"}}),n("div",{staticClass:"tree-container"},[e.dirTree.length>0?n("a-directory-tree",{attrs:{"tree-data":e.dirTree,"replace-fields":{title:"name",key:"relativePath"},multiple:"","default-expand-all":""},on:{select:e.onTreeSelected}}):e._e()],1)],1)},ue=[],de={name:"DirSelector",data:function(){return{dirTree:[]}},methods:{initDirList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le["a"].get("/diboot/devtools/pnds/drls");case 2:t=e.sent,0===t.code&&(this.dirTree=t.data);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onTreeSelected:function(e,t){var n=t.node;e.length>0&&this.$emit("change",e[0]),n.$children.length<=1&&this.$emit("complete",e[0])}},created:function(){this.initDirList()},model:{prop:"value",event:"change"},props:{value:{type:String,default:""}}},fe=de,pe=(n("868f"),Object(j["a"])(fe,ce,ue,!1,null,null,null)),me=pe.exports,ge={methods:{getPanelMethods:function(){var e=[],t=this.$store.state.panelDesigner.default.moduleConfigMap;return v.a.forEach(t,function(t){t.scriptConfig&&t.scriptConfig.methods&&t.scriptConfig.methods.length>0&&e.push.apply(e,Object(g["a"])(t.scriptConfig.methods))}),e}}},he=(n("456d"),{data:function(){return{sumCount:0,completeCount:0,workspace:"panelDesigner",notifyKey:"validateNotify",errs:[]}},methods:{startGlobalValidate:function(){this.sumCount=0,this.completeCount=0,this.errs=[];var e={};try{e=this.$store.state.panelDesigner.default.moduleConfigMap}catch(t){this.state.loading=!1,console.log("获取所有配置项出错",t)}if(this.sumCount=Object.keys(e).length,0===this.sumCount)return this.state.loading=!1,!1;C["a"].$emit("startConfigValidate")},completeGlobalValidate:function(){if(0===this.errs.length)return this.showNotification("校验完成","组件配置成功，正在提交..."),this.globalValidateSuccess(),!1;var e={};"panelDesigner"===this.workspace&&(e=ee(H));var t="";this.errs.forEach(function(n){var a=e[n.mark];n.mark&&a&&(t+='<p style="font-weight: bold; color: #666; margin: 0;">'.concat(a.allName,'</p><p style="color: #f9686c; margin: 0;">').concat(n.err,"</p>"))}),this.showNotification("配置错误提示：",t,!0),console.log("校验完成",this.errs),this.state.loading=!1},validateComplete:function(e,t){this.completeCount++,this.showNotification("配置校验中...","正在校验第 ".concat(this.completeCount," 个组件配置！")),t&&this.errs.push({mark:e,err:t}),this.completeCount===this.sumCount&&this.completeGlobalValidate()},globalValidateSuccess:function(){},showNotification:function(e,t,n){var a,i=this,r=this;n&&(a=function(e){return e("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return i.$notification.close(r.notifyKey)}}},"关闭")}),this.$notification.open({key:r.notifyKey,message:e,btn:a,description:function(e){return e("div",{domProps:{innerHTML:t}})}})}},created:function(){var e=this;C["a"].$on("validateComplete",function(t){var n=t.mark,a=t.err;e.validateComplete(n,a)})},destroyed:function(){C["a"].$off("validateComplete")}}),ve=n("fa62"),be=Object(b["a"])("panelDesigner"),Ce=be.mapState,ye=be.mapMutations,Me={data:function(){return{}},methods:Object(r["a"])({},ye(["updateConfigMap","addAbstractStrategys"]),{abstractPanelChanged:function(e){var t=e.id,n=e.panelName,a=e.panelCode,i=e.dirPath,r=e.fileName,o=e.configData;this.panelInfo.id=t,this.panelInfo.name=n,this.panelInfo.code=a,this.panelInfo.dirPath=i,this.panelInfo.fileName=r;var s=JSON.parse(o),l=s.moduleList,c=s.preview,u=s.abstractStrategys,d=s.default.moduleConfigMap,f=c.moduleConfigMap;this.$refs["pc_designer_".concat(this.pane.code)].resetData({moduleList:l,configMap:d}),this.updateConfigMap({key:"preview",configMap:f}),this.$store.commit("panelDesigner/setAbstractPanel",!0),this.addAbstractStrategys(u)},saveAbstractPanel:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a,i,r,o,s,l,c,u,d,f,p,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.getDeDuplicationStrategys(),n={default:v.a.cloneDeep(this.$store.state.panelDesigner.default),moduleList:this.moduleListMap.default,preview:v.a.cloneDeep(this.$store.state.panelDesigner.preview),abstractStrategys:v.a.cloneDeep(t)},a=JSON.stringify(n),i=this.panelInfo,r=i.id,o=i.name,s=i.code,l=i.dirPath,c=i.fileName,u=i.paramData,d=i.eventData,f=i.methodsData,p={panelId:r,name:o,code:s,dirPath:l,fileName:c,config:a,paramData:u,eventData:d,methodsData:f},this.submitStatus.loading=!0,this.submitStatus.text="策略保存中...",e.next=9,le["a"].post("/diboot/devtools/pnds/svastpn",p);case 9:m=e.sent,this.submitStatus.loading=!1,this.submitStatus.text="",0===m.code?this.$notification.success({message:"策略保存成功",description:"策略保存成功"}):this.$message.error("策略保存失败");case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getDeDuplicationStrategys:function(){var e=this.abstractStrategys;if(!e||0===e.length)return[];var t=this.configMap;return e.filter(function(e){var n=e.uuid;return void 0!==t[n]})}}),computed:Object(r["a"])({},Ce({abstractPanel:function(e){return e.abstractPanel},abstractStrategys:function(e){return e.abstractStrategys},configMap:function(e){return e.default.moduleConfigMap}}))},ke=n("3e16"),we=n("2abb"),xe={name:"PanelDesignerIndex",data:function(){return{pane:{code:"default"},searchVal:"",panelPopVisible:!1,dirSelectorPopover:!1,subscribeSuccess:!1,projectType:"",panelList:[],panelInfo:{id:void 0,name:"",code:"",dirPath:"src/views/panel",fileName:"",eventData:"",paramData:"",methodsData:""},isDevEnv:!1,panelInfoRules:{name:[{required:!0,message:"请填写面板名称",trigger:"blur"},{validator:this.checkPanelNameDuplicate,trigger:"blur"}],code:[{required:!0,message:"请填写面板编码",trigger:"blur"},{validator:this.checkPanelCodeValid,trigger:"blur"},{validator:this.checkPanelCodeDuplicate,trigger:"blur"}]},moduleListMap:{},submitStatus:{loading:!1,text:""},state:{loading:!1}}},methods:{addModule:function(e){},removeModule:function(e){e.m,e.targetList},moduleListChanged:function(e,t){this.moduleListMap[e]=t},beforeGenerate:function(e){this.submitStatus.loading=!0,this.submitStatus.text="处理中...",C["a"].$emit("collectPanelEvents",e)},generate:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.submitStatus.loading=!0,this.submitStatus.text="校验中...",console.log("开始校验..."),e.next=5,this.validate();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onValidateSuccess:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a,i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("validate success"),this.submitStatus.loading=!0,this.submitStatus.text="代码生成中...",t=v.a.cloneDeep(this.$store.state.panelDesigner.default),t.moduleList=this.moduleListMap.default,n=JSON.stringify(t),a=this.panelInfo.id,i={config:n,panelId:this.panelInfo.id,name:this.panelInfo.name,code:this.panelInfo.code,dirPath:this.panelInfo.dirPath,fileName:this.panelInfo.fileName,paramData:this.panelInfo.paramData,eventData:this.panelInfo.eventData,methodsData:this.panelInfo.methodsData},this.attachMainTableMap(t,i),le["a"].post("/diboot/devtools/pnds/gn",i).then(function(e){if(r.submitStatus.loading=!1,r.submitStatus.text="",0===e.code){var t="pop_".concat(Date.now());r.$notification.destroy(),r.$notification.success({message:"生成面板成功",description:"代码生成成功 (稍后将完成自动格式化)",duration:0,btn:function(e){return e("a-button",{props:{type:"primary",size:"small"},on:{click:function(){r.$notification.close(t),r.reset()}}},"确认")},key:t}),r.$emit("complete",e.data.id),r.initPanelList().then(function(){r.panelInfo.id=e.data.id}),window!==top&&parent.panelIframeComplete&&parent.panelIframeComplete({panelId:e.data.id,operateName:a===e.data.id?"编辑":"添加"})}}).catch(function(){r.submitStatus.loading=!1,r.submitStatus.text=""});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onValidateFailed:function(){this.submitStatus.loading=!1,this.submitStatus.text=""},attachMainTableMap:function(e,t){if(e.moduleList&&0!==e.moduleList.length&&e.moduleConfigMap){var n={};e.moduleList.forEach(function(t){"treeList"===t.mark&&(n[t.mark]=e.moduleConfigMap[t.uuid].metadata.treeTable)}),t.mainTableMap=JSON.stringify(n)}},validate:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateForm();case 3:return t=this.$refs.pc_designer_default,e.next=6,t.validate();case 6:e.next=13;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("面板页面校验出错",e.t0),this.submitStatus.loading=!1,this.submitStatus.text="";case 13:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),validateForm:function(){var e=this;return new Promise(function(t,n){e.$refs.panelInfoForm.validate(function(e){e?t():n(new Error("请完善表单项"))})})},getPanelParamData:function(){var e=this.moduleListMap.default;if(!e||0===e.length)return"";var t=e.find(function(e){return"panelProps"===e.mark});if(void 0===t||!t.uuid)return"";var n=this.$store.state.panelDesigner.default.moduleConfigMap[t.uuid];if(void 0===n)return"";var a=n.metadata.propConfigList;return JSON.stringify(a)},checkPanelNameDuplicate:function(e,t,n){if(t){var a={id:this.panelInfo.id,panelName:t};le["a"].get("/diboot/devtools/pnds/chknmdup",a).then(function(e){0===e.code?n():n(new Error(e.msg.split(":")[1]))}).catch(function(e){n(new Error(e))})}else n()},checkPanelCodeValid:function(e,t,n){if(t){var a=/([A-Za-z])([a-z0-9]+)$/;a.test(t)?n():n(new Error("请使用驼峰命名法进行命名"))}else n()},checkPanelCodeDuplicate:function(e,t,n){if(t){var a={id:this.panelInfo.id,panelCode:t};le["a"].get("/diboot/devtools/pnds/chkcddup",a).then(function(e){0===e.code?n():n(new Error(e.msg.split(":")[1]))}).catch(function(e){n(new Error(e))})}else n()},initPanelList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,le["a"].get("/diboot/devtools/pnds/pnls");case 2:t=e.sent,0===t.code&&(this.panelList=t.data);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onPanelChanged:function(e){var t=this.panelList.find(function(t){return t.id===e});if(void 0!==t){var n=t.projectType;"ABSTRACT_PANEL"!==n?(this.panelInfo.id=t.id,this.panelInfo.name=t.panelName,this.panelInfo.code=t.panelCode,this.panelInfo.dirPath=t.dirPath,this.panelInfo.fileName=t.panelCode,this.panelPopVisible=!1,this.resetDesignerConfig(t.configData)):this.abstractPanelChanged(t)}},resetDesignerConfig:function(e){if(e){var t=JSON.parse(e),n=v.a.cloneDeep(t.moduleList),a=t.moduleConfigMap;this.$refs["pc_designer_".concat(this.pane.code)].resetData({moduleList:n,configMap:a})}},getProjectType:function(){var e=this;le["a"].getWithoutMsg("/diboot/devtools/pcds/pt").then(function(t){0===t.code?e.projectType=t.data:e.$notification.warning({message:"前端配置提示",description:t.msg&&t.msg.includes(":")?t.msg.split(":")[1]:t.msg})})},onPanelSearch:function(e){this.searchVal=e},removePanel:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.id,a=this,n){e.next=5;break}return this.$message.warning("参数错误"),e.abrupt("return",!1);case 5:this.$confirm({title:"面板删除提示",content:"该面板「".concat(t.panelName," [").concat(t.panelCode,"]」删除后可能导致引用该面板的配置区出错，请谨慎操作！"),onOk:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.panelPopVisible=!0,e.next=3,we["a"].post("/diboot/devtools/pnds/rm/".concat(n));case 3:t=e.sent,0===t.code?(a.$message.success("删除成功"),a.initPanelList()):a.$message.warning(t.msg);case 5:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),onCancel:function(){a.panelPopVisible=!0}});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),reset:function(){window.location.reload()},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},computed:Object(r["a"])({},Object(b["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign}}),{abstractPanel:{get:function(){return this.$store.state.panelDesigner.abstractPanel},set:function(e){this.$store.commit("panelDesigner/setAbstractPanel",e)}},validPanelList:function(){var e=this.searchVal,t=this.panelList;return e?t.filter(function(t){return t.panelName.includes(e)||t.panelCode.includes(e)}):t}}),components:{designer:se,dirSelector:me,nonePermissionModal:ve["a"]},mixins:[ge,he,Me,ke["a"]],created:function(){var e=this;this.initPanelList(),this.getProjectType(),this.$store.commit("INIT_DESINGER_CONFIG"),C["a"].$on("collectPanelEventsComplete",function(t){var n=t.emitEventList,a=t.type;if(["generate","saveAbstractPanel"].includes(a)){var i=JSON.stringify(n);e.panelInfo.eventData=i;var r=e.getPanelParamData();e.panelInfo.paramData=r,e.panelInfo.methodsData=JSON.stringify(e.getPanelMethods()),e[a]()}})},destroyed:function(){C["a"].$off("collectPanelEventsComplete")}},Le=xe,Se=(n("f03b"),Object(j["a"])(Le,a,i,!1,null,"60ec0ec2",null));t["default"]=Se.exports},aa9e:function(e,t,n){},ac4d:function(e,t,n){n("3a72")("asyncIterator")},af5f:function(e,t,n){},d11e:function(e,t,n){"use strict";var a=n("aa9e"),i=n.n(a);i.a},d39e:function(e,t,n){"use strict";var a=n("e701"),i=n.n(a);i.a},d4c0:function(e,t,n){var a=n("0d58"),i=n("2621"),r=n("52a7");e.exports=function(e){var t=a(e),n=i.f;if(n){var o,s=n(e),l=r.f,c=0;while(s.length>c)l.call(e,o=s[c++])&&t.push(o)}return t}},df32:function(e,t,n){},e701:function(e,t,n){},efd6:function(e,t,n){},f014:function(e,t,n){"use strict";var a=n("6831"),i=n.n(a);i.a},f03b:function(e,t,n){"use strict";var a=n("df32"),i=n.n(a);i.a}}]);