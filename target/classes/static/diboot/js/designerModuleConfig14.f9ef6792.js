(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig14","metadata14"],{"42d3":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form-model",{ref:"form",attrs:{layout:"horizontal",rules:e.rules,"label-col":{span:6},"wrapper-col":{span:18},model:e.moduleConfig.metadata}},[a("a-form-model-item",{attrs:{label:"树实体",prop:"treeTable"}},[e.treeTables.length>0?[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择树结构实体"},on:{change:function(t){return e.treeTalbeNameChanged(t)}},model:{value:e.moduleConfig.metadata.treeTable.tableName,callback:function(t){e.$set(e.moduleConfig.metadata.treeTable,"tableName",t)},expression:"moduleConfig.metadata.treeTable.tableName"}},e._l(e.treeTables,function(t,l){return a("a-select-option",{key:l,attrs:{value:t.tableName}},[e._v("\n          "+e._s(t.objName)+" ["+e._s(t.tableName)+"]\n        ")])}),1)]:a("span",[e._v("\n      没有符合条件的树实体可选\n    ")])],2),a("a-form-model-item",{attrs:{label:"树字段",prop:"treeShowFieldName"}},[e.treeColumns.length>0?[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择树结构展示字段"},model:{value:e.moduleConfig.metadata.treeShowFieldName,callback:function(t){e.$set(e.moduleConfig.metadata,"treeShowFieldName",t)},expression:"moduleConfig.metadata.treeShowFieldName"}},e._l(e.treeColumns,function(t,l){return a("a-select-option",{key:l,attrs:{value:t.fieldName}},[e._v("\n          "+e._s(t.fieldLabel)+" ["+e._s(t.fieldName)+"]\n        ")])}),1)]:a("span",[e._v("\n      没有符合条件的树字段列表可选\n    ")])],2),a("a-form-model-item",{attrs:{label:"列表实体",prop:"listTable"}},[e.listTables.length>0?[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择列表实体"},on:{change:function(t){return e.listTableNameChanged(t)}},model:{value:e.moduleConfig.metadata.listTable.tableName,callback:function(t){e.$set(e.moduleConfig.metadata.listTable,"tableName",t)},expression:"moduleConfig.metadata.listTable.tableName"}},e._l(e.listTables,function(t,l){return a("a-select-option",{key:l,attrs:{value:t.tableName}},[e._v("\n          "+e._s(t.objName)+" ["+e._s(t.tableName)+"]\n        ")])}),1)]:a("span",[e._v("\n      没有符合条件的列表实体可选\n    ")])],2),a("a-form-model-item",{attrs:{label:"列表选中"}},[a("a-radio-group",{attrs:{"default-value":"NONE","button-style":"solid"},model:{value:e.moduleConfig.metadata.rowSelection,callback:function(t){e.$set(e.moduleConfig.metadata,"rowSelection",t)},expression:"moduleConfig.metadata.rowSelection"}},[a("a-radio-button",{attrs:{value:"NONE"}},[e._v("\n        无\n      ")]),a("a-radio-button",{attrs:{value:"SINGLE_SELECT"}},[e._v("\n        单选\n      ")]),a("a-radio-button",{attrs:{value:"MULTI_SELECT"}},[e._v("\n        多选\n      ")])],1)],1),e.listColumns.length>0&&e.moduleConfig.metadata.showSearch?a("column-list-selector-plus",{ref:"searchColumnSelector",attrs:{"is-expand":!1,"init-columns":e.listColumns,"valid-columns-filter":e.validSearchColumnsFilter,"auto-setter-col-filter":e.autoSetterColFilter,"need-ref-entity":!1,title:"搜索字段配置"},on:{change:function(t){e.moduleConfig.metadata.searchColumns=e._.cloneDeep(t)}}}):e._e(),e.listColumns.length>0?a("column-list-selector-plus",{ref:"listColumnSelector",attrs:{title:"列表字段配置","is-expand":!1,"init-columns":e.listColumns,"valid-columns-filter":e.validListColumnsFilter,"auto-setter-col-filter":e.autoSetterColFilter,"vo-type":"ListVO"},on:{change:function(t){e.moduleConfig.metadata.listColumns=e._.cloneDeep(t)}}}):e._e()],1)},o=[],n=(a("ac6a"),a("96cf"),a("3b8d")),i=(a("7514"),a("7f57")),r=a("4047"),s=a("3aa3"),u=a("2ef0"),m=a.n(u),c={name:"TreeListConfig",data:function(){return{treeTables:[],listTables:[],treeColumns:[],listColumns:[],rules:{treeTable:[{required:!0,message:"请选择树结构实体",trigger:"blur"}],treeShowFieldName:[{required:!0,message:"请选择树结构展示字段",trigger:"blur"}],listTable:[{required:!0,message:"请选择列表实体",trigger:"blur"}]}}},methods:{treeTalbeNameChanged:function(e,t){var a=this,l=this.treeTables.find(function(t){return t.tableName===e});this.listTables=[],this.moduleConfig.metadata.treeTable=m.a.cloneDeep(l),this.getTreeColumns(e),this.$nextTick(function(){}),setTimeout(function(){if(a.listTables=l.children,a.listTables.length>0){var e=a.moduleConfig.metadata.listTable;t&&e&&e.tableName?a.listTableNameChanged(e.tableName,!0):a.listTableNameChanged(a.listTables[a.listTables.length-1]["tableName"],t)}},200)},listTableNameChanged:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=this.listTables.find(function(e){return e.tableName===t}),this.moduleConfig.metadata.listTable=m.a.cloneDeep(l),e.next=4,this.getListColumns(t,a);case 4:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),getTreeColumns:function(e,t){var a=this;this.treeColumns=[],s["a"].get("/diboot/devtools/db/cols/".concat(e)).then(function(e){0===e.code&&(a.treeColumns=e.data,a.moduleConfig.metadata.treeShowFieldName=a.getSmartTreeShowFieldName())})},getListColumns:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var l,o,n,i,r,u,m,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=this,this.listColumns=[],e.next=4,s["a"].get("/diboot/devtools/db/cols/".concat(t));case 4:o=e.sent,0===o.code&&(o.data.forEach(function(e){e.columnExt||(e.columnExt={})}),this.listColumns=o.data,n=l.moduleConfig.metadata,i=n.searchColumns,r=n.listColumns,u=n.treeTable,a&&i.length>0&&r.length>0?l.$nextTick(function(){var e=l.$refs.listColumnSelector;e&&e.setResultColumns(r);var t=l.$refs.searchColumnSelector;t&&t.setResultColumns(i)}):(l.moduleConfig.metadata.searchColumns=[],l.moduleConfig.metadata.listColumns=[]),m=o.data,m&&m.length>0&&u&&u.tableName&&(c=m.find(function(e){return e.columnExt&&e.columnExt.refTable===u.tableName}),void 0!==c&&(this.moduleConfig.metadata.listQueryColumn=c)));case 6:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),getSmartTreeShowFieldName:function(){if(0===this.treeColumns.length)return"";var e=this.treeColumns.find(function(e){return e.columnExt&&"T"===e.columnExt.refType&&e.columnExt.refTable===e.tableName&&e.columnExt.asColumn});if(void 0===e)return"";var t=this.treeColumns.find(function(t){return t.colName===e.columnExt.asColumn});return void 0===t?"":t.fieldName},validSearchColumnsFilter:function(e){return"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&"S_FILE_UPLOAD"!==e.columnExt.formType&&"M_FILE_UPLOAD"!==e.columnExt.formType&&"S_IMG_UPLOAD"!==e.columnExt.formType&&"M_IMG_UPLOAD"!==e.columnExt.formType&&"RICH_EDITOR"!==e.columnExt.formType},validListColumnsFilter:function(e){return"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&"S_FILE_UPLOAD"!==e.columnExt.formType&&"M_FILE_UPLOAD"!==e.columnExt.formType&&"S_IMG_UPLOAD"!==e.columnExt.formType&&"M_IMG_UPLOAD"!==e.columnExt.formType&&"RICH_EDITOR"!==e.columnExt.formType&&!e.columnExt.refType},autoSetterColFilter:function(e){return!0!==e.primaryKey&&"tenantId"!==e.fieldName},getValidateMsg:function(){return"配置尚未完成"}},mixins:[i["a"]],components:{columnListSelectorPlus:r["a"]},created:function(){var e=this;s["a"].get("/diboot/devtools/db/trlsttbls").then(function(t){if(0===t.code&&(e.treeTables=t.data.filter(function(e){return e.editable}),e.treeTables.length>0)){var a=e.moduleConfig.metadata.treeTable;a&&a.tableName?e.treeTalbeNameChanged(a.tableName,!0):e.treeTalbeNameChanged(e.treeTables[0].tableName,!0)}})}},d=c,f=(a("e1ae"),a("2877")),h=Object(f["a"])(d,l,o,!1,null,"5b3a3bde",null);t["default"]=h.exports},"47ac":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",[a("h3",{staticClass:"title"},[e._v("\n    是否排序\n        \n    "),a("a-switch",{attrs:{size:"small",checkedChildren:"是",unCheckedChildren:"否"},model:{value:e.moduleConfig.metadata.reverse.showReverseBtn,callback:function(t){e.$set(e.moduleConfig.metadata.reverse,"showReverseBtn",t)},expression:"moduleConfig.metadata.reverse.showReverseBtn"}})],1),a("a-form-item",{attrs:{label:"展现方式"}},[a("a-radio-group",{on:{change:e.handleMode},model:{value:e.moduleConfig.metadata.mode,callback:function(t){e.$set(e.moduleConfig.metadata,"mode",t)},expression:"moduleConfig.metadata.mode"}},[a("a-radio",{attrs:{value:"left"}},[e._v("左侧")]),a("a-radio",{attrs:{value:"alternate"}},[e._v("混合")]),a("a-radio",{attrs:{value:"right"}},[e._v("右侧")])],1)],1),a("a-form-item",{attrs:{label:"当前节点"}},[a("a-input",{attrs:{placeholder:"当前节点(若无,则不填)"},model:{value:e.moduleConfig.metadata.pending.ctx,callback:function(t){e.$set(e.moduleConfig.metadata.pending,"ctx",t)},expression:"moduleConfig.metadata.pending.ctx"}})],1),a("a-form-item",{attrs:{label:"子项配置"}},[e.moduleConfig.metadata.timelineList.length>0?a("a-collapse",{attrs:{bordered:!1}},e._l(e.moduleConfig.metadata.timelineList,function(t,l){return a("a-collapse-panel",{key:l},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.text))]),a("a-button",{staticClass:"remove",attrs:{type:"danger",shape:"circle",size:"small",icon:"minus"},on:{click:function(t){return e.removeItem(t,l)}}})],1),a("a-row",[a("a-col",{attrs:{span:"6"}},[e._v("轴点颜色")]),a("a-col",{attrs:{span:"18"}},[a("div",{staticStyle:{height:"20px"}},e._l(e.colorList,function(o,n){return a("a-tooltip",{key:n,staticClass:"colorBlock"},[a("template",{slot:"title"},[e._v("\n                  "+e._s(o.key)+"\n                ")]),a("a-tag",{attrs:{color:o.color},on:{click:function(t){return e.changeColor(o.color,l)}}},[o.color===t.color?a("a-icon",{attrs:{type:"check"}}):e._e()],1)],2)}),1)])],1),a("a-row",[a("a-col",{attrs:{span:"6"}},[e._v("轴点图标")]),a("a-col",{staticStyle:{position:"relative"},attrs:{span:"18"}},[a("a-select",{attrs:{defaultValue:t.dot.type},on:{change:function(t){return e.chooseIcon(t,l)}}},[a("a-select-option",{attrs:{value:""}},[e._v("轴点图标(若无,则不选)")]),e._l(e.iconList,function(e,t){return a("a-select-option",{key:t,attrs:{value:e}},[a("a-icon",{attrs:{type:e}})],1)})],2)],1)],1),a("a-row",[a("a-col",{attrs:{span:"6"}},[e._v("内容描述")]),a("a-col",{attrs:{span:"18"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"subItem.text"}],staticClass:"content",staticStyle:{width:"100%"},attrs:{rows:"3"},domProps:{value:t.text},on:{input:function(a){a.target.composing||e.$set(t,"text",a.target.value)}}})])],1),a("a-row",[a("a-col",{attrs:{span:"6"}},[e._v("时间")]),a("a-col",{attrs:{span:"18"}},[a("a-date-picker",{attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"选择时间"},on:{change:function(t,a){return e.onChange(t,a,l)},ok:function(t){return e.onOk()}},model:{value:t.datetime,callback:function(a){e.$set(t,"datetime",a)},expression:"subItem.datetime"}})],1)],1)],1)}),1):e._e(),a("a-row",[a("a-col",{attrs:{span:"3"}}),a("a-col",{attrs:{span:"10"}},[a("p",[a("a",{staticClass:"addItem",attrs:{href:"javascript:;"},on:{click:e.addItem}},[e._v("\n            添加子项\n          ")])])])],1)],1)],1)},o=[],n=a("e5b5"),i=a("a778"),r=[{key:"蓝色",color:"blue"},{key:"红色",color:"red"},{key:"绿色",color:"green"}],s=["clock-circle-o","pause-circle","close-circle","check-circle","issues-close","stop","exclamation-circle","warning","zoom-in","delete","redo","undo","search","reload","loading","environment","like","dislike"],u={name:"TimeLine",data:function(){return{metadata:i["default"],colorList:r,iconList:s}},mixins:[n["a"]],methods:{handleMode:function(e){this.moduleConfig.metadata.mode=e.target.value},changeColor:function(e,t){this.moduleConfig.metadata.timelineList[t].color=e},chooseIcon:function(e,t){this.moduleConfig.metadata.timelineList[t].dot.type=e},onChange:function(e,t){},onOk:function(e){},removeItem:function(e,t){e.stopPropagation(),this.moduleConfig.metadata.timelineList.splice(t,1)},addItem:function(){this.moduleConfig.metadata.timelineList.push({text:"时间轴",datetime:null,color:"blue",dot:{type:""}})}}},m=u,c=(a("d98f"),a("2877")),d=Object(c["a"])(m,l,o,!1,null,"3025b580",null);t["default"]=d.exports},a778:function(e,t,a){"use strict";a.r(t),t["default"]={metadata:{mode:"left",pending:{ctx:""},reverse:{status:!0,showReverseBtn:!1},timelineList:[{text:"时间轴",datetime:null,color:"blue",dot:{type:""}}]}}},d98f:function(e,t,a){"use strict";var l=a("db2a"),o=a.n(l);o.a},db2a:function(e,t,a){},deae:function(e,t,a){},e1ae:function(e,t,a){"use strict";var l=a("deae"),o=a.n(l);o.a}}]);