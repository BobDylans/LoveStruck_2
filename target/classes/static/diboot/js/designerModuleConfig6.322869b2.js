(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig6"],{"0ef2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panelContainerConfig"},[n("panel-container-config",{ref:"panelContainerConfig",attrs:{"project-type":e.projectType,code:e.code},model:{value:e.moduleConfig,callback:function(t){e.moduleConfig=t},expression:"moduleConfig"}})],1)},i=[],r=n("7f57"),o=n("2328"),c={name:"PanelContainerConfig",components:{panelContainerConfig:o["a"]},methods:{startConfigValidate:function(e){var t=this;this.$refs.panelContainerConfig.validate().then(function(n){n?e(t.collectErrMsg(n)):e()})},customValidate:function(){var e=this;return new Promise(function(t){e.$refs.panelContainerConfig.validate().then(function(e){t(!e)})})}},mixins:[r["a"]]},s=c,u=(n("b3c8"),n("2877")),l=Object(u["a"])(s,a,i,!1,null,"6f9ff46d",null);t["default"]=l.exports},"11ea":function(e,t,n){},"1ca6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event-kit"},[e.scriptConfig.event&&e.scriptConfig.event.length>0?n("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.scriptConfig.event,function(t,a){return[n("a-collapse-panel",{key:"event_panel_"+a,staticStyle:{"padding-left":"0"},attrs:{header:"@"+t.key+"("+t.params.map(function(e){return e.key}).join(", ")+")"}},[n("a-row",[n("a-col",{attrs:{span:18,offset:2}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"未启用"},model:{value:t.open,callback:function(n){e.$set(t,"open",n)},expression:"eve.open"}})],1)],1),t.open?n("a-popover",{attrs:{placement:"left",title:"@"+t.key+" 事件绑定",trigger:"click"}},[n("div",{staticStyle:{width:"600px",height:"400px"},attrs:{slot:"content"},slot:"content"},[n("smart-code-editor",{attrs:{code:e.code,workspace:e.workspace,"param-value-getter":function(n){return e.paramValueGetter(n,t.params,t.handlerCode)}},on:{input:function(n){return e.onHandlerCodeChange(n,t)}},model:{value:t.handlerCode,callback:function(n){e.$set(t,"handlerCode",n)},expression:"eve.handlerCode"}})],1),n("a-button",{staticStyle:{margin:"10px 0"},attrs:{block:"",type:"primary",size:"small"}},[e._v("\n            编辑事件函数\n          ")])],1):e._e()],1)]})],2):[e._v("\n    无\n  ")]],2)},i=[],r=(n("28a5"),n("4917"),n("788b")),o=n("541c"),c={name:"EventKit",data:function(){return{panelActiveKey:"event_panel_0"}},methods:{paramValueGetter:function(e,t,n){var a="";if(t&&t.length>0&&n){for(var i,r=0;r<t.length;r++)if(t[r].type===e.type){i=r;break}if(void 0===i)return"";var o=/[^(][a-zA-Z0-9]+(?=\))/,c=n.match(o);if(0===!c.length)return"";var s=c[0].split(",");if(s.length<=i)return"";a=s[i].trim()}return a},onHandlerCodeChange:function(e,t){t.handlerFuncName=Object(o["a"])(e)}},components:{smartCodeEditor:r["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},scriptConfig:{type:Object,default:function(){return{}}},extraMethodObjList:{type:Array,default:function(){return[]}}}},s=c,u=(n("8d31"),n("2877")),l=Object(u["a"])(s,a,i,!1,null,"00f37324",null);t["a"]=l.exports},2328:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[void 0!==e.panelConfig?n("general-panel-config",{ref:"generalPanelConfig",attrs:{"panel-list":e.panelList,code:e.code,workspace:e.workspace},on:{change:e.onPanelChanged,updatePanelList:function(t){e.panelList=t}},model:{value:e.panelConfig,callback:function(t){e.panelConfig=t},expression:"panelConfig"}}):e._e()],1)},i=[],r=(n("96cf"),n("3b8d")),o=n("b57a"),c=n("218b"),s={name:"PanelContainerConfigComponent",data:function(){return{panelList:void 0,panelConfig:void 0}},methods:{onPanelChanged:function(e){this.moduleConfig.metadata.panelConfig=e,this.moduleConfig.scriptConfig=e.scriptConfig},validate:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("面板校验已调用"),e.next=3,this.$refs.generalPanelConfig.validate();case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initModuleConfig:function(e){if(!e||!e.metadata||!e.metadata.panelConfig||!e.metadata.panelConfig.refName)return this.panelConfig={},!1;this.panelConfig=e.metadata.panelConfig}},mixins:[o["a"]],components:{generalPanelConfig:c["a"]},created:function(){this.$nextTick(function(){this.initModuleConfig(this.moduleConfig)})}},u=s,l=(n("bc76"),n("2877")),d=Object(l["a"])(u,a,i,!1,null,"1d40aed1",null);t["a"]=d.exports},"308d":function(e,t,n){},"4a93":function(e,t,n){"use strict";var a=n("308d"),i=n.n(a);i.a},"541c":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("28a5");var a=function(e){if(!e)return"";var t=e.slice(0,e.indexOf("(")).split(" ");return 1===t.length?t[0].trim():t[t.length-1].trim()}},"7f57":function(e,t,n){"use strict";n("ac6a");var a=n("cebc"),i=n("2ef0"),r=n.n(i),o=n("1ca6"),c=n("2f62"),s=(n("96cf"),n("3b8d")),u=Object(c["a"])("panelDesigner"),l=u.mapState,d=u.mapMutations,f={methods:Object(a["a"])({},d(["completeValidate","addValidateMsg"]),{validate:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.uuid,console.log("start validate module",t),e.next=4,this.formValidate();case 4:if(n=e.sent,console.log("module valid",n),n){e.next=10;break}return this.addValidateMsg({uuid:t}),this.completeValidate({uuid:t}),e.abrupt("return",!1);case 10:return e.next=12,this.customValidate();case 12:if(n=e.sent,this.completeValidate({uuid:t}),n){e.next=17;break}return this.addValidateMsg({uuid:t}),e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),formValidate:function(){var e=this;return new Promise(function(t){var n=e.$refs.form;console.log("form validate ref",n),n?n.validate(function(e){t(e)}):t(!0)})},customValidate:function(){return new Promise(function(e){return e(!0)})}}),computed:Object(a["a"])({},l({validateInfo:function(e){return e.validateInfo},configMap:function(e){return e.default.moduleConfigMap}})),watch:{"validateInfo.currentModuleId":{handler:function(e){console.log("validateInfo.currentModuleId",e),console.log("validateInfo.currentModuleId uuid",this.uuid),e===this.uuid&&this.validate()},deep:!0}}},p=Object(c["a"])("panelDesigner"),g=p.mapState,m=p.mapMutations;t["a"]={data:function(){return{workspace:"panelDesigner"}},methods:Object(a["a"])({},m(["updateModuleConfigList","updateConfigMap","clearAbstractStrategys","clearAllAbstractStrategys","addAbstractStrategy","addAbstractStrategys"]),{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getAbstractStrategys:function(){return[]}}),computed:Object(a["a"])({},g({abstractPanel:function(e){return e.abstractPanel}}),{moduleConfig:{get:function(){var e=this.$store.state.panelDesigner[this.code].moduleConfigMap;return e[this.uuid]},set:function(e){var t=this.$store.state.panelDesigner[this.code].moduleConfigMap;t[this.uuid];r.a.cloneDeep(e),this.updateConfigMap({key:this.code,configMap:t})}}}),watch:{abstractPanel:{handler:function(e){if(e){var t=this.uuid,n=this.getAbstractStrategys(),a=r.a.cloneDeep(n);a.forEach(function(e){e.uuid=t}),this.addAbstractStrategys(a)}else this.clearAllAbstractStrategys()},immediate:!0}},mixins:[f],components:{eventKit:o["a"]},props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}},"8d31":function(e,t,n){"use strict";var a=n("11ea"),i=n.n(a);i.a},b095:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tableOperateConfig"},[n("operate-line-config",{attrs:{"project-type":e.projectType,code:e.code,workspace:"DragConfig"},model:{value:e.moduleConfig,callback:function(t){e.moduleConfig=t},expression:"moduleConfig"}})],1)},i=[],r=n("e5b5"),o=n("a5d1"),c={name:"OperateLineConfig",mixins:[r["a"]],components:{operateLineConfig:o["a"]}},s=c,u=(n("4a93"),n("2877")),l=Object(u["a"])(s,a,i,!1,null,"3c613a5c",null);t["default"]=l.exports},b3c8:function(e,t,n){"use strict";var a=n("d368"),i=n.n(a);i.a},bc76:function(e,t,n){"use strict";var a=n("bd83"),i=n.n(a);i.a},bd83:function(e,t,n){},d368:function(e,t,n){},e5b5:function(e,t,n){"use strict";var a=n("cebc"),i=n("2ef0"),r=n.n(i),o=n("2f62"),c=n("1ca6"),s=n("80da"),u=Object(o["a"])("DragConfig"),l=u.mapMutations;t["a"]={data:function(){return{workspace:"DragConfig"}},methods:Object(a["a"])({},l(["updateModuleConfigList","updateConfigMap"])),computed:{moduleConfig:{get:function(){var e=this.$store.state.DragConfig[this.code].moduleConfigMap;return e[this.uuid]},set:function(e){var t=this.$store.state.DragConfig[this.code].moduleConfigMap;t[this.uuid];r.a.cloneDeep(e),this.updateConfigMap({key:this.code,configMap:t})}}},components:{eventKit:c["a"]},mixins:[s["a"]],props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}}}]);