(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig12"],{"09d0":function(e,t,a){},"1b72":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableOperateConfig"},[a("a-form",{staticClass:"tableOperateConfig",attrs:{layout:"horizontal"}},[a("h3",{staticClass:"title separator"},[e._v("功能选项")]),a("p",[e._v("\n      如需配置所需功能项，请在通用属性中配置！\n    ")]),e.showBatchRemoveConfig?[a("h3",{staticClass:"title separator"},[e._v("批量删除")]),a("a-row",[a("a-col",{attrs:{span:22}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:e.moduleConfig.metadata.batchDelete,callback:function(t){e.$set(e.moduleConfig.metadata,"batchDelete",t)},expression:"moduleConfig.metadata.batchDelete"}})],1)],1)]:e._e()],2),e.hasPanelPermission?[a("operate-line-config",{attrs:{"project-type":e.projectType,"show-align":!1,code:e.code,workspace:"DragConfig"},model:{value:e.moduleConfig,callback:function(t){e.moduleConfig=t},expression:"moduleConfig"}})]:e._e()],2)},o=[],i=(a("6762"),a("2fdb"),a("ac6a"),a("e5b5")),l=a("a5d1"),s=a("2ef0"),r=a.n(s),c={name:"TableOperateConfig",mixins:[i["a"]],components:{operateLineConfig:l["a"]},computed:{showBatchRemoveConfig:function(){var e=this,t=!1,a=this.$store.state.DragConfig[this.code].moduleConfigMap;return r.a.forEach(a,function(e){if("tableList"===e.mark)return t="NONE"!==e.metadata.rowSelection,!1}),e.moduleConfig.metadata.batchDelete=t,t},hasPanelPermission:function(){var e=[],t=this.$store.state.user.mainLevel;return t&&t.permissionList&&t.permissionList.length>0&&(e=t.permissionList),e.includes("f_pc_panel_designer")}}},u=c,m=(a("b085"),a("2877")),f=Object(m["a"])(u,n,o,!1,null,"3bf0288c",null);t["default"]=f.exports},5381:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form-model",{ref:"form",attrs:{layout:"horizontal",rules:e.rules,"label-col":{span:6},"wrapper-col":{span:18},model:e.moduleConfig.metadata}},[a("a-form-model-item",{attrs:{label:"实体选择",prop:"tableName"}},[e.listTables.length>0?[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,"default-value":e.listTables[e.listTables.length-1]["tableName"]},on:{change:function(t){return e.listTableNameChanged(t)}},model:{value:e.moduleConfig.metadata.tableName,callback:function(t){e.$set(e.moduleConfig.metadata,"tableName",t)},expression:"moduleConfig.metadata.tableName"}},e._l(e.listTables,function(t,n){return a("a-select-option",{key:n,attrs:{value:t.tableName}},[e._v("\n          "+e._s(t.objName)+" ["+e._s(t.tableName)+"]\n        ")])}),1)]:a("span",[e._v("\n      暂无实体可选\n    ")])],2),a("a-form-model-item",{attrs:{label:"布局列数"}},[a("a-radio-group",{attrs:{"button-style":"solid"},model:{value:e.moduleConfig.metadata.colNumber,callback:function(t){e.$set(e.moduleConfig.metadata,"colNumber",t)},expression:"moduleConfig.metadata.colNumber"}},e._l([1,2,3,4],function(t){return a("a-radio-button",{key:t,attrs:{value:t}},[e._v("\n        "+e._s(t)+"\n      ")])}),1)],1),e.listColumns.length>0?a("column-list-selector-plus",{ref:"columnListSelector",attrs:{title:"显示字段配置","is-expand":!1,"init-columns":e.listColumns,"valid-columns-filter":e.validListColumnsFilter,"auto-setter-col-filter":e.autoSetterColFilter,"vo-type":"ListVO"},on:{change:function(t){e.moduleConfig.metadata.listColumns=e._.cloneDeep(t)}}}):e._e()],1)},o=[],i=(a("ac6a"),a("7514"),a("7f57")),l=a("4047"),s=a("8656"),r=a("3aa3"),c={name:"TimelineConfig",data:function(){return{listTables:[],treeColumns:[],listColumns:[],rules:{tableName:[{required:!0,message:"请选择列表实体配置",trigger:"blur"}]}}},methods:{startConfigValidate:function(e){var t=this;console.log("refs configForm",this.$refs.configForm),this.$refs.configForm.validate(function(a,n){if(a)e();else{var o=t.collectErrMsg(n);e(o)}})},listTableNameChanged:function(e,t){var a=this.listTables.find(function(t){return t.tableName===e});this.moduleConfig.metadata.listTable=a,this.getListColumns(e,t)},getListColumns:function(e,t){var a=this;this.listColumns=[],r["a"].get("/diboot/devtools/db/cols/".concat(e)).then(function(e){if(0===e.code){e.data.forEach(function(e){e.columnExt||(e.columnExt={})}),a.listColumns=e.data;var n=a.moduleConfig.metadata.listColumns;t&&n.length>0?a.$nextTick(function(){var e=a.$refs.columnListSelector;console.log("ref",e),e&&e.setResultColumns(n)}):a.moduleConfig.metadata.listColumns=[]}})},validListColumnsFilter:function(e){return"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&!e.columnExt.refType},autoSetterColFilter:function(e){return!0!==e.primaryKey&&"tenantId"!==e.fieldName}},mixins:[i["a"],s["a"]],components:{columnListSelectorPlus:l["a"]},mounted:function(){this.$nextTick(function(){var e=this;r["a"].get("/diboot/devtools/db/edttbls").then(function(t){if(0===t.code&&(e.listTables=t.data.filter(function(e){return e.editable}),e.listTables.length>0)){var a=e.listTables[0].tableName;try{e.moduleConfig.metadata.tableName?a=e.moduleConfig.metadata.tableName:e.moduleConfig.metadata.tableName=a}catch(n){console.log("通用列表获取当前表名出错",a)}e.listTableNameChanged(a,!0)}})})}},u=c,m=(a("f45b"),a("2877")),f=Object(m["a"])(u,n,o,!1,null,"075f9437",null);t["default"]=f.exports},8656:function(e,t,a){"use strict";var n=a("75fc"),o=(a("ac6a"),a("cebc")),i=(a("6762"),a("2fdb"),a("2f62"));t["a"]={methods:{hasPermission:function(e){return 0===this.actionList.length||this.actionList.includes(e)}},computed:Object(o["a"])({},Object(i["f"])({mainLevel:function(e){return e.user.mainLevel}}),{actionList:function(){if(!this.mainLevel||!this.mainLevel.permissions||0===this.mainLevel.permissions.length)return[];var e=[];return this.mainLevel.permissions.forEach(function(t){t.actionList&&t.actionList.length>0&&e.push.apply(e,Object(n["a"])(t.actionList))}),e}})}},b085:function(e,t,a){"use strict";var n=a("09d0"),o=a.n(n);o.a},b3c4:function(e,t,a){},f45b:function(e,t,a){"use strict";var n=a("b3c4"),o=a.n(n);o.a}}]);