(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig8"],{"11ea":function(e,t,n){},"1ca6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"event-kit"},[e.scriptConfig.event&&e.scriptConfig.event.length>0?n("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.scriptConfig.event,function(t,a){return[n("a-collapse-panel",{key:"event_panel_"+a,staticStyle:{"padding-left":"0"},attrs:{header:"@"+t.key+"("+t.params.map(function(e){return e.key}).join(", ")+")"}},[n("a-row",[n("a-col",{attrs:{span:18,offset:2}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"未启用"},model:{value:t.open,callback:function(n){e.$set(t,"open",n)},expression:"eve.open"}})],1)],1),t.open?n("a-popover",{attrs:{placement:"left",title:"@"+t.key+" 事件绑定",trigger:"click"}},[n("div",{staticStyle:{width:"600px",height:"400px"},attrs:{slot:"content"},slot:"content"},[n("smart-code-editor",{attrs:{code:e.code,workspace:e.workspace,"param-value-getter":function(n){return e.paramValueGetter(n,t.params,t.handlerCode)}},on:{input:function(n){return e.onHandlerCodeChange(n,t)}},model:{value:t.handlerCode,callback:function(n){e.$set(t,"handlerCode",n)},expression:"eve.handlerCode"}})],1),n("a-button",{staticStyle:{margin:"10px 0"},attrs:{block:"",type:"primary",size:"small"}},[e._v("\n            编辑事件函数\n          ")])],1):e._e()],1)]})],2):[e._v("\n    无\n  ")]],2)},i=[],o=(n("28a5"),n("4917"),n("788b")),r=n("541c"),l={name:"EventKit",data:function(){return{panelActiveKey:"event_panel_0"}},methods:{paramValueGetter:function(e,t,n){var a="";if(t&&t.length>0&&n){for(var i,o=0;o<t.length;o++)if(t[o].type===e.type){i=o;break}if(void 0===i)return"";var r=/[^(][a-zA-Z0-9]+(?=\))/,l=n.match(r);if(0===!l.length)return"";var c=l[0].split(",");if(c.length<=i)return"";a=c[i].trim()}return a},onHandlerCodeChange:function(e,t){t.handlerFuncName=Object(r["a"])(e)}},components:{smartCodeEditor:o["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},scriptConfig:{type:Object,default:function(){return{}}},extraMethodObjList:{type:Array,default:function(){return[]}}}},c=l,s=(n("8d31"),n("2877")),u=Object(s["a"])(c,a,i,!1,null,"00f37324",null);t["a"]=u.exports},2328:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[void 0!==e.panelConfig?n("general-panel-config",{ref:"generalPanelConfig",attrs:{"panel-list":e.panelList,code:e.code,workspace:e.workspace},on:{change:e.onPanelChanged,updatePanelList:function(t){e.panelList=t}},model:{value:e.panelConfig,callback:function(t){e.panelConfig=t},expression:"panelConfig"}}):e._e()],1)},i=[],o=(n("96cf"),n("3b8d")),r=n("b57a"),l=n("218b"),c={name:"PanelContainerConfigComponent",data:function(){return{panelList:void 0,panelConfig:void 0}},methods:{onPanelChanged:function(e){this.moduleConfig.metadata.panelConfig=e,this.moduleConfig.scriptConfig=e.scriptConfig},validate:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("面板校验已调用"),e.next=3,this.$refs.generalPanelConfig.validate();case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initModuleConfig:function(e){if(!e||!e.metadata||!e.metadata.panelConfig||!e.metadata.panelConfig.refName)return this.panelConfig={},!1;this.panelConfig=e.metadata.panelConfig}},mixins:[r["a"]],components:{generalPanelConfig:l["a"]},created:function(){this.$nextTick(function(){this.initModuleConfig(this.moduleConfig)})}},s=c,u=(n("bc76"),n("2877")),p=Object(u["a"])(s,a,i,!1,null,"1d40aed1",null);t["a"]=p.exports},2773:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panelContainerConfig"},[n("panel-container-config",{attrs:{"project-type":e.projectType,code:e.code,workspace:"DragConfig"},model:{value:e.moduleConfig,callback:function(t){e.moduleConfig=t},expression:"moduleConfig"}})],1)},i=[],o=n("e5b5"),r=n("2328"),l={name:"PanelContainerConfig",components:{panelContainerConfig:r["a"]},mixins:[o["a"]]},c=l,s=(n("a832"),n("2877")),u=Object(s["a"])(c,a,i,!1,null,"01342062",null);t["default"]=u.exports},"541c":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("28a5");var a=function(e){if(!e)return"";var t=e.slice(0,e.indexOf("(")).split(" ");return 1===t.length?t[0].trim():t[t.length-1].trim()}},"5ff4":function(e,t,n){"use strict";var a=n("feba"),i=n.n(a);i.a},"7f57":function(e,t,n){"use strict";n("ac6a");var a=n("cebc"),i=n("2ef0"),o=n.n(i),r=n("1ca6"),l=n("2f62"),c=(n("96cf"),n("3b8d")),s=Object(l["a"])("panelDesigner"),u=s.mapState,p=s.mapMutations,d={methods:Object(a["a"])({},p(["completeValidate","addValidateMsg"]),{validate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.uuid,console.log("start validate module",t),e.next=4,this.formValidate();case 4:if(n=e.sent,console.log("module valid",n),n){e.next=10;break}return this.addValidateMsg({uuid:t}),this.completeValidate({uuid:t}),e.abrupt("return",!1);case 10:return e.next=12,this.customValidate();case 12:if(n=e.sent,this.completeValidate({uuid:t}),n){e.next=17;break}return this.addValidateMsg({uuid:t}),e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),formValidate:function(){var e=this;return new Promise(function(t){var n=e.$refs.form;console.log("form validate ref",n),n?n.validate(function(e){t(e)}):t(!0)})},customValidate:function(){return new Promise(function(e){return e(!0)})}}),computed:Object(a["a"])({},u({validateInfo:function(e){return e.validateInfo},configMap:function(e){return e.default.moduleConfigMap}})),watch:{"validateInfo.currentModuleId":{handler:function(e){console.log("validateInfo.currentModuleId",e),console.log("validateInfo.currentModuleId uuid",this.uuid),e===this.uuid&&this.validate()},deep:!0}}},f=Object(l["a"])("panelDesigner"),m=f.mapState,g=f.mapMutations;t["a"]={data:function(){return{workspace:"panelDesigner"}},methods:Object(a["a"])({},g(["updateModuleConfigList","updateConfigMap","clearAbstractStrategys","clearAllAbstractStrategys","addAbstractStrategy","addAbstractStrategys"]),{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getAbstractStrategys:function(){return[]}}),computed:Object(a["a"])({},m({abstractPanel:function(e){return e.abstractPanel}}),{moduleConfig:{get:function(){var e=this.$store.state.panelDesigner[this.code].moduleConfigMap;return e[this.uuid]},set:function(e){var t=this.$store.state.panelDesigner[this.code].moduleConfigMap;t[this.uuid];o.a.cloneDeep(e),this.updateConfigMap({key:this.code,configMap:t})}}}),watch:{abstractPanel:{handler:function(e){if(e){var t=this.uuid,n=this.getAbstractStrategys(),a=o.a.cloneDeep(n);a.forEach(function(e){e.uuid=t}),this.addAbstractStrategys(a)}else this.clearAllAbstractStrategys()},immediate:!0}},mixins:[d],components:{eventKit:r["a"]},props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}},"8d31":function(e,t,n){"use strict";var a=n("11ea"),i=n.n(a);i.a},"9e28":function(e,t,n){},a832:function(e,t,n){"use strict";var a=n("9e28"),i=n.n(a);i.a},af7f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tableOperateConfig"},[n("a-form",{staticClass:"panel-props-config ",attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("\n      面板入参props\n      "),n("a-icon",{staticStyle:{cursor:"pointer",color:"rgb(24, 144, 255)"},attrs:{type:"plus-circle"},on:{click:e.addProp}})],1),n("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.moduleConfig.metadata.propConfigList,function(t,a){return[n("a-collapse-panel",{key:"config_panel_"+a,attrs:{header:t.key?t.key:"参数"+(a+1)+" 配置"}},[n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"参数"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数名称"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"config.key"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"说明"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数说明"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"config.name"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"类型"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"参数类型",size:"small"},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"config.type"}},[n("a-select-option",{attrs:{value:"String"}},[e._v("\n                String\n              ")]),n("a-select-option",{attrs:{value:"Array"}},[e._v("\n                Array\n              ")]),n("a-select-option",{attrs:{value:"Object"}},[e._v("\n                Object\n              ")]),n("a-select-option",{attrs:{value:"Function"}},[e._v("\n                Function\n              ")]),n("a-select-option",{attrs:{value:"Number"}},[e._v("\n                Number\n              ")]),n("a-select-option",{attrs:{value:"Boolean"}},[e._v("\n                Boolean\n              ")])],1)],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"默认值"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数默认值"},model:{value:t.default,callback:function(n){e.$set(t,"default",n)},expression:"config.default"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"必填项"}},[n("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.required,callback:function(n){e.$set(t,"required",n)},expression:"config.required"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数变化检测"}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"不启用"},model:{value:t.hasWatch,callback:function(n){e.$set(t,"hasWatch",n)},expression:"config.hasWatch"}})],1),t.hasWatch?n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数检测编辑"}},[n("a-popover",{attrs:{title:"参数检测代码编辑",placement:"left",trigger:"click"}},[n("template",{slot:"content"},[n("smart-code-editor",{attrs:{code:e.code},model:{value:t.watchCode,callback:function(n){e.$set(t,"watchCode",n)},expression:"config.watchCode"}})],1),n("a-button",{attrs:{type:"link"}},[e._v("\n                设置\n              ")])],2)],1):e._e(),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"操作"}},[n("a-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",type:"primary",icon:"copy"},on:{click:function(t){return e.copyProp(a)}}},[e._v("\n              复制\n            ")]),n("a-popconfirm",{attrs:{placement:"topLeft",title:"是否确认删除该按钮？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.removeProp(a)}}},[n("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("\n                删除\n              ")])],1)],1)],1)]})],2)],1)],1)},i=[],o=n("7f57"),r=n("788b"),l=n("2ef0"),c=n.n(l),s=n("6892"),u={key:"props",name:"入参参数",type:"String",default:"",required:!1,hasWatch:!0,watchCode:"function(val) {\n  // 数据更改处理流程\n}"},p={name:"PanelPropsConfig",data:function(){return{panelActiveKey:"config_panel_0",panelList:[]}},methods:{addProp:function(){this.moduleConfig.metadata.propConfigList.push(c.a.cloneDeep(u)),this.panelActiveKey="config_panel_".concat(this.moduleConfig.metadata.propConfigList.length-1)},copyProp:function(e){var t=c.a.cloneDeep(this.moduleConfig.metadata.propConfigList[e]);this.moduleConfig.metadata.propConfigList.splice(e,0,t),this.panelActiveKey="config_panel_".concat(e+1)},removeProp:function(e){this.moduleConfig.metadata.propConfigList.splice(e,1),e>0?this.panelActiveKey="config_panel_".concat(e-1):this.moduleConfig.metadata.propConfigList.length>0&&(this.panelActiveKey="config_panel_".concat(0))},validateComplete:function(){}},mixins:[o["a"]],components:{smartCodeEditor:r["a"]},watch:{"moduleConfig.scriptConfig.propConfigList":{handler:function(e){s["a"].$emit("setGeneralPropsConfig_".concat(this.code),this.moduleConfig)},deep:!0,immediate:!0}},created:function(){}},d=p,f=(n("5ff4"),n("2877")),m=Object(f["a"])(d,a,i,!1,null,"6e744a50",null);t["default"]=m.exports},b57a:function(e,t,n){"use strict";var a=n("085b"),i=n("1ca6");t["a"]={data:function(){return{moduleConfig:{}}},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},watch:{moduleConfig:{handler:function(e){this.$emit("input",e)},deep:!0,immediate:!0},value:{handler:function(e){this.moduleConfig=e},deep:!0,immediate:!0}},components:{propsKit:a["a"],eventKit:i["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},projectType:{type:String,required:!0},value:{type:Object,default:function(){return{}}}}}},bc76:function(e,t,n){"use strict";var a=n("bd83"),i=n.n(a);i.a},bd83:function(e,t,n){},e5b5:function(e,t,n){"use strict";var a=n("cebc"),i=n("2ef0"),o=n.n(i),r=n("2f62"),l=n("1ca6"),c=n("80da"),s=Object(r["a"])("DragConfig"),u=s.mapMutations;t["a"]={data:function(){return{workspace:"DragConfig"}},methods:Object(a["a"])({},u(["updateModuleConfigList","updateConfigMap"])),computed:{moduleConfig:{get:function(){var e=this.$store.state.DragConfig[this.code].moduleConfigMap;return e[this.uuid]},set:function(e){var t=this.$store.state.DragConfig[this.code].moduleConfigMap;t[this.uuid];o.a.cloneDeep(e),this.updateConfigMap({key:this.code,configMap:t})}}},components:{eventKit:l["a"]},mixins:[c["a"]],props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}},feba:function(e,t,n){}}]);