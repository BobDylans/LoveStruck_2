(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig11"],{"14b2":function(t,e,a){},"2f35":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form",{attrs:{layout:"horizontal"}},[a("h3",{staticClass:"title separator"},[t._v("列表设置")]),a("a-row",[a("a-col",{attrs:{span:6}},[t._v("\n      复选框\n    ")]),a("a-col",{attrs:{span:18}},[a("a-radio-group",{attrs:{size:"small","default-value":"NONE","button-style":"solid"},on:{change:t.onRowSelectionChanged},model:{value:t.moduleConfig.metadata.rowSelection,callback:function(e){t.$set(t.moduleConfig.metadata,"rowSelection",e)},expression:"moduleConfig.metadata.rowSelection"}},[a("a-radio-button",{attrs:{value:"NONE"}},[t._v("\n          无\n        ")]),a("a-radio-button",{attrs:{value:"MULTI_SELECT"}},[t._v("\n          多选\n        ")])],1)],1)],1),a("a-row",{staticStyle:{"margin-top":"10px"}},[a("a-col",{attrs:{span:6}},[t._v("\n      列表编辑\n    ")]),a("a-col",{attrs:{span:18}},[a("a-radio-group",{attrs:{size:"small","default-value":"NONE","button-style":"solid"},model:{value:t.moduleConfig.metadata.editTable,callback:function(e){t.$set(t.moduleConfig.metadata,"editTable",e)},expression:"moduleConfig.metadata.editTable"}},[a("a-radio-button",{attrs:{value:"NONE"}},[t._v("\n          无\n        ")]),a("a-radio-button",{attrs:{value:"ROW_EDIT"}},[t._v("\n          行内编辑\n        ")])],1)],1)],1),a("a-row",{staticStyle:{"margin-top":"10px"}},[a("a-col",{attrs:{span:6}},[t._v("\n      固定操作栏\n    ")]),a("a-col",{attrs:{span:18}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.moduleConfig.metadata.fixAction,callback:function(e){t.$set(t.moduleConfig.metadata,"fixAction",e)},expression:"moduleConfig.metadata.fixAction"}})],1)],1),a("column-list-selector-plus",{ref:"columnListSelector",attrs:{"primary-key-event":!0,"need-ref-entity":!1,"is-expand":!0,"valid-columns-filter":t.validColumnsFilter,"auto-setter-col-filter":t.autoSetterColFilter,"col-extra-properties-setter":t.setColExtraProperties,"expand-columns-filter":t.expandColumnsFilter,title:"列表项配置","vo-type":"ListVO"},on:{change:function(e){t.moduleConfig.metadata.columns=t._.cloneDeep(e)},primaryKeyChange:function(e){t.moduleConfig.metadata.primaryKey=e}},scopedSlots:t._u([{key:"item-extra-content",fn:function(e){var i=e.col;return[i.fieldPackagingType&&"String"===i.fieldPackagingType?a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"缩略显示"}},[a("a-checkbox",{model:{value:i.ellipsis,callback:function(e){t.$set(i,"ellipsis",e)},expression:"col.ellipsis"}},[t._v("\n          内容超长缩略显示\n        ")])],1):t._e(),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"列宽(px)",title:"默认由列表组件自动分配"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n          列宽\n        ")]),a("a-input-number",{attrs:{min:1},model:{value:i.width,callback:function(e){t.$set(i,"width",e)},expression:"col.width"}})],1)]}}])})],1)},n=[],o=a("cebc"),l=(a("7514"),a("e5b5")),s=a("4047"),d=a("2f62"),r=Object(d["a"])("database"),c=r.mapState,m={name:"TableListConfig",data:function(){return{initColumns:void 0}},methods:{setColExtraProperties:function(t){"String"===t.fieldPackagingType&&t.colLength&&t.colLength>255?t.ellipsis=!0:"String"===t.fieldPackagingType?t.ellipsis=!1:t.ellipsis=void 0,"isDeleted"!==t.fieldName&&"extdata"!==t.fieldName&&"createTime"!==t.fieldName&&"updateTime"!==t.fieldName&&"createBy"!==t.fieldName&&"updateBy"!==t.fieldName&&"id"!==t.fieldName&&"uuid"!==t.fieldName&&"tenantId"!==t.fieldName&&t.columnExt&&(t.editTableCell=!0)},onRowSelectionChanged:function(t){if("NONE"===t)this.moduleConfig.scriptConfig.data&&this.moduleConfig.scriptConfig.data.length>0&&(this.moduleConfig.scriptConfig.data=this.moduleConfig.scriptConfig.data.filter(function(t){return"selectedRowKeys"!==t.key}));else{var e=this.moduleConfig.scriptConfig.data.find(function(t){return"selectedRowKeys"===t.key});void 0===e&&this.moduleConfig.scriptConfig.data.push({key:"selectedRowKeys",name:"选中ID列表",type:"Array"})}},validColumnsFilter:function(t){return"CHECKBOX"!==t.columnExt.formType&&"isDeleted"!==t.fieldName&&"extdata"!==t.fieldName&&"S_FILE_UPLOAD"!==t.columnExt.formType&&"M_FILE_UPLOAD"!==t.columnExt.formType&&"S_IMG_UPLOAD"!==t.columnExt.formType&&"M_IMG_UPLOAD"!==t.columnExt.formType&&"RICH_EDITOR"!==t.columnExt.formType&&!t.columnExt.refType},autoSetterColFilter:function(t){return!0!==t.primaryKey&&"tenantId"!==t.fieldName},expandColumnsFilter:function(t){return!0}},computed:Object(o["a"])({},c({columns:function(t){return t.columns}})),watch:{columns:{handler:function(t){t&&t.length>0&&(this.moduleConfig.metadata.enableTree=t.some(function(t){return t.columnExt&&t.columnExt.tableName&&t.columnExt.tableName===t.columnExt.refTable}))},immediate:!0,deep:!0}},mixins:[l["a"]],components:{columnListSelectorPlus:s["a"]},created:function(){var t=this.moduleConfig.metadata.columns;this.initColumns=t.length>0?t:void 0},mounted:function(){var t=this;this.$nextTick(function(){t.initColumns&&t.$refs.columnListSelector.setResultColumns(t.initColumns)})}},u=m,f=(a("87b1"),a("2877")),p=Object(f["a"])(u,i,n,!1,null,"4219df99",null);e["default"]=p.exports},"39a3":function(t,e,a){"use strict";var i=a("41fd"),n=a.n(i);n.a},"41fd":function(t,e,a){},"55fd":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i={NORMAL:"NORMAL",BIND_DICT:"BIND_DICT"},n={NORMAL:"自定义标签列表",BIND_DICT:"数据字典自动绑定"}},"62df":function(t,e,a){"use strict";e["a"]={computed:{commonModuleList:{get:function(){var t=this.moduleConfig&&this.moduleConfig.metadata&&this.moduleConfig.metadata.tabs?this.moduleConfig.metadata.tabs:[];return 0===t.length?[]:t[0]["moduleList"]},set:function(t){var e=this.moduleConfig.metadata.tabs;e&&1===e.length?this.moduleConfig.metadata.tabs[0]["moduleList"]=t:this.moduleConfig.metadata.tabs=[{title:"",moduleList:t}]}}}}},"87b1":function(t,e,a){"use strict";var i=a("14b2"),n=a.n(i);n.a},d966:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form-model",{ref:"form",attrs:{layout:"horizontal",rules:t.rules,"label-col":{span:6},"wrapper-col":{span:18},model:t.moduleConfig.metadata}},[a("a-form-model-item",{attrs:{label:"标签模式",prop:"mode"}},[a("a-select",{staticStyle:{width:"100%"},on:{change:t.onModeChanged},model:{value:t.moduleConfig.metadata.mode,callback:function(e){t.$set(t.moduleConfig.metadata,"mode",e)},expression:"moduleConfig.metadata.mode"}},t._l(t.modeKeys,function(e,i){return a("a-select-option",{key:i,attrs:{value:e}},[t._v("\n        "+t._s(t.modeLabelObj[e])+"\n      ")])}),1)],1),t.moduleConfig.metadata.mode===t.modeCons.BIND_DICT?[a("a-form-model-item",{attrs:{label:"数据字典",prop:"bindDict"}},[t.dictList&&t.dictList.length>0?a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":t.filterOption,"default-value":t.dictList[0]["type"]},on:{change:t.setDictItems},model:{value:t.moduleConfig.metadata.bindDict,callback:function(e){t.$set(t.moduleConfig.metadata,"bindDict",e)},expression:"moduleConfig.metadata.bindDict"}},t._l(t.dictList,function(e,i){return a("a-select-option",{key:i,attrs:{value:e.type}},[t._v("\n          "+t._s(e.itemName)+" ["+t._s(e.type)+"]\n        ")])}),1):t._e()],1)]:t.moduleConfig.metadata.mode===t.modeCons.NORMAL?[a("h3",{staticClass:"title separator"},[t._v("\n      面板列表\n      "),a("a-icon",{staticStyle:{cursor:"pointer",color:"rgb(24, 144, 255)"},attrs:{type:"plus-circle"},on:{click:t.addTab}})],1),a("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:t.panelActiveKey,callback:function(e){t.panelActiveKey=e},expression:"panelActiveKey"}},[t._l(t.moduleConfig.metadata.tabs,function(e,i){return[a("a-collapse-panel",{key:"config_panel_"+i,attrs:{header:e.title?e.title:"面板设置"}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"标题"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"面板标题"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"t.title"}})],1),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"操作"}},[a("a-popconfirm",{attrs:{placement:"topLeft",title:"是否确认删除该按钮？","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.removeTab(i)}}},[a("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[t._v("\n                删除\n              ")])],1)],1)],1)]})],2)]:t._e()],2)},n=[],o=(a("ac6a"),a("456d"),a("7514"),a("96cf"),a("3b8d")),l=a("7f57"),s=a("55fd"),d=a("2ef0"),r=a.n(d),c=a("3aa3"),m=a("62df"),u={title:"标签页",moduleList:[]},f={name:"TabsPageConfig",data:function(){return{modeLabelObj:s["b"],modeCons:s["a"],dictList:[],panelActiveKey:"config_panel_0"}},methods:{onModeChanged:function(t){this.moduleConfig.metadata.bindDict="",this.moduleConfig.metadata.dictItemNames=[],this.moduleConfig.metadata.tabs=[],this.commonModuleList=[],this.moduleConfig.scriptConfig.data=[],t===s["a"].NORMAL?this.moduleConfig.metadata.tabs=[{title:"标签页",moduleList:[]}]:t===s["a"].BIND_DICT&&(this.dictList&&this.dictList.length>0&&(this.moduleConfig.metadata.bindDict=this.dictList[0]["type"],this.setDictItems()),this.moduleConfig.scriptConfig.data=[{key:"item.v",name:"Tab标签栏内入参",type:"String",default:""}])},initDictList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].get("/diboot/devtools/dict/all");case 2:e=t.sent,0===e.code?this.dictList=e.data:this.$message.error(e.msg);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setDictItems:function(){var t=this.moduleConfig.metadata.bindDict;if(this.moduleConfig.metadata.mode!==s["a"].BIND_DICT||0===this.dictList.length||!t)return this.moduleConfig.metadata.dictItemNames=[],!1;var e=this.dictList.find(function(e){return e.type===t});if(!e)return this.moduleConfig.metadata.dictItemNames=[],!1;this.moduleConfig.metadata.dictItemNames=e.children?e.children.map(function(t){return t.itemName}):[]},addTab:function(){this.moduleConfig.metadata.tabs.push(r.a.cloneDeep(u)),this.panelActiveKey="config_panel_".concat(this.moduleConfig.metadata.tabs.length-1)},removeTab:function(t){this.moduleConfig.metadata.tabs.splice(t,1)}},computed:{modeKeys:function(){return void 0===this.modeLabelObj?[]:Object.keys(this.modeLabelObj)}},components:{},mixins:[l["a"],m["a"]],created:function(){this.initDictList()}},p=f,g=(a("39a3"),a("2877")),C=Object(g["a"])(p,i,n,!1,null,"5ff0a6c9",null);e["default"]=C.exports}}]);