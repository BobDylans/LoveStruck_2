(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig15"],{"085b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"props-kit"},[a("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.scriptConfig.props,function(t,n){return[a("a-collapse-panel",{key:"props_panel_"+n,staticStyle:{"padding-left":"0"},attrs:{header:t.key}},[a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"是否启用该参数",labelCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.open,callback:function(a){e.$set(t,"open",a)},expression:"prop.open"}})],1)],1)],1),t.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticClass:"form-line",staticStyle:{"margin-bottom":"0"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择绑定参数",showSearch:"",filterOption:function(a,n){return e.filterOptionAndSetValue(t,a,n)},size:"small"},model:{value:t.targetData,callback:function(a){e.$set(t,"targetData",a)},expression:"prop.targetData"}},[a("a-select-option",{attrs:{value:""}},[e._v("\n                  请选择绑定参数\n                ")]),e._l(e.scriptDataList,function(t,n){return a("a-select-option",{key:n,attrs:{value:t.key}},[e._v("\n                  "+e._s(t.key)+" ["+e._s(t.name)+"]\n                ")])})],2)],1)],1)],1):e._e(),t.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticClass:"form-line",staticStyle:{"margin-bottom":"0"}},[a("a-input",{attrs:{size:"small",placeholder:"或输入绑定参数"},model:{value:t.targetData,callback:function(a){e.$set(t,"targetData",a)},expression:"prop.targetData"}})],1)],1)],1):e._e(),t.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"参数有值时显示",labelCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.onlyDataShow,callback:function(a){e.$set(t,"onlyDataShow",a)},expression:"prop.onlyDataShow"}})],1)],1)],1):e._e(),t.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"转String格式",labelCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:t.convertToString,callback:function(a){e.$set(t,"convertToString",a)},expression:"prop.convertToString"}})],1)],1)],1):e._e()],1)]})],2)],1)},i=[],o=a("0561"),l={name:"PropsKit",data:function(){return{panelActiveKey:"props_panel_0"}},methods:{filterOptionAndSetValue:function(e,t,a){var n=a.componentOptions.children[0].text.toLowerCase();if(n.indexOf(t.toLowerCase())>=0)return!0;var i=a.componentOptions.propsData.value.toLowerCase();return i.indexOf(t.toLowerCase())>=0||(e.targetData=t,!1)}},mixins:[o["a"]],props:{code:{type:String,default:""},scriptConfig:{type:Object,default:function(){return{}}},workspace:{type:String,default:"panelDesigner"}}},r=l,s=(a("0c19"),a("2877")),c=Object(s["a"])(r,n,i,!1,null,"2e30a0bc",null);t["a"]=c.exports},"0c19":function(e,t,a){"use strict";var n=a("b5d1"),i=a.n(n);i.a},"0dc0":function(e,t,a){},"11ea":function(e,t,a){},"11f3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form-model",{ref:"form",attrs:{layout:"horizontal",rules:e.rules,"label-col":{span:6},"wrapper-col":{span:18},model:e.moduleConfig.metadata}},[e.abstractPanel?[a("a-form-model-item",{attrs:{label:"实体选择"}},[a("a-tag",{attrs:{color:"#87d068"}},[e._v("\n        树结构预留\n      ")])],1),a("a-form-model-item",{attrs:{label:"显示字段"}},[a("a-tag",{attrs:{color:"#87d068"}},[e._v("\n        树结构字段预留\n      ")])],1)]:[a("a-form-model-item",{attrs:{label:"实体选择",prop:"tableName"}},[e.treeTables.length>0?[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,"default-value":e.treeTables.length>0?e.treeTables[0]["tableName"]:"",placeholder:"请选择树结构实体"},on:{change:e.treeTalbeNameChanged},model:{value:e.moduleConfig.metadata.tableName,callback:function(t){e.$set(e.moduleConfig.metadata,"tableName",t)},expression:"moduleConfig.metadata.tableName"}},e._l(e.treeTables,function(t,n){return a("a-select-option",{key:n,attrs:{value:t.tableName}},[e._v("\n            "+e._s(t.objName)+" ["+e._s(t.tableName)+"]\n          ")])}),1)]:a("span",[e._v("\n        没有符合条件的树实体可选\n      ")])],2),a("a-form-model-item",{attrs:{label:"显示字段",prop:"treeShowFieldName"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择树结构展示字段"},model:{value:e.moduleConfig.metadata.treeShowFieldName,callback:function(t){e.$set(e.moduleConfig.metadata,"treeShowFieldName",t)},expression:"moduleConfig.metadata.treeShowFieldName"}},e._l(e.treeColumns,function(t,n){return a("a-select-option",{key:n,attrs:{value:t.fieldName}},[e._v("\n          "+e._s(t.fieldLabel)+" ["+e._s(t.fieldName)+"]\n        ")])}),1)],1)],e.moduleConfig.scriptConfig&&e.hasPermission("f_pc_panel_event_kit")?[a("a-divider",[e._v("组件事件处理")]),a("event-kit",{attrs:{code:e.code,"script-config":e.moduleConfig.scriptConfig}})]:e._e()],2)},i=[],o=(a("7514"),a("7f57")),l=a("6cc4"),r=a("8656"),s=a("3aa3"),c=a("b023"),u=[{uuid:"",moduleName:"treeStruct",label:"树结构参数设置",type:"dynamic_table_fields",strategy:{label:"树结构实体选择",type:c["b"].entity_without_sys,target:"tableName",tableInfoTarget:"treeTable",custom:!0,children:[{label:"树结构实体显示字段",type:"field",strategy:{label:"树结构显示字段",type:c["a"].showField,custom:!1,target:"treeShowFieldName"}},{label:"树结构实体主键字段",type:"field",strategy:{label:"树结构显示字段",type:c["a"].showField,custom:!1,target:"treeKeyFieldName"}}]}}],d={name:"TreeStructConfig",data:function(){return{treeTables:[],treeColumns:[],rules:{tableName:[{required:!0,message:"请选择树结构实体",trigger:"blur"}],treeShowFieldName:[{required:!0,message:"请选择树结构显示字段",trigger:"blur"}]}}},methods:{getAbstractStrategys:function(){return u},startConfigValidate:function(e){var t=this;this.$refs.configForm.validate(function(a,n){if(a)e();else{var i=t.collectErrMsg(n);e(i)}})},treeTalbeNameChanged:function(e){var t=this.treeTables.find(function(t){return t.tableName===e});this.moduleConfig.metadata.treeTable=t,this.getTreeColumns(e)},getTreeColumns:function(e){var t=this;this.treeColumns=[],s["a"].get("/diboot/devtools/db/cols/".concat(e)).then(function(e){0===e.code&&(t.treeColumns=e.data,t.moduleConfig.metadata.treeShowFieldName=t.getSmartTreeShowFieldName(),t.moduleConfig.metadata.treeKeyFieldName=t.getTreeKeyFieldName())})},getSmartTreeShowFieldName:function(){if(0===this.treeColumns.length)return"";var e=this.treeColumns.find(function(e){return e.columnExt&&"T"===e.columnExt.refType&&e.columnExt.refTable===e.tableName&&e.columnExt.asColumn});if(void 0===e)return"";var t=this.treeColumns.find(function(t){return t.colName===e.columnExt.asColumn});return void 0===t?"":t.fieldName},getTreeKeyFieldName:function(){var e=this.treeColumns.find(function(e){return e.primaryKey});return void 0===e?"":e.fieldName}},mixins:[o["a"],r["a"]],components:{columnListSelector:l["a"]},mounted:function(){this.$nextTick(function(){var e=this;s["a"].get("/diboot/devtools/db/trtbls").then(function(t){if(0===t.code&&(e.treeTables=t.data.filter(function(e){return e.editable}),e.treeTables.length>0)){var a=e.treeTables[0].tableName;try{e.moduleConfig.metadata.tableName&&(a=e.moduleConfig.metadata.tableName)}catch(n){console.log("通用树结构获取当前表名出错",a)}e.treeTalbeNameChanged(a)}})})}},m=d,f=(a("c5a0"),a("2877")),p=Object(f["a"])(m,n,i,!1,null,"38fbd5d0",null);t["default"]=p.exports},"1ca6":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"event-kit"},[e.scriptConfig.event&&e.scriptConfig.event.length>0?a("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.scriptConfig.event,function(t,n){return[a("a-collapse-panel",{key:"event_panel_"+n,staticStyle:{"padding-left":"0"},attrs:{header:"@"+t.key+"("+t.params.map(function(e){return e.key}).join(", ")+")"}},[a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"未启用"},model:{value:t.open,callback:function(a){e.$set(t,"open",a)},expression:"eve.open"}})],1)],1),t.open?a("a-popover",{attrs:{placement:"left",title:"@"+t.key+" 事件绑定",trigger:"click"}},[a("div",{staticStyle:{width:"600px",height:"400px"},attrs:{slot:"content"},slot:"content"},[a("smart-code-editor",{attrs:{code:e.code,workspace:e.workspace,"param-value-getter":function(a){return e.paramValueGetter(a,t.params,t.handlerCode)}},on:{input:function(a){return e.onHandlerCodeChange(a,t)}},model:{value:t.handlerCode,callback:function(a){e.$set(t,"handlerCode",a)},expression:"eve.handlerCode"}})],1),a("a-button",{staticStyle:{margin:"10px 0"},attrs:{block:"",type:"primary",size:"small"}},[e._v("\n            编辑事件函数\n          ")])],1):e._e()],1)]})],2):[e._v("\n    无\n  ")]],2)},i=[],o=(a("28a5"),a("4917"),a("788b")),l=a("541c"),r={name:"EventKit",data:function(){return{panelActiveKey:"event_panel_0"}},methods:{paramValueGetter:function(e,t,a){var n="";if(t&&t.length>0&&a){for(var i,o=0;o<t.length;o++)if(t[o].type===e.type){i=o;break}if(void 0===i)return"";var l=/[^(][a-zA-Z0-9]+(?=\))/,r=a.match(l);if(0===!r.length)return"";var s=r[0].split(",");if(s.length<=i)return"";n=s[i].trim()}return n},onHandlerCodeChange:function(e,t){t.handlerFuncName=Object(l["a"])(e)}},components:{smartCodeEditor:o["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},scriptConfig:{type:Object,default:function(){return{}}},extraMethodObjList:{type:Array,default:function(){return[]}}}},s=r,c=(a("8d31"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"00f37324",null);t["a"]=u.exports},"238b":function(e,t,a){},"527d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{attrs:{layout:"horizontal"}},[a("h3",{staticClass:"title"},[e._v("\n    标题内容\n  ")]),a("a-row",[a("a-col",{attrs:{span:23}},[a("a-form-item",{staticClass:"form-line"},[a("a-textarea",{attrs:{placeholder:"请输入标题内容..."},model:{value:e.moduleConfig.metadata.title,callback:function(t){e.$set(e.moduleConfig.metadata,"title",t)},expression:"moduleConfig.metadata.title"}})],1)],1)],1),a("h3",{staticClass:"title"},[e._v("\n    标题样式\n  ")]),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"对齐"}},[a("a-radio-group",{attrs:{"button-style":"solid",size:"small"},model:{value:e.moduleConfig.metadata.styleObj.textAlign,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"textAlign",t)},expression:"moduleConfig.metadata.styleObj.textAlign"}},[a("a-radio-button",{attrs:{value:"left"}},[a("a-icon",{attrs:{type:"align-left"}})],1),a("a-radio-button",{attrs:{value:"center"}},[a("a-icon",{attrs:{type:"align-center"}})],1),a("a-radio-button",{attrs:{value:"right"}},[a("a-icon",{attrs:{type:"align-right"}})],1)],1)],1),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"背景"}},[a("color-picker",{model:{value:e.moduleConfig.metadata.styleObj.bgColor,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"bgColor",t)},expression:"moduleConfig.metadata.styleObj.bgColor"}})],1),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"颜色"}},[a("color-picker",{model:{value:e.moduleConfig.metadata.styleObj.color,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"color",t)},expression:"moduleConfig.metadata.styleObj.color"}})],1),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"下边框"}},[a("a-switch",{model:{value:e.moduleConfig.metadata.styleObj.borderBottom,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"borderBottom",t)},expression:"moduleConfig.metadata.styleObj.borderBottom"}})],1),e.moduleConfig.metadata.styleObj.borderBottom?a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"边框高度"}},[e.moduleConfig.metadata.styleObj.borderBottom?a("a-slider",{attrs:{min:1,max:10},model:{value:e.moduleConfig.metadata.styleObj.borderHeight,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"borderHeight",t)},expression:"moduleConfig.metadata.styleObj.borderHeight"}}):e._e()],1):e._e(),e.moduleConfig.metadata.styleObj.borderBottom?a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"边框颜色"}},[a("color-picker",{model:{value:e.moduleConfig.metadata.styleObj.borderColor,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"borderColor",t)},expression:"moduleConfig.metadata.styleObj.borderColor"}})],1):e._e(),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"行高"}},[a("a-slider",{attrs:{min:1,max:120},model:{value:e.moduleConfig.metadata.styleObj.lineHeight,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"lineHeight",t)},expression:"moduleConfig.metadata.styleObj.lineHeight"}})],1),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"字体"}},[a("a-slider",{attrs:{step:2,min:6,max:56},model:{value:e.moduleConfig.metadata.styleObj.fontSize,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"fontSize",t)},expression:"moduleConfig.metadata.styleObj.fontSize"}})],1),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"粗细"}},[a("a-slider",{attrs:{step:100,min:200,max:1e3},model:{value:e.moduleConfig.metadata.styleObj.fontWeight,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"fontWeight",t)},expression:"moduleConfig.metadata.styleObj.fontWeight"}})],1),a("a-form-item",{staticClass:"form-line",attrs:{"label-col":{span:8},"wrapper-col":{span:14},label:"水平内边距"}},[a("a-slider",{attrs:{min:0,max:100},model:{value:e.moduleConfig.metadata.styleObj.hPadding,callback:function(t){e.$set(e.moduleConfig.metadata.styleObj,"hPadding",t)},expression:"moduleConfig.metadata.styleObj.hPadding"}})],1)],1)},i=[],o=a("b57a"),l=a("1bed"),r={name:"TitleLineConfig",methods:{setStyleContent:function(){var e=this.moduleConfig.metadata.styleObj,t="padding: 0 ".concat(e.hPadding,"px; min-height: ").concat(e.lineHeight,"px; line-height: ").concat(e.lineHeight,"px; font-weight: ").concat(e.fontWeight,"; font-size: ").concat(e.fontSize,"px; text-align: ").concat(e.textAlign,";");!0===e.borderBottom&&(t+="border-bottom: ".concat(e.borderHeight,"px solid ").concat(e.borderColor,";")),e.bgColor&&(t+="background-color: ".concat(e.bgColor,";")),e.color&&(t+="color: ".concat(e.color,";")),this.moduleConfig.metadata.styleContent=t}},watch:{"moduleConfig.metadata.styleObj":{handler:function(e){this.setStyleContent()},deep:!0,immediate:!0}},mixins:[o["a"]],components:{colorPicker:l["a"]},created:function(){}},s=r,c=(a("6ae2"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"492c99fc",null);t["a"]=u.exports},"541c":function(e,t,a){"use strict";a.d(t,"a",function(){return n});a("28a5");var n=function(e){if(!e)return"";var t=e.slice(0,e.indexOf("(")).split(" ");return 1===t.length?t[0].trim():t[t.length-1].trim()}},"6ae2":function(e,t,a){"use strict";var n=a("aebb"),i=a.n(n);i.a},"6cc4":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticClass:"title separator"},[e._v("\n    "+e._s(e.title)+"\n    "),a("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",ghost:"",size:"small",title:"更改所有的显示标签",icon:"edit"},on:{click:e.showAllEdit}})],1),[e.resultColumns?a("draggable",{attrs:{element:"div",handle:".drag-handle",options:{group:{name:"columns",pull:"false",put:!1},sort:!0,forceFallback:!0}},model:{value:e.resultColumns,callback:function(t){e.resultColumns=t},expression:"resultColumns"}},e._l(e.resultColumns,function(t,n){return a("a-row",{key:n,staticClass:"config-form-item"},[a("a-col",{attrs:{span:2}},[a("span",{staticClass:"col-icon-span drag-handle",attrs:{title:"拖拽可排序"}},[a("a-icon",{staticStyle:{fontSize:"20px"},attrs:{type:"bars"}})],1)]),a("a-col",{attrs:{span:t.showInput?18:16}},[t.showInput?a("a-input",{attrs:{id:e.voType+"FieldNameEditInput_"+t.fieldName,size:"small"},on:{keyup:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.saveEdit(t)},function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:e.cancelEdit(t)}]},model:{value:t.editFieldLabel,callback:function(a){e.$set(t,"editFieldLabel",a)},expression:"col.editFieldLabel"}},[a("template",{slot:"addonAfter"},[a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"close",title:"关闭"},on:{click:function(a){return e.cancelEdit(t)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-icon",{staticStyle:{color:"#2198f7",cursor:"pointer"},attrs:{type:"check",title:"保存"},on:{click:function(a){return e.saveEdit(t)}}})],1)],2):a("p",{staticClass:"icon-small-line"},[a("span",{staticStyle:{"padding-right":"2px"}},[e._v("\n              "+e._s(t.fieldLabel)+"\n            ")]),"BindEntity"===t.refCodeType?a("a-tag",{attrs:{color:"cyan"}},[e._v("\n              对象.字段\n            ")]):e._e(),"BindFieldList"===t.refCodeType?a("a-tag",{attrs:{color:"blue"}},[e._v("\n              对象字段列表\n            ")]):e._e()],1)],1),a("a-col",{attrs:{span:t.showInput?4:6}},[t.showInput?e._e():a("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",size:"small",title:"更改该项显示标签",icon:"edit"},on:{click:function(a){return e.showEdit(t)}}}),a("a-button",{staticStyle:{color:"#f36e70"},attrs:{type:"link",size:"small",title:"删除该项",icon:"delete"},on:{click:function(t){return e.removeColumn(n)}}})],1)],1)}),1):e._e(),a("a-row",[a("a-col",{attrs:{span:"22"}},[e.selectColumns.length>0?a("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择搜索字段"},on:{change:function(t){return e.addColumn(t)}},model:{value:e.addFieldName,callback:function(t){e.addFieldName=t},expression:"addFieldName"}},e._l(e.selectColumns,function(t,n){return a("a-select-option",{key:n,attrs:{value:t.fieldName}},[e._v("\n            "+e._s(t.fieldLabel)+"["+e._s(t.fieldName)+"]\n          ")])}),1):e._e()],1)],1)]],2)},i=[],o=(a("6762"),a("2fdb"),a("ac6a"),a("75fc")),l=(a("7514"),a("2ef0")),r=a.n(l),s=a("3aa3"),c=a("b76a"),u=a.n(c),d={name:"ColumnListSelector",data:function(){return{resultColumns:[],validColumns:[],addFieldName:void 0,showAllEditFlag:!1}},methods:{initPrimaryKey:function(){if(!this.primaryKeyEvent||!this.columns||0===this.columns.length)return!1;var e=this.columns.find(function(e){return!0===e.primaryKey}),t=void 0===e?"id":e.fieldName;this.$emit("primaryKeyChange",t)},initValidColumns:function(){var e=this;if(this.columns&&this.columns.length>0){var t=this.columns;if(void 0!==this.validColumnsFilter&&(t=this.columns.filter(this.validColumnsFilter)),this.validColumns=r.a.cloneDeep(t),this.appendEditConfig(this.validColumns),this.voType){var a=this.columns[0]["tableName"];s["a"].get("/diboot/devtools/pcds/vorl/".concat(a,"/").concat(this.voType)).then(function(t){if(0===t.code&&t.data){var a,n=t.data.filter(function(e){return"BindEntity"!==e.refCodeType&&"BindEntityList"!==e.refCodeType});if(e.appendEditConfig(n),(a=e.validColumns).push.apply(a,Object(o["a"])(n)),e.value.length>0?e.resultColumns=r.a.cloneDeep(e.value):e.resultColumns=r.a.cloneDeep(e.validColumns),e.needRefEntity){var i,l=t.data.filter(function(e){return"BindEntity"===e.refCodeType&&void 0!==e.columns&&e.columns.length>0}),s=[];l.forEach(function(e){var t=e.columns.filter(function(e){return"id"!==e.fieldName&&"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&!e.columnExt.refType}),a=t.map(function(t){return t.fieldName="".concat(e.fieldName,".").concat(t.fieldName),t.fieldLabel="".concat(e.fieldLabel).concat(t.fieldLabel),t.refCodeType=e.refCodeType,t.entityFieldName=e.fieldName,t});s.push.apply(s,Object(o["a"])(a))}),e.appendEditConfig(s),(i=e.validColumns).push.apply(i,s)}}else e.value.length>0?e.resultColumns=r.a.cloneDeep(e.value):e.resultColumns=r.a.cloneDeep(e.validColumns)}).catch(function(){e.value.length>0?e.resultColumns=r.a.cloneDeep(e.value):e.resultColumns=r.a.cloneDeep(e.validColumns)})}else this.value.length>0?this.resultColumns=r.a.cloneDeep(this.value):this.resultColumns=r.a.cloneDeep(this.validColumns)}},addColumn:function(e){var t=this.validColumns.find(function(t){return t.fieldName===e});if(void 0===t)return!1;this.addFieldName=void 0,this.resultColumns.push(t),this.$emit("change",this.resultColumns)},removeColumn:function(e){var t=this.resultColumns.splice(e,1);if(t.length>0){var a=t[0],n=this.validColumns.find(function(e){return e.colName===a.colName});if(void 0!==n){var i=this.validColumns.indexOf(n);-1!==i&&(this.validColumns[i]=a)}}this.$emit("change",this.resultColumns)},appendEditConfig:function(e){e.forEach(function(e){e.showInput=!1,e.editFieldLabel=e.fieldLabel})},showAllEdit:function(){var e=this;this.showAllEditFlag=!this.showAllEditFlag,this.resultColumns&&this.resultColumns.map(function(t){e.showAllEditFlag?t.showInput=!0:e.cancelEdit(t)})},showEdit:function(e){var t=this;e.showInput=!0,setTimeout(function(){document.getElementById("".concat(t.voType,"FieldNameEditInput_").concat(e.fieldName)).focus()},200)},cancelEdit:function(e){e.editFieldLabel=e.fieldLabel,e.showInput=!1,this.focusNextColumn(e)},saveEdit:function(e){if(!e.editFieldLabel)return this.$message.error("字段标签名称不可为空"),!1;e.fieldLabel=e.editFieldLabel,e.showInput=!1,this.$emit("change",this.resultColumns),this.focusNextColumn(e)},focusNextColumn:function(e){var t=this.resultColumns.indexOf(e)+1;if(t>0&&t<this.resultColumns.length){var a=this.resultColumns[t];a.showInput?document.getElementById("".concat(this.voType,"FieldNameEditInput_").concat(a.fieldName)).focus():this.focusNextColumn(a)}},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},computed:{columns:function(){return this.initColumns?this.initColumns:this.$store.state.database.columns},selectColumns:function(){if(void 0===this.resultColumns)return[];var e=this.resultColumns.map(function(e){return e.fieldName});return this.validColumns.filter(function(t){return!e.includes(t.fieldName)})}},watch:{columns:function(){this.validColumns=[],this.resultColumns=[],this.initValidColumns(),this.initPrimaryKey()},resultColumns:function(e){this.$emit("change",e)}},components:{draggable:u.a},props:{title:{type:String,default:"数据项配置"},voType:{type:String,default:""},value:{type:Array,default:function(){return[]}},validColumnsFilter:{type:Function,default:void 0},needRefEntity:{type:Boolean,default:!0},initColumns:{type:Array,default:void 0},primaryKeyEvent:{type:Boolean,default:!1}},created:function(){this.validColumns=[],this.resultColumns=[],this.initValidColumns(),this.initPrimaryKey()}},m=d,f=(a("9a9a"),a("2877")),p=Object(f["a"])(m,n,i,!1,null,"574a18b6",null);t["a"]=p.exports},"7f57":function(e,t,a){"use strict";a("ac6a");var n=a("cebc"),i=a("2ef0"),o=a.n(i),l=a("1ca6"),r=a("2f62"),s=(a("96cf"),a("3b8d")),c=Object(r["a"])("panelDesigner"),u=c.mapState,d=c.mapMutations,m={methods:Object(n["a"])({},d(["completeValidate","addValidateMsg"]),{validate:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.uuid,console.log("start validate module",t),e.next=4,this.formValidate();case 4:if(a=e.sent,console.log("module valid",a),a){e.next=10;break}return this.addValidateMsg({uuid:t}),this.completeValidate({uuid:t}),e.abrupt("return",!1);case 10:return e.next=12,this.customValidate();case 12:if(a=e.sent,this.completeValidate({uuid:t}),a){e.next=17;break}return this.addValidateMsg({uuid:t}),e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),formValidate:function(){var e=this;return new Promise(function(t){var a=e.$refs.form;console.log("form validate ref",a),a?a.validate(function(e){t(e)}):t(!0)})},customValidate:function(){return new Promise(function(e){return e(!0)})}}),computed:Object(n["a"])({},u({validateInfo:function(e){return e.validateInfo},configMap:function(e){return e.default.moduleConfigMap}})),watch:{"validateInfo.currentModuleId":{handler:function(e){console.log("validateInfo.currentModuleId",e),console.log("validateInfo.currentModuleId uuid",this.uuid),e===this.uuid&&this.validate()},deep:!0}}},f=Object(r["a"])("panelDesigner"),p=f.mapState,h=f.mapMutations;t["a"]={data:function(){return{workspace:"panelDesigner"}},methods:Object(n["a"])({},h(["updateModuleConfigList","updateConfigMap","clearAbstractStrategys","clearAllAbstractStrategys","addAbstractStrategy","addAbstractStrategys"]),{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getAbstractStrategys:function(){return[]}}),computed:Object(n["a"])({},p({abstractPanel:function(e){return e.abstractPanel}}),{moduleConfig:{get:function(){var e=this.$store.state.panelDesigner[this.code].moduleConfigMap;return e[this.uuid]},set:function(e){var t=this.$store.state.panelDesigner[this.code].moduleConfigMap;t[this.uuid];o.a.cloneDeep(e),this.updateConfigMap({key:this.code,configMap:t})}}}),watch:{abstractPanel:{handler:function(e){if(e){var t=this.uuid,a=this.getAbstractStrategys(),n=o.a.cloneDeep(a);n.forEach(function(e){e.uuid=t}),this.addAbstractStrategys(n)}else this.clearAllAbstractStrategys()},immediate:!0}},mixins:[m],components:{eventKit:l["a"]},props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}},"7f90":function(e,t,a){},8656:function(e,t,a){"use strict";var n=a("75fc"),i=(a("ac6a"),a("cebc")),o=(a("6762"),a("2fdb"),a("2f62"));t["a"]={methods:{hasPermission:function(e){return 0===this.actionList.length||this.actionList.includes(e)}},computed:Object(i["a"])({},Object(o["f"])({mainLevel:function(e){return e.user.mainLevel}}),{actionList:function(){if(!this.mainLevel||!this.mainLevel.permissions||0===this.mainLevel.permissions.length)return[];var e=[];return this.mainLevel.permissions.forEach(function(t){t.actionList&&t.actionList.length>0&&e.push.apply(e,Object(n["a"])(t.actionList))}),e}})}},"8d31":function(e,t,a){"use strict";var n=a("11ea"),i=a.n(n);i.a},"9a9a":function(e,t,a){"use strict";var n=a("0dc0"),i=a.n(n);i.a},"9bbb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("title-line-config",{attrs:{code:e.code,"project-type":e.projectType},model:{value:e.moduleConfig,callback:function(t){e.moduleConfig=t},expression:"moduleConfig"}})],1)},i=[],o=a("e5b5"),l=a("527d"),r={name:"TitleLineConfig",mixins:[o["a"]],components:{titleLineConfig:l["a"]}},s=r,c=(a("a63e"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,"0cf47b87",null);t["default"]=u.exports},a63e:function(e,t,a){"use strict";var n=a("238b"),i=a.n(n);i.a},aebb:function(e,t,a){},b023:function(e,t,a){"use strict";a.d(t,"b",function(){return h}),a.d(t,"a",function(){return g});var n="entity_without_sys",i="entity_tree",o="entity_has_ref",l="entity_has_ref_tree",r="entity_has_ref_dict",s="entity_has_ref_table",c="field_without_sys",u="field_entity_tree",d="field_entity_has_ref",m="field_entity_has_ref_tree",f="field_entity_has_ref_dict",p="field_entity_has_ref_table",h={entity_without_sys:n,entity_tree:i,entity_has_ref:o,entity_has_ref_tree:l,entity_has_ref_dict:r,entity_has_ref_table:s,field_without_sys:c,field_entity_tree:u,field_entity_has_ref:d,field_entity_has_ref_tree:m,field_entity_has_ref_dict:f,field_entity_has_ref_table:p},g={primaryKey:"primaryKey",createTime:"createTime",showField:"showField",filter:"filter"}},b57a:function(e,t,a){"use strict";var n=a("085b"),i=a("1ca6");t["a"]={data:function(){return{moduleConfig:{}}},methods:{filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},watch:{moduleConfig:{handler:function(e){this.$emit("input",e)},deep:!0,immediate:!0},value:{handler:function(e){this.moduleConfig=e},deep:!0,immediate:!0}},components:{propsKit:n["a"],eventKit:i["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},projectType:{type:String,required:!0},value:{type:Object,default:function(){return{}}}}}},b5d1:function(e,t,a){},c5a0:function(e,t,a){"use strict";var n=a("7f90"),i=a.n(n);i.a},e5b5:function(e,t,a){"use strict";var n=a("cebc"),i=a("2ef0"),o=a.n(i),l=a("2f62"),r=a("1ca6"),s=a("80da"),c=Object(l["a"])("DragConfig"),u=c.mapMutations;t["a"]={data:function(){return{workspace:"DragConfig"}},methods:Object(n["a"])({},u(["updateModuleConfigList","updateConfigMap"])),computed:{moduleConfig:{get:function(){var e=this.$store.state.DragConfig[this.code].moduleConfigMap;return e[this.uuid]},set:function(e){var t=this.$store.state.DragConfig[this.code].moduleConfigMap;t[this.uuid];o.a.cloneDeep(e),this.updateConfigMap({key:this.code,configMap:t})}}},components:{eventKit:r["a"]},mixins:[s["a"]],props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}}}]);