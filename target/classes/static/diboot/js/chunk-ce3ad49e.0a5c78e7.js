(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce3ad49e"],{"03cd":function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function i(){var e=document.documentElement;return"requestFullscreen"in e||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"msRequestFullscreen"in e&&document.msFullscreenEnabled||"webkitRequestFullScreen"in e}function r(){return!!(document.fullscreen||document.mozFullScreen||document.fullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen)}function a(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.log("Fullscreen API is not supported.")}function o(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Fullscreen API is not supported.")}function s(e){document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),document.addEventListener("webkitfullscreenchange",e)}function c(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),document.removeEventListener("webkitfullscreenchange",e)}function u(){var e={},t=!1,n=0,i=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);n<i;n++){var r=arguments[n];!function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=u(!0,e[i],n[i]):e[i]=n[i])}(r)}return e}t.b=i,t.c=r,t.g=a,t.d=o,t.f=s,t.e=c,t.a=u},function(e,t,n){"use strict";function i(){return n.i(s.c)()}function r(e,t,n){u&&(void 0===n?i()?o():a(e,t):n?a(e,t):o())}function a(){function e(){var t=i();t||(n.i(s.e)(e),a.classList.remove(r.fullscreenClass),r.wrap&&(o.parentNode.insertBefore(a,o),o.parentNode.removeChild(o))),r.callback&&r.callback(t)}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,r=arguments[1];if(u&&!i()){r=n.i(s.a)(!0,{},c,r);var a=t,o=void 0;r.wrap&&(o=document.createElement("div"),o.style["overflow-y"]="auto",o.style.background=r.background,o.style.width="100%",o.style.height="100%",a.parentNode.insertBefore(o,a),o.appendChild(a),o.addEventListener("click",function(e){e.target===this&&n.i(s.d)()})),a.classList.add(r.fullscreenClass),n.i(s.f)(e),n.i(s.g)(r.wrap?o:a)}}function o(){u&&i()&&n.i(s.d)()}var s=n(0),c={wrap:!0,background:"#333",callback:function(){},fullscreenClass:"fullscreen"},u=n.i(s.b)();t.a={getState:i,support:u,toggle:r,enter:a,exit:o}},function(e,t,n){var i=n(5)(n(4),n(6),null,null);e.exports=i.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n.n(i),a=n(1),o=n(0);t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name||"fullscreen";e.component(i,n.i(o.a)(r.a,{name:i})),e.prototype["$"+i]=a.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default={props:{background:{type:String,default:"#333"},fullscreenClass:{type:String,default:"fullscreen"},fullscreen:{type:Boolean,default:!1}},data:function(){return{supportFullScreen:!1,isFullscreen:!1}},computed:{wrapperStyle:function(){return{background:this.background,"overflow-y":"auto",width:"100%",height:"100%"}}},methods:{toggle:function(e){void 0===e?n.i(i.c)()?this.exit():this.enter():e?this.enter():this.exit()},enter:function(){this.supportFullScreen&&(n.i(i.f)(this.fullScreenCallback),n.i(i.g)(this.$el))},exit:function(){this.supportFullScreen&&this.getState()&&n.i(i.d)()},getState:function(){return n.i(i.c)()},shadeClick:function(e){e.target===this.$el&&this.exit()},fullScreenCallback:function(){this.isFullscreen=n.i(i.c)(),this.isFullscreen||n.i(i.e)(this.fullScreenCallback),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen)}},watch:{fullscreen:function(e){e!==n.i(i.c)()&&(e?this.enter():this.exit())}},created:function(){this.supportFullScreen=n.i(i.b)()}}},function(e,t){e.exports=function(e,t,n,i){var r,a=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(r=e,a=e.default);var s="function"==typeof a?a.options:a;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),n&&(s._scopeId=n),i){var c=Object.create(s.computed||null);Object.keys(i).forEach(function(e){var t=i[e];c[e]=function(){return t}}),s.computed=c}return{esModule:r,exports:a,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.isFullscreen?[e.fullscreenClass]:[],style:e.isFullscreen?[e.wrapperStyle]:[],on:{click:function(t){return e.shadeClick(t)}}},[e._t("default")],2)},staticRenderFns:[]}}])})},"09d9":function(e,t,n){"use strict";var i=n("57a57"),r=n.n(i);r.a},"10d0":function(e,t,n){"use strict";var i=n("d565"),r=n.n(i);r.a},"26ee":function(e,t,n){},"2a56":function(e,t,n){},"2c07":function(e,t,n){"use strict";var i=n("a9e0"),r=n.n(i);r.a},"381a":function(e,t,n){"use strict";var i="0123456789",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a="~!@#$%^*()_+-=[]{}|;:,./<>?";function o(e,t){e||(e=8),t||(t={});var n="",o="";!0===t?n=i+r+a:"string"==typeof t?n=t:(!1!==t.numbers&&(n+="string"==typeof t.numbers?t.numbers:i),!1!==t.letters&&(n+="string"==typeof t.letters?t.letters:r),t.specials&&(n+="string"==typeof t.specials?t.specials:a));while(e>0)e--,o+=n[Math.floor(Math.random()*n.length)];return o}e.exports=o.default=o},"44a4":function(e,t,n){"use strict";var i=n("4764"),r=n.n(i);r.a},4764:function(e,t,n){},4999:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",[n("a-row",{attrs:{slot:"title"},slot:"title"},[n("a-col",{attrs:{span:18}},[n("a-input-search",{attrs:{placeholder:"搜索（表名或备注）..."},on:{change:e.onSearch},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),n("a-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[e.hideInitTable?n("a-tag",{attrs:{color:"cyan"}},[e._v("已隐藏预置表")]):n("a-switch",{attrs:{checkedChildren:"已显示预置表",unCheckedChildren:"已隐藏预置表","default-checked":e.showInitTables},on:{change:function(t){return e.$store.commit("database/setShowInitTables",t)}}})],1)],1),e.showEmptyCard?n("a-card-grid",{staticClass:"db-main",staticStyle:{width:"25%","text-align":"left",cursor:"pointer","overflow-x":"hidden"},attrs:{title:"添加自定义空白页，用于非常规CRUD页面生成"},on:{click:function(t){return e.onTableChanged("CUSTOM_PAGE__")}}},[n("div",{staticClass:"title",staticStyle:{color:"#5387f3"}},[n("a-icon",{attrs:{type:"plus"}}),e._v(" 自定义页面")],1),n("div",{staticClass:"desc"},[e._v(" ")])]):e._e(),e._l(e.validTables,function(t){return n("a-card-grid",{key:t.tableName,staticClass:"db-main",staticStyle:{width:"25%","text-align":"left",cursor:"pointer","overflow-x":"hidden"},attrs:{title:"基于主表 "+t.tableName+" 生成CRUD页"},on:{click:function(n){return e.onTableChanged(t.tableName)}}},[n("div",{staticClass:"title"},[e._v(e._s(t.tableName))]),n("div",{staticClass:"desc"},[e._v(e._s(t.objName||"-"))])])})],2)],1)},r=[],a=n("cebc"),o=n("2f62"),s={name:"TableListSearch",data:function(){return{searchVal:""}},methods:Object(a["a"])({},Object(o["e"])(["database/resetDatabase"]),{onSearch:function(){this.$store.dispatch("database/searchTables",this.searchVal)},onTableChanged:function(e){this.$emit("tableChanged",e)}}),computed:Object(a["a"])({},Object(o["f"])({showInitTables:function(e){return e.database.showInitTables},visibleTables:function(e){return e.database.visibleTables}}),{validTables:function(){return this.visibleTables&&this.visibleTables.length>0&&void 0!==this.showInitTables&&null!==this.showInitTables?this.showInitTables&&!this.hideInitTable?this.visibleTables:this.visibleTables.filter(function(e){return!0===e.editable}):[]}}),mounted:function(){this["database/resetDatabase"](),this.$store.dispatch("database/GetTables").then(function(){})},props:{hideInitTable:{type:Boolean,default:!1},showEmptyCard:{type:Boolean,default:!0}}},c=s,u=n("2877"),l=Object(u["a"])(c,i,r,!1,null,null,null);t["a"]=l.exports},"4afa":function(e,t,n){"use strict";var i=n("2a56"),r=n.n(i);r.a},5274:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{domProps:{innerHTML:e._s(e.content)}})},r=[],a={name:"RichRender",model:{prop:"content",event:"change"},props:{content:{type:String,default:""}}},o=a,s=n("2877"),c=Object(s["a"])(o,i,r,!1,null,null,null);t["a"]=c.exports},"57a57":function(e,t,n){},6892:function(e,t,n){"use strict";var i=n("2b0e"),r=new i["default"];t["a"]=r},"77b3":function(e,t,n){var i={"./detailPanel/config.vue":["0700","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","designerModuleConfig0"],"./formPanel/config.vue":["dc8e","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig1"],"./listPanel/config.vue":["fb01","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig2"],"./noticeBar/config.vue":["ef7a","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig3"],"./search/config.vue":["2a5f","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig4"],"./titleLine/config.vue":["21f1","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig5"]};function r(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(i)},r.id="77b3",e.exports=r},"8d75":function(e,t,n){},"95e4":function(e,t,n){"use strict";var i=n("8d75"),r=n.n(i);r.a},a9e0:function(e,t,n){},d3c3:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-main"},[e.loadTableFlag?e._e():n("div",{staticClass:"tableListSearch",class:{initial:e.initial,complete:!e.initial,middleState:!e.initial&&!e.loadTableFlag}},[e.initial?n("a-row",[n("a-col",{attrs:{span:24}},[n("h2",{staticClass:"tableListSearch__title"},[e._v("选择主表开始生成（先生成后端代码）")])])],1):e._e(),n("table-list-search",{attrs:{"show-empty-card":!1,"hide-init-table":!0},on:{tableChanged:function(t){return e.changeCurrentTable(t)}}})],1),n("div",{staticClass:"designer-container",class:{complete:e.loadTableFlag}},[n("a-form-model",{ref:"formModel",staticClass:"main-form",staticStyle:{background:"#e8f1ff"},attrs:{model:e.model,layout:"inline"}},[n("div",[n("a-form-model-item"),n("a-form-model-item",[n("a-tag",{attrs:{color:"#87d068"}},[e._v("\n            "+e._s(e.currentTableObj.tableName)+"["+e._s(e.currentTableObj.objName)+"]\n          ")]),n("a-button",{attrs:{disabled:!e.recentVersion,type:"link",size:"small",icon:"history",title:"恢复上次的快照配置"},on:{click:function(t){return e.loadRecentVersionConfig()}}},[e._v("\n            恢复快照\n          ")]),n("a-popconfirm",{attrs:{placement:"bottomRight","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.reload()}}},[n("template",{slot:"title"},[n("p",{staticStyle:{"margin-bottom":"0"}},[e._v("您确定切换到其他表吗？")]),n("p",{staticStyle:{"margin-bottom":"0",color:"#fc5352"}},[e._v("这将丢失当前配置！")])]),n("a-button",{attrs:{type:"link",size:"small",icon:"switcher",title:"切换到其他表"}},[e._v("切换表")])],2)],1),n("a-form-model-item",{attrs:{label:"所在目录"}},[n("a-tag",[e._v("/pages/"+e._s(e.currentTableObj.instClassName))])],1)],1),e.initial?e._e():n("a-form-model-item",[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:["f_pc_page_generate"],expression:"['f_pc_page_generate']"}],attrs:{type:"primary",loading:e.loading,icon:"snippets"},on:{click:e.generate}},[e._v("\n          生成代码\n        ")]),n("a-button",{directives:[{name:"permission-missing",rawName:"v-permission-missing",value:["f_pc_page_generate"],expression:"['f_pc_page_generate']"}],attrs:{type:"primary",loading:e.loading,icon:"snippets"},on:{click:function(t){e.subscribeSuccess?e.generate():e.$refs.nonePermissionModal.open()}}},[e._v("\n          生成代码\n        ")])],1)],1),n("fs",{ref:"fullscreen",attrs:{wrap:!0},on:{change:e.fullscreenChange}},[e.currentPanes&&e.currentPanes.length>0?n("a-tabs",{attrs:{id:"designer-main",type:"editable-card",hideAdd:!0,"tab-bar-gutter":12},on:{edit:e.onEdit},model:{value:e.currentPaneKey,callback:function(t){e.currentPaneKey=t},expression:"currentPaneKey"}},[e._l(e.currentPanes,function(t){return[n("a-tab-pane",{key:t.code,attrs:{"force-render":!0,closable:t.closable}},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:t.icon}}),e._v("\n              "+e._s(t.name)+"\n            ")],1),n("mobile-designer",{ref:"pc_designer_"+t.code,refInFor:!0,attrs:{code:t.code,"init-module-mark-list":t.moduleList,"init-module-list":e.initModuleListMap[t.code],"project-type":e.model.projectType},on:{add:e.addModule,remove:e.removeModule,change:function(n){return e.moduleListChanged(t.code,n)}}})],1)]}),n("template",{slot:"tabBarExtraContent"},[n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"添加",type:"plus"},on:{click:e.addPane}}),n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"全屏/取消",type:e.fullscreen?"fullscreen-exit":"fullscreen"},on:{click:e.toggle}})],1)],2):e._e()],1)],1),n("none-permission-modal",{ref:"nonePermissionModal",on:{subscribeSuccess:function(t){e.subscribeSuccess=!0}}})],1)},r=[],a=(n("7f7f"),n("75fc")),o=(n("ac6a"),n("96cf"),n("3b8d")),s=(n("7514"),n("6762"),n("2fdb"),n("cebc")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-layout",{staticClass:"layout-container"},[n("a-layout-sider",{staticClass:"layout-sider-container sider-left",staticStyle:{margin:"0"},attrs:{width:e.sidebarState.left?260:0}},[n("source-tabs",{attrs:{"current-module":e.currentModule,code:e.code}})],1),n("a-layout-content",{staticStyle:{background:"#fff"}},[n("div",{staticClass:"layout-content-container"},[n("div",{staticStyle:{color:"#d3d3d3",position:"absolute",left:"50%",transform:"translateX(-50%)"}},[e._v("移动端页面展示存在差异，具体以实际生成为准")]),n("div",{staticClass:"module-modal"},[n("work-panel",{ref:"workPanel",attrs:{type:"root",code:e.code,"project-type":e.projectType,"before-module-join-validate":e.beforeModuleJoinValidate},on:{add:function(t){return e.$emit("add",t)},remove:function(t){return e.$emit("remove",t)}},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}})],1),n("div",{staticClass:"expand-btn expand-left",attrs:{title:e.sidebarState.left?"收起":"展开"},on:{click:function(t){e.sidebarState.left=!e.sidebarState.left}}},[e.sidebarState.left?n("a-icon",{attrs:{type:"double-left"}}):n("a-icon",{attrs:{type:"double-right"}})],1),n("div",{staticClass:"expand-btn expand-right",attrs:{title:e.sidebarState.right?"收起":"展开"},on:{click:function(t){e.sidebarState.right=!e.sidebarState.right}}},[e.sidebarState.right?n("a-icon",{attrs:{type:"double-right"}}):n("a-icon",{attrs:{type:"double-left"}})],1)])]),n("a-layout-sider",{staticClass:"layout-sider-container sider-right",attrs:{width:e.sidebarState.right?360:0}},[n("config-page",{attrs:{"project-type":e.projectType,code:e.code}})],1)],1)],1)},u=[],l=n("b76a"),d=n.n(l),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-container"},[n("a-tabs",{model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[n("a-tab-pane",{key:"config_1",attrs:{tab:"组件属性"}},[n("div",{staticClass:"config-container"},e._l(e.moduleConfigMap,function(t){return n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:!!e.currentModule.uuid&&e.currentModule.uuid===t.uuid,expression:"!!currentModule.uuid && currentModule.uuid === item.uuid"}],key:t.uuid,tag:"component",attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType}})}),1)]),n("a-tab-pane",{key:"config_2",attrs:{tab:"页面配置","force-render":!0}},[n("page-style-config",{staticClass:"config-container",attrs:{projectType:e.projectType,code:e.code}})],1)],1)],1)},p=[],g=n("6892"),h=n("2f62"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pageConfig"},[n("a-form",{attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title"},[e._v("\n        页面标题\n      ")]),n("a-row",[n("a-col",{attrs:{span:23}},[n("a-form-item",{staticClass:"form-line"},[n("a-textarea",{attrs:{placeholder:"请输入页面标题..."},model:{value:e.styleConfig.title,callback:function(t){e.$set(e.styleConfig,"title",t)},expression:"styleConfig.title"}})],1)],1)],1)],1)],1)},b=[],v=n("1bed"),M={name:"PageStyleConfig",components:{colorPicker:v["a"]},computed:{styleConfig:function(){return this.$store.state.DragMobileConfig[this.code].styleConfig}},methods:{handleChangeNavbar:function(e){e||this.$store.commit("DragMobileConfig/updateStyleConfig",{key:this.code,styleConfig:{title:this.styleConfig.title,customNavbar:!1}})}},props:{code:{type:String,default:""},projectType:{type:String,required:!0}}},C=M,y=(n("4afa"),n("2877")),k=Object(y["a"])(C,m,b,!1,null,"5e2c3b6a",null),w=k.exports,x={name:"ConfigPage",data:function(){return{panelActiveKey:"config_1",showConfigPannel:!0,componentMap:{}}},methods:{removeCurrentModule:function(){this.$emit("removeCurrentModule")},loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("77b3")("./".concat(e.mark,"/config.vue"))})}},watch:{currentModule:function(e){this.loadModule(e)}},computed:Object(s["a"])({},Object(h["f"])({panelWidthType:function(e){return e.customProperties.designer.configPanelWidthType}}),{currentModule:function(){return this.$store.state.DragMobileConfig[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.DragMobileConfig[this.code].moduleConfigMap}}),components:{PageStyleConfig:w},props:{code:{type:String,required:!0},projectType:{type:String,required:!0}},created:function(){var e=this;g["a"].$on("switchModuleConfigPanel_".concat(this.code),function(){e.panelActiveKey="config_1"})}},L=x,_=(n("44a4"),Object(y["a"])(L,f,p,!1,null,"607adb8b",null)),S=_.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mobile-wrapper"},[n("van-nav-bar",{style:e.styleConfig,attrs:{title:e.styleConfig.title,"left-arrow":""}},["list"===e.code&&e.funcList.includes("create")?n("template",{slot:"right"},[n("van-icon",{attrs:{name:"plus",color:"#19be6b"}}),n("span",{staticStyle:{color:"#19be6b"}},[e._v("新建")])],1):e._e()],2),n("draggable",{staticClass:"module-screen",class:{root:"root"===e.type,null:!e.targetList||0===e.targetList.length,preview:"preview"===e.code},attrs:{element:"div","ghost-class":"sortable-ghost",animation:340,options:{group:{name:"compgroup",pull:!1},sort:!0}},on:{add:e.addModule},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}},e._l(e.targetList,function(t,i){return n("div",{key:t.uuid,staticClass:"component-box",class:{current:e.currentModule.uuid===t.uuid}},[t.uuid?n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"item.hidden === undefined || !item.hidden"}],key:t.uuid,tag:"component",staticClass:"preview-element",class:{current:e.currentModule.uuid===t.uuid},attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType},nativeOn:{click:function(n){return n.stopPropagation(),e.changeCurrentModule(n,t)}}}):e._e(),n("div",{staticClass:"component-item-operate-box",class:{right:"left"!==e.previewBtnGroupAlign,left:"left"===e.previewBtnGroupAlign}},["layoutc"!==t.mark?n("a",{staticClass:"btn-icon",attrs:{title:"复制",href:"javascript:;"},on:{click:function(n){return n.stopPropagation(),e.copyModule(t,i)}}},[n("a-icon",{attrs:{type:"copy"}})],1):e._e(),n("a",{staticClass:"btn-icon",attrs:{title:"删除",href:"javascript:;"},on:{click:function(t){return t.stopPropagation(),e.removeModule(i)}}},[n("a-icon",{attrs:{type:"delete"}})],1)])],1)}),0)],1)},O=[],T=n("381a"),$=n.n(T),P=n("2ef0"),D=n.n(P),R=Object(h["a"])("DragMobileConfig"),F=R.mapMutations,E=R.mapActions,N={name:"WorkPanel",data:function(){return{targetList:[],componentMap:{}}},methods:Object(s["a"])({},F(["setModuleConfig","removeConfig","updateConfigMap","updateCurrentModule"]),E({modifyCurrentModule:"modifyCurrentModule",setModuleConfig:"setModuleConfig"}),{addModule:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item._underlying_vm_,i={mark:n.mark},r=this.beforeModuleJoinValidate(i),!r||r.valid){e.next=6;break}return this.$message.warning(r.msg),e.abrupt("return",!1);case 6:return a=t.newIndex,e.next=9,this.addModuleObj(i,a);case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addModuleObj:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n,i){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return void 0===t.uuid&&(t.uuid=$()(16,{numbers:!1})),this.loadModule(t),e.next=4,this.modifyCurrentModule({key:this.code,module:t});case 4:r=void 0!==i&&i?0:1,this.targetList.splice(n,r,t),this.targetList=this.targetList.filter(function(e){return void 0!==e.uuid}),this.$emit("add",t),this.$emit("input",this.targetList),this.$forceUpdate();case 10:case"end":return e.stop()}},e,this)}));function t(t,n,i){return e.apply(this,arguments)}return t}(),autoAppendModule:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find(function(e){return e.mark===t}),void 0===n){e.next=3;break}return e.abrupt("return",!1);case 3:return i={mark:t,hidden:!0},e.next=6,this.addModuleObj(i,0,!0);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),copyModule:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=D.a.cloneDeep(t),i.uuid=$()(16,{numbers:!1}),r=D.a.cloneDeep(this.moduleConfigMap[t.uuid]),r.uuid=i.uuid,this.setModuleConfig({key:this.code,uuid:i.uuid,config:r}),this.targetList.splice(n+1,0,i),a=D.a.cloneDeep(this.targetList),e.next=9,this.modifyCurrentModule({key:this.code,module:i});case 9:this.$emit("add",i),this.$emit("input",a),this.$forceUpdate();case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),removeModule:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=D.a.cloneDeep(this.targetList[t]),i=void 0!==this.targetList[t-1]?this.targetList[t-1]:this.targetList[t+1],void 0===i){e.next=5;break}return e.next=5,this.modifyCurrentModule({key:this.code,module:i});case 5:r=this.targetList[t]["uuid"],this.removeConfig({key:this.code,uuid:r}),this.targetList.splice(t,1),a=D.a.cloneDeep(this.targetList),this.$emit("remove",{m:n,targetList:a}),this.$emit("input",a);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("d910")("./".concat(e.mark,"/index.vue"))})},autoRemoveModule:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find(function(e){return e.mark===t}),void 0!==n){e.next=3;break}return e.abrupt("return",!1);case 3:if(i=this.targetList.indexOf(n),-1!==i){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,this.removeModule(i);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),autoSetModuleConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n,i){var r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.targetList.find(function(e){return e.mark===t}),void 0!==r){e.next=4;break}return e.next=4,this.autoAppendModule(t);case 4:if(r=this.targetList.find(function(e){return e.mark===t}),void 0!==r){e.next=7;break}return e.abrupt("return",!1);case 7:a=r.uuid,o=this.$store.state.DragConfig[this.code].moduleConfigMap,o[a]=n,this.updateConfigMap({key:this.code,configMap:o}),i&&i(r);case 12:case"end":return e.stop()}},e,this)}));function t(t,n,i){return e.apply(this,arguments)}return t}(),changeCurrentModule:function(e,t){"layoutc"!==t.mark&&e.preventDefault(),this.modifyCurrentModule({key:this.code,module:t}),g["a"].$emit("switchModuleConfigPanel_".concat(this.code))},clearAllModuleList:function(){this.targetList=[]},clearModuleListConfig:function(e){var t=this;!e||e.length<0||e.forEach(function(e){t.removeModuleConfig(e)})},removeModuleConfig:function(e){this.removeConfig({key:this.code,uuid:e.uuid})},initTargetList:function(e){var t=this;if(!e||0===e.length)return!1;e.forEach(function(e){t.loadModule(e)}),this.targetList=e,this.targetList.forEach(function(e){t.updateCurrentModule({key:t.code,module:e})})}}),watch:{targetList:function(e){"preview"!==this.code&&this.$emit("input",e)}},computed:Object(s["a"])({},Object(h["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign},funcList:function(e){return e.DragMobileConfig.commonConfig.funcList}}),{currentModule:function(){return this.$store.state.DragMobileConfig[this.code].currentModule},styleConfig:function(){return this.$store.state.DragMobileConfig[this.code].styleConfig},moduleConfigMap:function(){return this.$store.state.DragMobileConfig[this.code].moduleConfigMap}}),mounted:function(){this.targetList=D.a.cloneDeep(this.value)},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},code:{type:String,default:""},projectType:{type:String,required:!0},beforeModuleJoinValidate:{type:Function,default:function(){return{valid:!0}}}},components:{draggable:d.a},created:function(){var e=this;"root"===this.type&&(g["a"].$on("autoAppendModule_".concat(this.code),function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoAppendModule(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),g["a"].$on("autoRemoveModule_".concat(this.code),function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoRemoveModule(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),g["a"].$on("autoSetModuleConfig_".concat(this.code),function(t){var n=t.mark,i=t.moduleConfig,r=t.callback;e.autoSetModuleConfig(n,i,r)}))},destroyed:function(){this.clearModuleListConfig(this.targetList),"root"===this.type&&(g["a"].$off("autoAppendModule_".concat(this.code)),g["a"].$off("autoRemoveModule_".concat(this.code)),g["a"].$off("autoSetModuleConfig_".concat(this.code)))}},I=N,A=(n("09d9"),Object(y["a"])(I,j,O,!1,null,"3f3c6214",null)),V=A.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-container designer-tabs-container"},[n("a-tabs",{attrs:{"default-active-key":"default"}},[n("a-tab-pane",{key:"default",attrs:{tab:"基础组件"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showLeftSidebar,expression:"showLeftSidebar"}],staticClass:"modules-box"},[e._l(e.sourceList,function(t,i){return[n("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"s.hidden === undefined || !s.hidden"}],key:t+"_"+i},[n("h3",{staticClass:"title-line"},[e._v(e._s(t.name))]),n("draggable",{attrs:{element:"a-row","ghost-class":"sortable-ghost",options:{group:{name:"compgroup",pull:"clone",put:!1},sort:!1}},model:{value:t.list,callback:function(n){e.$set(t,"list",n)},expression:"s.list"}},[e._l(t.list,function(t){return[n("div",{key:t.mark,staticClass:"module-item",class:{current:e.currentModule.mark===t.mark}},[n("p",{staticClass:"item-line"},[n("span",{staticClass:"item-icon"},[n("a-icon",{attrs:{type:t.icon}})],1),e._v("\n                    "+e._s(t.name)+"\n                  ")])])]})],2)],1)]})],2)])],1)],1)},q=[],z=[{name:"列表页组件",code:"list",list:[{name:"列表组件",icon:"unordered-list",mark:"listPanel"}]},{name:"表单页组件",code:"form",list:[{name:"表单组件",icon:"form",mark:"formPanel"}]},{name:"详情页组件",code:"detail",list:[{name:"详情信息",icon:"more",mark:"detailPanel"}]}],K={name:"SourceTabs",computed:{sourceList:function(){var e=this;return z.filter(function(t){return void 0===t.code||t.code===e.code})}},components:{draggable:d.a},props:{code:{type:String,required:!0},currentModule:{type:Object,default:function(){}},showLeftSidebar:{type:Boolean,default:!0}}},G=K,U=(n("10d0"),Object(y["a"])(G,B,q,!1,null,"7ce712d4",null)),J=U.exports,Y=Object(h["a"])("DragMobileConfig"),W=Y.mapMutations,H={name:"MobileDesigner",data:function(){return{targetList:[],sidebarState:{left:!0,right:!0}}},methods:Object(s["a"])({},W(["resetMobileDesigner","updateConfigMap","updateStyleConfig"]),{setModuleList:function(e){this.targetList=e},toggleSidebar:function(e){this.sidebarState[e]=!this.sidebarState[e]},beforeModuleJoinValidate:function(e){var t=e.mark;if("detailPanel"===t){var n=this.targetList.find(function(e){return e.mark===t});return n?{valid:!1,msg:"当前组件不允许重复添加"}:{valid:!0}}return{valid:!0}},reset:function(){this.targetList=[],this.resetMobileDesigner(this.code),this.$refs.workPanel.clearAllModuleList()},resetData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.moduleList,i=t.configMap,r=t.styleConfig,this.reset(),e.next=4,this.nextTick();case 4:return e.next=6,this.setData({moduleList:n,configMap:i,styleConfig:r});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.moduleList,i=t.configMap,r=t.styleConfig,this.updateConfigMap({key:this.code,configMap:i}),this.updateStyleConfig({key:this.code,styleConfig:r}),!(n&&n.length>0)){e.next=12;break}a=0;case 5:if(!(a<n.length)){e.next=12;break}return o=n[a],e.next=9,this.$refs.workPanel.addModuleObj(o,a);case 9:a++,e.next=5;break;case 12:console.log(this.$store.state.DragMobileConfig[this.code]);case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),nextTick:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){t()})})}}),watch:{targetList:function(e,t){1!==t.length||2!==e.length||e[0].uuid||(e[0]=t[0]),this.$emit("change",e)}},computed:{sourceList:function(){var e=this;return z.filter(function(t){return void 0===t.code||t.code===e.code})},currentModule:function(){return this.$store.state.DragMobileConfig[this.code].currentModule}},components:{draggable:d.a,sourceTabs:J,"work-panel":V,"config-page":S},props:{code:{type:String,required:!0},initModuleList:{type:Array,required:!1,default:void 0},initModuleMarkList:{type:Array,required:!1,default:void 0},projectType:{type:String,required:!0}},mounted:function(){this.$nextTick(Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.initModuleList,!(void 0!==t&&t.length>0)){e.next=7;break}return this.targetList=this.initModuleList,e.next=5,this.$refs.workPanel.initTargetList(t);case 5:e.next=16;break;case 7:if(void 0===this.initModuleMarkList){e.next=16;break}n=0;case 9:if(!(n<this.initModuleMarkList.length)){e.next=16;break}return i=this.initModuleMarkList[n],e.next=13,this.$refs.workPanel.addModuleObj({mark:i},n);case 13:n++,e.next=9;break;case 16:case"end":return e.stop()}},e,this)})))},created:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}}},X=H,Q=(n("95e4"),Object(y["a"])(X,c,u,!1,null,"1ed0f042",null)),Z=Q.exports,ee=n("3aa3"),te=n("4999"),ne=[{code:"list",name:"列表页",icon:"unordered-list",funcList:["list"],moduleList:["listPanel"],closable:!1},{code:"form",name:"表单页",icon:"form",funcList:["create","update"],moduleList:["formPanel"],closable:!0},{code:"detail",name:"详情页",icon:"info-circle",funcList:["detail"],moduleList:["detailPanel"],closable:!0}],ie=n("03cd"),re=n.n(ie),ae=n("2b0e"),oe=n("3e16"),se=n("fa62"),ce=n("c1df"),ue=n.n(ce);ae["default"].use(re.a,{name:"fs"});var le={name:"MobileDesignerIndex",inject:["reload"],data:function(){return{initial:!0,loadTableFlag:!1,popoverVisible:!1,saveSnapshot:!0,snapshotLoading:!1,subscribeSuccess:!1,initModuleListMap:{},currentPaneKey:"list",moduleListMap:{},router:void 0,menuList:[],fullscreen:!1,loading:!1,oldFuncListSize:0,recentVersion:void 0,model:{projectType:"",parentMenuCode:"",currentMenuName:"",storageVersion:""}}},methods:Object(s["a"])({},Object(h["e"])(["DragMobileConfig/addFunc","DragMobileConfig/removeFunc","database/resetDatabase","DragMobileConfig/resetMobileDesigner","DragMobileConfig/updateFuncList","DragMobileConfig/updateCommonConfig","DragMobileConfig/updateCurrentModule","panelDesigner/batchAddConfigMap"]),Object(h["c"])(["database/switchTable","DragMobileConfig/loadProjectType"]),{addModule:function(e){if(this.snapshotLoading)return!1;if("tableOperate"===e.mark){var t=this.funcList.filter(function(e){return!["create","import","export"].includes(e)});t.push.apply(t,["create","import","export"]),this["DragMobileConfig/updateFuncList"](t)}},removeModule:function(e){var t=e.m,n=e.targetList;if("tableOperate"===t.mark){var i=n.find(function(e){return e.mark===t.mark});if(void 0===i){var r=this.funcList.filter(function(e){return!["create","import","export"].includes(e)});this["DragMobileConfig/updateFuncList"](r)}}},changeCurrentTable:function(e){var t=this;this["database/switchTable"](e).then(function(){t.initial=!1,t.model.currentMenuName="".concat(t.tableObj[e].classLabel,"管理"),t.loadRecentVersionList(e),setTimeout(function(){t.loadTableFlag=!0},320)})},loadRecentVersionList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={tableName:t},e.prev=1,e.next=4,ee["a"].get("/diboot/devtools/mbdc/rctl",n);case 4:i=e.sent,0===i.code&&i.data&&i.data.length>0?(this.recentVersionList=i.data,this.recentVersion=i.data[0]):(this.recentVersion=void 0,this.recentVersionList=[]),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log("加载最新版本快照失败",e.t0),this.recentVersion=void 0;case 12:case"end":return e.stop()}},e,this,[[1,8]])}));function t(t){return e.apply(this,arguments)}return t}(),loadRecentVersionConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r,a,o,s,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.recentVersion,n=t.panelName,i=t.configData,i){e.next=4;break}return this.$message.warning("加载当前版本失败"),e.abrupt("return",!1);case 4:return e.prev=4,this.snapshotLoading=!0,r=JSON.parse(i),console.log("..",r),a=r.pageConfig,o=r.commonConfig,s=r.panelConfig,this["DragMobileConfig/updateCommonConfig"]({key:"commonConfig",config:o}),e.next=12,this.nextTick();case 12:e.t0=regeneratorRuntime.keys(a);case 13:if((e.t1=e.t0()).done){e.next=30;break}return u=e.t1.value,void 0===c&&(c=u),this.currentPaneKey=u,e.next=19,this.nextTick();case 19:return l=a[u],e.prev=20,e.next=23,this.resetDesignerConfig(u,l);case 23:e.next=28;break;case 25:e.prev=25,e.t2=e["catch"](20),console.log("重置出错",u,e.t2);case 28:e.next=13;break;case 30:return e.next=32,this.nextTick();case 32:return this["panelDesigner/batchAddConfigMap"]({key:"preview",configMap:s.moduleConfigMap}),e.next=35,this.nextTick();case 35:this.saveSnapshot=!0,this.model.storageVersion=n,this.popoverVisible=!1,void 0!==c&&(this.currentPaneKey=c),e.next=46;break;case 41:e.prev=41,e.t3=e["catch"](4),console.log("加载当前页面配置版本失败",e.t3),this.$message.error("加载当前页面配置版本失败",e.t3),this.reload();case 46:this.snapshotLoading=!0;case 47:case"end":return e.stop()}},e,this,[[4,41],[20,25]])}));function t(){return e.apply(this,arguments)}return t}(),nextTick:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){t()})})},resetDesignerConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var i,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=D.a.cloneDeep(n.moduleList),r=n.moduleConfigMap,a=n.styleConfig,console.log("reset designer config",t),o=this.$refs["pc_designer_".concat(t)],!(o&&o.length>0)){e.next=8;break}return e.next=8,o[0].resetData({moduleList:i,configMap:r,styleConfig:a});case 8:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),onEdit:function(e,t){console.log(e,t),this["".concat(t,"Pane")](e)},addPane:function(){var e=this,t=this.currentPanes.map(function(e){return e.code}),n=ne.find(function(e){return!t.includes(e.code)});if(void 0===n)return this.$message.warning("没有更多选项"),!1;this.currentPaneKey=n.code;var i=D.a.cloneDeep(n.funcList);if("form"!==n.code||this.funcList.includes("delete"))i.forEach(function(t){e["DragMobileConfig/addFunc"](t)});else{var r=this;this.$confirm({title:"需要同步添加删除功能吗?",content:"您正在自动添加表单项，是否也需要添加删除功能，确认后将自动添加该功能！",onOk:function(){i.push("delete"),i.forEach(function(e){r["DragMobileConfig/addFunc"](e)})},onCancel:function(){i.forEach(function(e){r["DragMobileConfig/addFunc"](e)})}})}},removePane:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPaneFuncList(t);case 2:n=e.sent,console.log(n),n.forEach(function(e){i["DragMobileConfig/removeFunc"](e)});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getPaneFuncList:function(e){var t=this,n=this;return new Promise(function(i){var r=ne.find(function(t){return t.code===e});if(void 0===r)return n.$message.warning("参数错误"),i([]),[];"form"===e&&t.funcList.includes("delete")?n.$confirm({title:"需要同步移除删除功能吗?",content:"您正在移除表单项，是否也需要移除删除功能，确认后将自动移除删除功能！",onOk:function(){i([].concat(Object(a["a"])(r.funcList),["delete"]))},onCancel:function(){i(r.funcList)}}):i(r.funcList)})},onMainTableChange:function(){},moduleListChanged:function(e,t){this.moduleListMap[e]=t},generate:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r,a,o,s,c,u,l,d,f=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.validateFormModel();case 2:return t=this.$store.state.database.currentTableName,n={},i=[],this.currentPanes.forEach(function(e){n[e.code]=D.a.cloneDeep(f.$store.state.DragMobileConfig[e.code]),n[e.code].moduleList=f.moduleListMap[e.code]||[];var r=n[e.code].styleConfig||{};i.push({path:"pages/".concat(f.tableObj[t].instClassName,"/").concat(e.code),style:{navigationBarTitleText:r["title"],navigationStyle:r["customNavbar"]?"custom":"default"}}),delete n[e.code].currentModule}),r=this.$store.state.DragMobileConfig.commonConfig,a=this.$store.state.panelDesigner.preview,o=this.model.projectType,s={tableName:t,projectType:o,pageConfig:n,commonConfig:r,panelConfig:a},e.next=12,this.validateConfig(s);case 12:if(c=e.sent,c){e.next=15;break}return e.abrupt("return",!1);case 15:this.loading=!0,this.model.storageVersion="快照版本_".concat(ue()().format("YYYY_MM_DD hh:mm:ss")),u=this.model.storageVersion,l=JSON.stringify(s),d={config:l,mobilePages:JSON.stringify(i),tableName:t,storageVersion:u,className:this.tableObj[t].className,classLabel:this.tableObj[t].classLabel},ee["a"].post("/diboot/devtools/mbdc/gn",d).then(function(e){f.loading=!1,0===e.code?(f.$notification.success({message:"操作成功！",description:"生成页面成功！"}),f.reload()):f.$notification.error({message:"操作失败！",description:e.msg})}).catch(function(){f.loading=!1});case 21:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),validateConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.pageConfig,!n){e.next=8;break}if(i=[],D.a.forEach(n,function(e,t){var n=e.moduleList;0===n.length&&i.push(t)}),!(i.length>0)){e.next=8;break}return r=ne.filter(function(e){return i.includes(e.code)}).map(function(e){return e.name}).join("、"),this.$message.error("请先预览确认 ".concat(r," 相关页面的配置！")),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validateFormModel:function(){var e=this;return new Promise(function(t,n){e.$refs.formModel.validate(function(e){e?t():n(new Error("校验失败"))})})},checkFileExist:function(){var e=this;ee["a"].get("/diboot/devtools/cpt/all").then(function(t){if(0===t.code&&!t.data.includes("FILE")){var n="open".concat(Date.now());e.$notification.open({message:"后端文件组件缺失，请知悉！",duration:0,description:"文件组件的缺失将导致上传等功能不能正常使用，请在后端依赖中引入文件组件",btn:function(t){return t("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return e.$notification.close(n)}}},"确定")},key:n,onClose:close})}})},getProjectType:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this["DragMobileConfig/loadProjectType"]();case 2:t=e.sent,this.model.projectType=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},toggle:function(){this.$refs["fullscreen"].toggle()},fullscreenChange:function(e){var t=this;this.fullscreen=e,setTimeout(function(){t.currentPanes.forEach(function(n){var i="pc_designer_".concat(n.code);t.$refs[i]&&t.$refs[i].length>0&&t.$refs[i][0].windowResize&&t.$refs[i][0].windowResize(e)})},500)}}),mixins:[oe["a"]],computed:Object(s["a"])({},Object(h["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign},visibleTables:function(e){return e.database.visibleTables},currentTableName:function(e){return e.database.currentTableName},funcList:function(e){return e.DragMobileConfig.commonConfig.funcList}}),{menuOptions:function(){var e=this.menuList;return e&&0!==e.length?e.filter(function(e){return"orgStructure"!==e.resourceCode}):[]},tableObj:function(){var e={};return this.visibleTables.forEach(function(t){e[t.tableName]={className:t.className,instClassName:t.instClassName,classLabel:t.objName}}),e},currentTableObj:function(){var e=this;return this.visibleTables&&this.visibleTables.length>0&&this.currentTableName?this.visibleTables.find(function(t){return t.tableName===e.currentTableName}):{}},currentPanes:function(){var e=this;return ne.filter(function(t){var n=t.funcList.find(function(t){return e.funcList.includes(t)});return void 0!==n})}}),watch:{funcList:function(e){0!==this.oldFuncListSize&&e&&e.length<this.oldFuncListSize&&(this.currentPaneKey="list"),this.oldFuncListSize=e?e.length:0}},components:{mobileDesigner:Z,tableListSearch:te["a"],Fullscreen:re.a,nonePermissionModal:se["a"]},created:function(){this["database/resetDatabase"](),this["DragMobileConfig/resetMobileDesigner"](),this.getProjectType(),this.checkFileExist(),this.$store.commit("INIT_DESINGER_CONFIG")},destroyed:function(){this["database/resetDatabase"](),this["DragMobileConfig/resetMobileDesigner"]()}},de=le,fe=(n("f3b9"),Object(y["a"])(de,i,r,!1,null,"a6798a4c",null));t["default"]=fe.exports},d565:function(e,t,n){},d910:function(e,t,n){var i={"./detailPanel/index.vue":["2af0","designerModule0~designerModule3~designerModule4","designerModule0~designerModule1","designerModule0"],"./formPanel/index.vue":["2d5e","designerModule0~designerModule1","designerModule1"],"./listPanel/index.vue":["7d86","designerModule2~designerModule5","designerModule2"],"./noticeBar/index.vue":["f26e","designerModule0~designerModule3~designerModule4","designerModule3"],"./search/index.vue":["b752","designerModule0~designerModule3~designerModule4","designerModule4"],"./titleLine/index.vue":["a962","designerModule2~designerModule5","designerModule5"]};function r(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(i)},r.id="d910",e.exports=r},f3b9:function(e,t,n){"use strict";var i=n("26ee"),r=n.n(i);r.a},fa62:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"订阅提示",visible:e.state.visible,"dialog-style":{top:"30px"},width:720},on:{cancel:e.close}},[n("div",{staticClass:"content-wrapper"},[e.explainListMap.SUBSCRIBE_DESCRIPTION?e._l(e.explainListMap.SUBSCRIBE_DESCRIPTION,function(e,t){return n("rich-render",{key:t,attrs:{content:e.content}})}):[e.state.loading?e._e():n("p",[e._v("该功能为订阅用户专享，请访问官网，或关注diboot公众号进行订阅！")])]],2),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("a-button",{attrs:{type:"primary",ghost:""},on:{click:e.subscribeCompleted}},[e._v("我已完成订阅！")])],1)])},r=[],a=(n("96cf"),n("3b8d")),o=n("cebc"),s=n("5274"),c=n("3aa3"),u=n("2f62"),l={name:"NonePermissionModal",data:function(){return{state:{visible:!1,loading:!1},explainListMap:{}}},methods:Object(o["a"])({},Object(u["c"])(["GetInfo"]),{subscribeCompleted:function(){var e=this;this.GetInfo().then(function(t){var n=!1;t&&t.data&&t.data.mainLevel&&t.data.levelList&&t.data.levelList.length>0&&(n=t.data.levelList.some(function(e){return"enterprice"===e.levelCode})),n?(e.$message.success("感谢订阅，您的订阅已生效！"),e.$emit("subscribeSuccess",!0),e.state.visible=!1):e.$message.warning("非常抱歉，暂未查询到您的订阅信息，请检查是否订阅成功!")})},open:function(){this.state.visible=!0,this.loadSubscribeDescription()},loadSubscribeDescription:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.explainListMap.SUBSCRIBE_DESCRIPTION){e.next=2;break}return e.abrupt("return");case 2:return this.state.loading=!0,e.prev=3,e.next=6,c["a"].get("/diboot/devtools/ver");case 6:if(t=e.sent,0===t.code){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,c["a"].get("/diboot/devtools/public-api/appsExplain/".concat(t.data));case 11:t=e.sent,0===t.code&&t.data&&(this.explainListMap=t.data),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log(e.t0);case 18:this.state.loading=!1;case 19:case"end":return e.stop()}},e,this,[[3,15]])}));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.state.visible=!1}}),components:{RichRender:s["a"]}},d=l,f=(n("2c07"),n("2877")),p=Object(f["a"])(d,i,r,!1,null,"73a58298",null);t["a"]=p.exports}}]);