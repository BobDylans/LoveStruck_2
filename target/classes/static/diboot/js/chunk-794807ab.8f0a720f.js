(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-794807ab","chunk-6a8e6298"],{"03cd":function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function i(){var e=document.documentElement;return"requestFullscreen"in e||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"msRequestFullscreen"in e&&document.msFullscreenEnabled||"webkitRequestFullScreen"in e}function o(){return!!(document.fullscreen||document.mozFullScreen||document.fullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen)}function a(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.log("Fullscreen API is not supported.")}function r(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Fullscreen API is not supported.")}function c(e){document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),document.addEventListener("webkitfullscreenchange",e)}function s(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),document.removeEventListener("webkitfullscreenchange",e)}function l(){var e={},t=!1,n=0,i=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);n<i;n++){var o=arguments[n];!function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t&&"[object Object]"===Object.prototype.toString.call(n[i])?e[i]=l(!0,e[i],n[i]):e[i]=n[i])}(o)}return e}t.b=i,t.c=o,t.g=a,t.d=r,t.f=c,t.e=s,t.a=l},function(e,t,n){"use strict";function i(){return n.i(c.c)()}function o(e,t,n){l&&(void 0===n?i()?r():a(e,t):n?a(e,t):r())}function a(){function e(){var t=i();t||(n.i(c.e)(e),a.classList.remove(o.fullscreenClass),o.wrap&&(r.parentNode.insertBefore(a,r),r.parentNode.removeChild(r))),o.callback&&o.callback(t)}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,o=arguments[1];if(l&&!i()){o=n.i(c.a)(!0,{},s,o);var a=t,r=void 0;o.wrap&&(r=document.createElement("div"),r.style["overflow-y"]="auto",r.style.background=o.background,r.style.width="100%",r.style.height="100%",a.parentNode.insertBefore(r,a),r.appendChild(a),r.addEventListener("click",function(e){e.target===this&&n.i(c.d)()})),a.classList.add(o.fullscreenClass),n.i(c.f)(e),n.i(c.g)(o.wrap?r:a)}}function r(){l&&i()&&n.i(c.d)()}var c=n(0),s={wrap:!0,background:"#333",callback:function(){},fullscreenClass:"fullscreen"},l=n.i(c.b)();t.a={getState:i,support:l,toggle:o,enter:a,exit:r}},function(e,t,n){var i=n(5)(n(4),n(6),null,null);e.exports=i.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n.n(i),a=n(1),r=n(0);t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name||"fullscreen";e.component(i,n.i(r.a)(o.a,{name:i})),e.prototype["$"+i]=a.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.default={props:{background:{type:String,default:"#333"},fullscreenClass:{type:String,default:"fullscreen"},fullscreen:{type:Boolean,default:!1}},data:function(){return{supportFullScreen:!1,isFullscreen:!1}},computed:{wrapperStyle:function(){return{background:this.background,"overflow-y":"auto",width:"100%",height:"100%"}}},methods:{toggle:function(e){void 0===e?n.i(i.c)()?this.exit():this.enter():e?this.enter():this.exit()},enter:function(){this.supportFullScreen&&(n.i(i.f)(this.fullScreenCallback),n.i(i.g)(this.$el))},exit:function(){this.supportFullScreen&&this.getState()&&n.i(i.d)()},getState:function(){return n.i(i.c)()},shadeClick:function(e){e.target===this.$el&&this.exit()},fullScreenCallback:function(){this.isFullscreen=n.i(i.c)(),this.isFullscreen||n.i(i.e)(this.fullScreenCallback),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen)}},watch:{fullscreen:function(e){e!==n.i(i.c)()&&(e?this.enter():this.exit())}},created:function(){this.supportFullScreen=n.i(i.b)()}}},function(e,t){e.exports=function(e,t,n,i){var o,a=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(o=e,a=e.default);var c="function"==typeof a?a.options:a;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),n&&(c._scopeId=n),i){var s=Object.create(c.computed||null);Object.keys(i).forEach(function(e){var t=i[e];s[e]=function(){return t}}),c.computed=s}return{esModule:o,exports:a,options:c}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.isFullscreen?[e.fullscreenClass]:[],style:e.isFullscreen?[e.wrapperStyle]:[],on:{click:function(t){return e.shadeClick(t)}}},[e._t("default")],2)},staticRenderFns:[]}}])})},"0536":function(e,t,n){},"0dbf":function(e,t,n){"use strict";var i=n("f0c8"),o=n.n(i);o.a},"11d3":function(e,t,n){},1813:function(e,t,n){"use strict";var i=n("fe42"),o=n.n(i);o.a},"27d7":function(e,t,n){},"2ae2":function(e,t,n){},"2c07":function(e,t,n){"use strict";var i=n("a9e0"),o=n.n(i);o.a},"33b5":function(e,t,n){},"381a":function(e,t,n){"use strict";var i="0123456789",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a="~!@#$%^*()_+-=[]{}|;:,./<>?";function r(e,t){e||(e=8),t||(t={});var n="",r="";!0===t?n=i+o+a:"string"==typeof t?n=t:(!1!==t.numbers&&(n+="string"==typeof t.numbers?t.numbers:i),!1!==t.letters&&(n+="string"==typeof t.letters?t.letters:o),t.specials&&(n+="string"==typeof t.specials?t.specials:a));while(e>0)e--,r+=n[Math.floor(Math.random()*n.length)];return r}e.exports=r.default=r},"3e9c":function(e,t,n){"use strict";n.d(t,"a",function(){return o});n("6762"),n("2fdb"),n("a481"),n("7514"),n("ac6a");var i=n("77db"),o=[{name:"显示关联子列表",mark:"abstractPanel",key:"subList4detailPage",type:"entityList",comment:"关联子列表组件引入",codeTmpl:"{instClassName}EntityList",nameTmpl:"{objName}实体列表",permissions:["detail"],panelCode:"notNullSearchFieldNoneSearchLineList",execFuncList:[],modelGetterList:["getRelationChildren"],checkFunc:function(){},isValid:function(e){return e.refChildren&&e.refChildren.length>0},panelConfigMapAutoSetter:function(e){for(var t in e){var n=e[t],i=n.mark,o=n.metadata;"generalList"===i&&(o.getListFromMixin=!1)}},columnsConfig:{searchColumns:{},listColumns:{filter:function(e){return"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&"S_FILE_UPLOAD"!==e.columnExt.formType&&"M_FILE_UPLOAD"!==e.columnExt.formType&&"S_IMG_UPLOAD"!==e.columnExt.formType&&"M_IMG_UPLOAD"!==e.columnExt.formType&&"RICH_EDITOR"!==e.columnExt.formType&&!e.columnExt.refType},isExpand:!1,voType:"ListVO"}},valueGetterFunc:{showSearch:{origin:"getRelationChildren",getDefaultValue:function(e){return!1}},entity_without_sys:{origin:"getRelationChildren",getDefaultValue:function(e){console.log("getDefaultValue model",e);var t=e.refChildren;return t&&t.length>0?t[0]["refTableInfo"]["tableName"]:""},getOptions:function(e){console.log("getOptions model",e);var t=e.refChildren;return t&&t.length>0?t.map(function(e){return e.refTableInfo}):[]}}},propsSetter:function(e,t){var n=t.mainTableName,o=t.columns;e.forEach(function(e){var t=e.key;if("searchId"===t)e.open=!0,e.convertToString=!0,e.onlyDataShow=!0,e.targetData="model.id";else if("searchField"===t){var a=o.find(function(e){if(!e.columnExt)return!1;var t=e.columnExt,i=t.refType,o=t.refTable;return"T"===i&&o===n});a&&(e.open=!0,e.convertToString=!0,e.onlyDataShow=!1,e.targetData="'".concat(Object(i["b"])(a.colName),"'"))}})}},{name:"添加关联子表单（单记录）",mark:"abstractPanel",key:"subForm4formPage",type:"singleSubForm",tips:"生成后请完善当前实体的新建/更新接口",tipUrl:"https://www.diboot.com/guide/diboot-devtools/faq.html",codeTmpl:"{instClassName}SubForm",nameTmpl:"{objName}子表单",permissions:["form"],panelCode:"singleCreateSubForm_#{projectType}",execFuncList:[],modelGetterList:["getRelationChildren"],checkFunc:function(){},isValid:function(e){var t=e.refChildren;if(!t||0===t.length)return!1;var n=t.some(function(e){var t=e.referenceField;return!(!t||"1-1"!==t.refRelationship)});return n},containerConfigAutoSetter:function(e){var t;console.log("containerConfigAutoSetter",e);var n=e.scriptConfig,i=e.metadata,o=n.props,a=n.event;i.panelConfig.keyFieldName="state.visible",o&&o.length>0&&o.forEach(function(e){var t=e.key;"queryModel"===t&&(e.open=!0,e.targetData="form.id === undefined ? undefined : {employeeId: form.id}")});var r=i.panelConfig.refName,c=r.replace("SubForm","List"),s=[{handlerCode:"afterOpen(id) {\n      this.$nextTick(() => {\n        this.$refs.".concat(r,".initForm()\n      })\n    }"),handlerFuncName:"afterOpen",key:"afterOpen",name:"表单打开后钩子函数",open:!0,bindIgnore:!0,params:[]},{handlerCode:"async enhance(values) {\n      const ".concat(c," = await this.$refs.").concat(r,".getFormDataList()\n      values.").concat(c," = ").concat(c,"\n    }"),handlerFuncName:"enhance",key:"enhance",name:"提交前对数据对额外处理",open:!0,bindIgnore:!0,params:[]}],l=s.map(function(e){return e.key});n.event=a.filter(function(e){return!l.includes(e.key)}),(t=n.event).push.apply(t,s)},panelConfigMapAutoSetter:function(e){for(var t in e){var n=e[t],i=n.mark,o=n.preview,a=n.scriptConfig;if("generalForm"===i&&!0!==o){var r=a.event;r.push.apply(r,[{handlerCode:"async initForm() {\n      this.clearForm()\n      const { queryModel } = this\n      if (queryModel === undefined) {\n        return false\n      }\n      for (const key in queryModel) {\n        if (!queryModel[key]) {\n          delete queryModel[key]\n        }\n      }\n      if (Object.keys(queryModel).length === 0) {\n        return false\n      }\n      // 通过查询条件获取列表\n      const res = await dibootApi.get(`${this.baseApi}/list`, queryModel)\n      if (res.code === 0) {\n        const dataList = res.data\n        if (dataList && dataList.length > 0) {\n          // 将列表数据赋值给表单\n          this.form = dataList[0]\n        }\n      }\n    }",handlerFuncName:"initForm",key:"initForm",name:"初始化/加载表单数据",open:!0,params:[]},{handlerCode:"async getFormDataList() {\n      const values = await this.validate()\n      this.enhance(values)\n      return [values]\n    }",handlerFuncName:"getFormDataList",key:"getFormDataList",name:"获取表单数据列表",open:!0,params:[]}]),a.event=r.filter(function(e){return!["submit","submitSuccess"].includes(e.key)})}}},columnsConfig:{columns:{filter:function(e,t){var n="id"!==e.fieldName&&"uuid"!==e.fieldName&&"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&"createTime"!==e.fieldName&&"updateTime"!==e.fieldName&&"createBy"!==e.fieldName&&"updateBy"!==e.fieldName;if(void 0===t)return n;var i=t.pageTableName;if(void 0===i)return n;var o=e.columnExt;return n=n&&!(void 0!==o&&"T"===o.refType&&o.refTable===i),n},isExpand:!0,voType:""}},valueGetterFunc:{showSearch:{origin:"getRelationChildren",getDefaultValue:function(e){return!1}},entity_without_sys:{origin:"getRelationChildren",getDefaultValue:function(e){console.log("getDefaultValue model",e);var t=e.refChildren;if(t&&t.length>0){var n=t.filter(function(e){var t=e.referenceField;return!(!t||"1-1"!==t.refRelationship)});return n[0]["refTableInfo"]["tableName"]}return""},getOptions:function(e){console.log("getOptions model",e);var t=e.refChildren;if(t&&t.length>0){var n=t.filter(function(e){var t=e.referenceField;return!(!t||"1-1"!==t.refRelationship)});return n.map(function(e){return e.refTableInfo})}return[]}}}},{name:"添加关联子表单（多记录）",mark:"abstractPanel",key:"multiSubForm4formPage",type:"multiSubForm",codeTmpl:"{instClassName}MultiSubForm",nameTmpl:"{objName}子表单",permissions:["form"],panelCode:"multiUpdateSubForm",execFuncList:[],modelGetterList:["getRelationChildren"],checkFunc:function(){},isValid:function(e){var t=e.refChildren;if(!t||0===t.length)return!1;var n=t.some(function(e){var t=e.referenceField;return!(!t||"n-1"!==t.refRelationship)});return n},containerConfigAutoSetter:function(e,t){var n,i=e.scriptConfig,o=e.metadata,a=i.props,r=i.event;o.panelConfig.keyFieldName="state.visible",a&&a.length>0&&a.forEach(function(e){var n=e.key;if("queryModel"===n){e.open=!0;var i="antdv",o="parentId";if(void 0!==t){var a=t.pageTableName,r=t.columns,c=t.projectType;if(c&&(i=c),a&&r){var s=r.find(function(e){return e.columnExt&&"T"===e.columnExt.refType&&e.columnExt.refTable===a});void 0!==s&&(o=s.fieldName)}}var l="antdv"===i?"model":"form";e.targetData="".concat(l,"[primaryKey] === undefined ? undefined : {").concat(o,": ").concat(l,"[primaryKey]}")}});var c=o.panelConfig.refName,s=c.replace("SubForm","List"),l=[{handlerCode:"afterOpen(id) {\n      this.$nextTick(() => {\n        this.$refs.".concat(c,".initForm()\n      })\n    }"),handlerFuncName:"afterOpen",key:"afterOpen",name:"表单打开后钩子函数",open:!0,bindIgnore:!0,params:[]},{handlerCode:"async enhance(values) {\n      const ".concat(s," = await this.$refs.").concat(c,".getFormDataList()\n      values.").concat(s," = ").concat(s,"\n    }"),handlerFuncName:"enhance",key:"enhance",name:"提交前对数据对额外处理",open:!0,bindIgnore:!0,params:[]}],u=l.map(function(e){return e.key});i.event=r.filter(function(e){return!u.includes(e.key)}),(n=i.event).push.apply(n,l),o.panelConfig.scriptConfig=i},panelConfigMapAutoSetter:function(e){for(var t in e){var n=e[t],i=n.mark,o=n.preview,a=n.scriptConfig,r=n.metadata;if("multiForm"===i&&!0!==o){var c=a.event;c.push.apply(c,[{handlerCode:"async getFormDataList () {\n      await this.validate()\n      return this.dataList\n    }",handlerFuncName:"getFormDataList",key:"getFormDataList",name:"获取表单数据列表",open:!0,params:[]}]),a.event=c.filter(function(e){return!["submit","submitSuccess"].includes(e.key)}),r.refSource="multiSubForm4formPage"}}},columnsConfig:{columns:{filter:function(e,t){var n="id"!==e.fieldName&&"uuid"!==e.fieldName&&"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&"createTime"!==e.fieldName&&"updateTime"!==e.fieldName&&"createBy"!==e.fieldName&&"updateBy"!==e.fieldName&&!["M_FILE_UPLOAD","S_FILE_UPLOAD","M_IMG_UPLOAD","S_IMG_UPLOAD","RICH_EDITOR"].includes(e.columnExt.formType);if(void 0===t)return n;var i=t.pageTableName;if(void 0===i)return n;var o=e.columnExt;return n=n&&!(void 0!==o&&"T"===o.refType&&o.refTable===i),n},isExpand:!1,voType:""}},valueGetterFunc:{entity_without_sys:{origin:"getRelationChildren",getDefaultValue:function(e){console.log("getDefaultValue model",e);var t=e.refChildren;if(t&&t.length>0){var n=t.filter(function(e){var t=e.referenceField;return!(!t||"n-1"!==t.refRelationship)});return n[0]["refTableInfo"]["tableName"]}return""},getOptions:function(e){console.log("getOptions model",e);var t=e.refChildren;if(t&&t.length>0){var n=t.filter(function(e){var t=e.referenceField;return!(!t||"n-1"!==t.refRelationship)});return n.map(function(e){return e.refTableInfo})}return[]}}}},{name:"列表左侧关联树结构",mark:"abstractPanel",key:"tree4listPage",type:"entityList",comment:"列表左侧关联树结构引入",codeTmpl:"{instClassName}Tree",nameTmpl:"{objName}树结构",permissions:["list"],panelCode:"abstractGeneralTree",execFuncList:[],modelGetterList:["getTreeRefs"],checkFunc:function(){},isValid:function(e){return e.treeRefs&&e.treeRefs.length>0},containerConfigAutoSetter:function(e,t){var n,i=e.scriptConfig,o=i.event,a="";if(void 0!==t){var r=t.pageColumns,c=t.tableName;if(c&&r&&r.length>0){var s=r.find(function(e){return e.columnExt&&e.columnExt.refTable===c});void 0!==s&&(a=s.fieldName)}}var l=[{handlerCode:"onCurrentNodeChanged (val) {\n      this.customQueryParam.".concat(a," = val\n      this.getList()\n    }"),handlerFuncName:"onCurrentNodeChanged",key:"currentNodeChange",name:"当前节点变更事件处理",open:!0,params:[{key:"value",name:"参数",type:"String"}]}],u=l.map(function(e){return e.key});i.event=o.filter(function(e){return!u.includes(e.key)}),(n=i.event).push.apply(n,l)},panelConfigMapAutoSetter:function(e){for(var t in e){var n=e[t],i=n.mark,o=n.metadata;"treeStruct"===i&&(o.tableName=o.treeTable&&o.treeTable.tableName?o.treeTable.tableName:"")}},valueGetterFunc:{entity_without_sys:{origin:"getTreeRefs",getDefaultValue:function(e){var t=e.treeRefs;return t&&t.length>0?t[0]["refTableInfo"]["tableName"]:""},getOptions:function(e){var t=e.treeRefs;return t&&t.length>0?t.map(function(e){return e.refTableInfo}):[]}}},propsSetter:function(e,t){var n=t.mainTableName,o=t.columns;e.forEach(function(e){var t=e.key;if("searchId"===t)e.open=!0,e.convertToString=!0,e.onlyDataShow=!0,e.targetData="model.id";else if("searchField"===t){var a=o.find(function(e){if(!e.columnExt)return!1;var t=e.columnExt,i=t.refType,o=t.refTable;return"T"===i&&o===n});a&&(e.open=!0,e.convertToString=!0,e.onlyDataShow=!1,e.targetData="'".concat(Object(i["b"])(a.colName),"'"))}})}}]},4999:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",[n("a-row",{attrs:{slot:"title"},slot:"title"},[n("a-col",{attrs:{span:18}},[n("a-input-search",{attrs:{placeholder:"搜索（表名或备注）..."},on:{change:e.onSearch},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),n("a-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[e.hideInitTable?n("a-tag",{attrs:{color:"cyan"}},[e._v("已隐藏预置表")]):n("a-switch",{attrs:{checkedChildren:"已显示预置表",unCheckedChildren:"已隐藏预置表","default-checked":e.showInitTables},on:{change:function(t){return e.$store.commit("database/setShowInitTables",t)}}})],1)],1),e.showEmptyCard?n("a-card-grid",{staticClass:"db-main",staticStyle:{width:"25%","text-align":"left",cursor:"pointer","overflow-x":"hidden"},attrs:{title:"添加自定义空白页，用于非常规CRUD页面生成"},on:{click:function(t){return e.onTableChanged("CUSTOM_PAGE__")}}},[n("div",{staticClass:"title",staticStyle:{color:"#5387f3"}},[n("a-icon",{attrs:{type:"plus"}}),e._v(" 自定义页面")],1),n("div",{staticClass:"desc"},[e._v(" ")])]):e._e(),e._l(e.validTables,function(t){return n("a-card-grid",{key:t.tableName,staticClass:"db-main",staticStyle:{width:"25%","text-align":"left",cursor:"pointer","overflow-x":"hidden"},attrs:{title:"基于主表 "+t.tableName+" 生成CRUD页"},on:{click:function(n){return e.onTableChanged(t.tableName)}}},[n("div",{staticClass:"title"},[e._v(e._s(t.tableName))]),n("div",{staticClass:"desc"},[e._v(e._s(t.objName||"-"))])])})],2)],1)},o=[],a=n("cebc"),r=n("2f62"),c={name:"TableListSearch",data:function(){return{searchVal:""}},methods:Object(a["a"])({},Object(r["e"])(["database/resetDatabase"]),{onSearch:function(){this.$store.dispatch("database/searchTables",this.searchVal)},onTableChanged:function(e){this.$emit("tableChanged",e)}}),computed:Object(a["a"])({},Object(r["f"])({showInitTables:function(e){return e.database.showInitTables},visibleTables:function(e){return e.database.visibleTables}}),{validTables:function(){return this.visibleTables&&this.visibleTables.length>0&&void 0!==this.showInitTables&&null!==this.showInitTables?this.showInitTables&&!this.hideInitTable?this.visibleTables:this.visibleTables.filter(function(e){return!0===e.editable}):[]}}),mounted:function(){this["database/resetDatabase"](),this.$store.dispatch("database/GetTables").then(function(){})},props:{hideInitTable:{type:Boolean,default:!1},showEmptyCard:{type:Boolean,default:!0}}},s=c,l=n("2877"),u=Object(l["a"])(s,i,o,!1,null,null,null);t["a"]=u.exports},5274:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{domProps:{innerHTML:e._s(e.content)}})},o=[],a={name:"RichRender",model:{prop:"content",event:"change"},props:{content:{type:String,default:""}}},r=a,c=n("2877"),s=Object(c["a"])(r,i,o,!1,null,null,null);t["a"]=s.exports},"5ab4":function(e,t,n){"use strict";var i=n("619e"),o=n.n(i);o.a},"5bd9":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("draggable",{staticClass:"module-screen",class:{root:"root"===e.type,null:!e.targetList||0===e.targetList.length,preview:"preview"===e.code},attrs:{element:"div","ghost-class":"sortable-ghost",animation:340,options:{group:{name:"compgroup",pull:!1},sort:!0}},on:{add:e.addModule},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}},e._l(e.targetList,function(t,i){return n("div",{key:t.uuid,staticClass:"component-box",class:{current:e.currentModule.uuid===t.uuid}},[t.uuid?n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"item.hidden === undefined || !item.hidden"}],key:t.uuid,tag:"component",staticClass:"preview-element",class:{current:e.currentModule.uuid===t.uuid},attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType},nativeOn:{click:function(n){return n.stopPropagation(),e.changeCurrentModule(n,t)}}}):e._e(),n("div",{staticClass:"component-item-operate-box",class:{right:"left"!==e.previewBtnGroupAlign,left:"left"===e.previewBtnGroupAlign}},["layoutc"!==t.mark?n("a",{staticClass:"btn-icon",attrs:{title:"复制",href:"javascript:;"},on:{click:function(n){return n.stopPropagation(),e.copyModule(t,i)}}},[n("a-icon",{attrs:{type:"copy"}})],1):e._e(),n("a",{staticClass:"btn-icon",attrs:{title:"删除",href:"javascript:;"},on:{click:function(t){return t.stopPropagation(),e.removeModule(i)}}},[n("a-icon",{attrs:{type:"delete"}})],1)])],1)}),0)},o=[],a=(n("6762"),n("ac6a"),n("7514"),n("96cf"),n("3b8d")),r=n("cebc"),c=n("2f62"),s=n("381a"),l=n.n(s),u=n("2ef0"),d=n.n(u),f=n("b76a"),p=n.n(f),m=n("6892"),g={data:function(){return{}},methods:{afterAddModuleObj:function(e,t){var n=t.uuid,i=this.configMap,o=i[n];o.metadata.moduleObj=d.a.cloneDeep(e)}},computed:{configMap:function(){var e=this.code;return this.$store.state.DragConfig[e].moduleConfigMap}}},h=Object(c["a"])("DragConfig"),v=h.mapState,b=h.mapMutations,y=h.mapActions,C={name:"workPanel",data:function(){return{targetList:[],componentMap:{}}},methods:Object(r["a"])({},b(["setModuleConfig","removeConfig","updateConfigMap","updateCurrentModule","setRemoveModuleList"]),y({modifyCurrentModule:"modifyCurrentModule"}),{addModule:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item._underlying_vm_,i={mark:n.mark},o=this.beforeModuleJoinValidate(i),!o||o.valid){e.next=6;break}return this.$message.warning(o.msg),e.abrupt("return",!1);case 6:return a=t.newIndex,e.next=9,this.addModuleObj(i,a);case 9:this.afterAddModuleObj(n,i);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addModuleObj:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,i){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return void 0===t.uuid&&(t.uuid=l()(16,{numbers:!1})),this.loadModule(t),e.next=4,this.modifyCurrentModule({key:this.code,module:t});case 4:o=void 0!==i&&i?0:1,this.targetList.splice(n,o,t),this.targetList=this.targetList.filter(function(e){return void 0!==e.uuid}),this.$emit("add",t),this.$emit("input",this.targetList),this.$forceUpdate();case 10:case"end":return e.stop()}},e,this)}));function t(t,n,i){return e.apply(this,arguments)}return t}(),autoAppendModule:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find(function(e){return e.mark===t}),void 0===n){e.next=3;break}return e.abrupt("return",!1);case 3:return i={mark:t,hidden:!0},e.next=6,this.addModuleObj(i,0,!0);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),copyModule:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=d.a.cloneDeep(t),i.uuid=l()(16,{numbers:!1}),o=d.a.cloneDeep(this.moduleConfigMap[t.uuid]),o.uuid=i.uuid,this.setModuleConfig({key:this.code,uuid:i.uuid,config:o}),this.targetList.splice(n+1,0,i),a=d.a.cloneDeep(this.targetList),e.next=9,this.modifyCurrentModule({key:this.code,module:i});case 9:this.$emit("add",i),this.$emit("input",a),this.$forceUpdate();case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),removeModule:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=d.a.cloneDeep(this.targetList[t]),i=void 0!==this.targetList[t-1]?this.targetList[t-1]:this.targetList[t+1],void 0===i){e.next=5;break}return e.next=5,this.modifyCurrentModule({key:this.code,module:i});case 5:o=this.targetList[t]["uuid"],this.removeConfig({key:this.code,uuid:o}),this.targetList.splice(t,1),a=d.a.cloneDeep(this.targetList),this.$emit("remove",{m:n,targetList:a}),this.$emit("input",a);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("f95a")("./".concat(e.mark,"/index.vue"))})},autoRemoveModule:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find(function(e){return e.mark===t}),void 0!==n){e.next=3;break}return e.abrupt("return",!1);case 3:if(i=this.targetList.indexOf(n),-1!==i){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,this.removeModule(i);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),autoSetModuleConfig:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,i){var o,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=this.targetList.find(function(e){return e.mark===t}),void 0!==o){e.next=4;break}return e.next=4,this.autoAppendModule(t);case 4:if(o=this.targetList.find(function(e){return e.mark===t}),void 0!==o){e.next=7;break}return e.abrupt("return",!1);case 7:a=o.uuid,r=this.$store.state.DragConfig[this.code].moduleConfigMap,r[a]=n,this.updateConfigMap({key:this.code,configMap:r}),i&&i(o);case 12:case"end":return e.stop()}},e,this)}));function t(t,n,i){return e.apply(this,arguments)}return t}(),changeCurrentModule:function(e,t){"layoutc"!==t.mark&&e.preventDefault(),this.modifyCurrentModule({key:this.code,module:t}),m["a"].$emit("switchModuleConfigPanel_".concat(this.code))},clearAllModuleList:function(){this.targetList=[]},clearModuleListConfig:function(e){var t=this;!e||e.length<0||e.forEach(function(e){t.removeModuleConfig(e)})},removeModuleConfig:function(e){this.removeConfig({key:this.code,uuid:e.uuid})},initTargetList:function(e){var t=this;if(!e||0===e.length)return!1;e.forEach(function(e){t.loadModule(e)}),this.targetList=e,this.targetList.forEach(function(e){t.updateCurrentModule({key:t.code,module:e})})},loadValue:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.targetList=d.a.cloneDeep(t),e.next=3,this.waitNextTick();case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),waitNextTick:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){t()})})}}),mixins:[g],watch:{targetList:function(e){"preview"!==this.code&&this.$emit("input",e)},removeModuleList:function(e){var t=this;if(e&&e.length>0){var n=this.targetList,i=n.map(function(e){return e.uuid}),o=[];if(e.forEach(function(e){var n=i.indexOf(e);-1!==n&&(t.removeModule(n),o.push(e))}),o.length>0){var a=e.filter(function(e){return!o.includes(e)});this.setRemoveModuleList(a)}}}},computed:Object(r["a"])({},Object(c["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign}}),v({removeModuleList:function(e){return e.removeModuleList}}),{currentModule:function(){return this.$store.state.DragConfig[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.DragConfig[this.code].moduleConfigMap}}),mounted:function(){this.$nextTick(function(){this.value&&this.value.length>0&&(this.targetList=d.a.cloneDeep(this.value))})},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},code:{type:String,default:""},projectType:{type:String,required:!0},beforeModuleJoinValidate:{type:Function,default:function(){return{valid:!0}}}},components:{draggable:p.a},created:function(){var e=this;"root"===this.type&&(m["a"].$on("autoAppendModule_".concat(this.code),function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoAppendModule(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),m["a"].$on("autoRemoveModule_".concat(this.code),function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoRemoveModule(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),m["a"].$on("autoSetModuleConfig_".concat(this.code),function(t){var n=t.mark,i=t.moduleConfig,o=t.callback;e.autoSetModuleConfig(n,i,o)}))},destroyed:function(){this.clearModuleListConfig(this.targetList),"root"===this.type&&(m["a"].$off("autoAppendModule_".concat(this.code)),m["a"].$off("autoRemoveModule_".concat(this.code)),m["a"].$off("autoSetModuleConfig_".concat(this.code)))}},k=C,M=(n("882a8"),n("2877")),w=Object(M["a"])(k,i,o,!1,null,"331cc7f8",null);t["a"]=w.exports},"5ebd":function(e,t,n){"use strict";var i=n("33b5"),o=n.n(i);o.a},"619e":function(e,t,n){},6892:function(e,t,n){"use strict";var i=n("2b0e"),o=new i["default"];t["a"]=o},"744d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-main"},[e.loadTableFlag?e._e():n("div",{staticClass:"tableListSearch",class:{initial:e.initial,complete:!e.initial,middleState:!e.initial&&!e.loadTableFlag}},[e.initial?n("a-row",[n("a-col",{attrs:{span:24}},[!0===e.hasIam?n("h2",{staticClass:"tableListSearch__title"},[n("span",[e._v("\n            选择主表开始生成（先生成后端代码）\n          ")]),e.isNotEnt?n("subscribe",{staticStyle:{float:"right"}}):e._e()],1):n("h2",{staticClass:"tableListSearch__title"},[e._v("请引入IAM组件，才可以使用前端功能生成")])])],1):e._e(),!0===e.hasIam?n("table-list-search",{attrs:{"hide-init-table":!0},on:{tableChanged:function(t){return e.changeCurrentTable(t)}}}):e._e()],1),n("div",{staticClass:"designer-container",class:{complete:e.loadTableFlag}},[n("a-form-model",{ref:"formModel",staticClass:"main-form",staticStyle:{background:"#e8f1ff"},attrs:{model:e.model,rules:e.rules,layout:"inline"}},[n("a-form-model-item"),n("a-form-model-item",[n("a-tag",{attrs:{color:"#87d068"}},[e._v("\n          "+e._s(e.currentTableObj.tableName)+"["+e._s(e.currentTableObj.objName)+"]\n        ")]),n("a-popover",{attrs:{title:"可恢复快照列表",placement:"bottomLeft"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("template",{slot:"content"},[n("a-list",{staticClass:"snapshot-list",attrs:{size:"small",bordered:"","data-source":e.recentVersionList},scopedSlots:e._u([{key:"renderItem",fn:function(t,i){return n("a-list-item",{},[n("a-list-item-meta",[n("a-button",{attrs:{slot:"title",disabled:t.id===e.activeSnapshotId,type:"link"},on:{click:function(n){return e.loadRecentVersionConfig(t)}},slot:"title"},[e._v("\n                    "+e._s(t.panelName+(t.id===e.activeSnapshotId?"（当前）":""))+"\n                  ")])],1)],1)}}])})],1),n("a-button",{attrs:{disabled:!e.recentVersion,type:"link",size:"small",icon:"history"}},[e._v("\n            恢复快照\n          ")])],2),n("a-popconfirm",{attrs:{placement:"bottomRight","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.reload()}}},[n("template",{slot:"title"},[n("p",{staticStyle:{"margin-bottom":"0"}},[e._v("您确定切换到其他表吗？")]),n("p",{staticStyle:{"margin-bottom":"0",color:"#fc5352"}},[e._v("这将丢失当前配置！")])]),n("a-button",{attrs:{type:"link",size:"small",icon:"switcher",title:"切换到其他表"}},[e._v("切换表")])],2),n("a-popconfirm",{attrs:{placement:"bottomRight","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.resetInitPcDesigner()}}},[n("template",{slot:"title"},[n("p",{staticStyle:{"margin-bottom":"0"}},[e._v("您确定重置设计器模版吗？")]),n("p",{staticStyle:{"margin-bottom":"0",color:"#fc5352"}},[e._v("这将丢失当前配置！")])]),n("a-button",{attrs:{type:"link",size:"small",icon:"redo",title:"重置页面配置"}},[e._v("重置")])],2)],1),n("a-form-model-item",{attrs:{label:"前端类型",prop:"projectType"}},[n("a-select",{staticClass:"w-200",attrs:{placeholder:"项目前端类型"},model:{value:e.model.projectType,callback:function(t){e.$set(e.model,"projectType",t)},expression:"model.projectType"}},[n("a-select-option",{attrs:{value:""}},[e._v("\n            项目前端类型\n          ")]),n("a-select-option",{attrs:{value:"antdv"}},[e._v("\n            diboot-antd-admin\n          ")]),n("a-select-option",{attrs:{value:"element"}},[e._v("\n            diboot-element-admin\n          ")])],1)],1),n("a-form-model-item",{attrs:{prop:"parentMenuCode"}},[n("span",{attrs:{slot:"label",title:"添加上级菜单"},slot:"label"},[e._v("\n          上级菜单 \n          "),n("a-icon",{style:{borderRadius:"50%",border:"1px solid #1890ff",color:"#1890ff"},attrs:{type:"plus"},on:{click:function(t){return e.$refs.routerCreateModal.open()}}})],1),n("a-select",{staticClass:"w-200",attrs:{placeholder:"选择上级菜单"},model:{value:e.model.parentMenuCode,callback:function(t){e.$set(e.model,"parentMenuCode",t)},expression:"model.parentMenuCode"}},[n("a-select-option",{attrs:{value:""}},[e._v("\n            选择上级菜单\n          ")]),e.menuOptions&&e.menuOptions.length>0?e._l(e.menuOptions,function(t){return n("a-select-option",{key:t.resourceCode,attrs:{value:'{"moduleName": "'+t.resourceCode+'", "moduleTitle": "'+t.displayName+'", "id": '+t.id+"}"}},[e._v("\n              "+e._s(t.displayName)+"\n            ")])}):e._e()],2)],1),e.customPage?[n("a-form-model-item",{attrs:{label:"菜单名",prop:"currentMenuName"}},[n("a-input",{staticClass:"w-200",attrs:{placeholder:"当前菜单名"},model:{value:e.model.currentMenuName,callback:function(t){e.$set(e.model,"currentMenuName",t)},expression:"model.currentMenuName"}})],1),n("a-form-model-item",{attrs:{label:"菜单编码",prop:"currentMenuValue"}},[n("a-input",{staticClass:"w-200",attrs:{placeholder:"当前菜单名"},model:{value:e.model.currentMenuValue,callback:function(t){e.$set(e.model,"currentMenuValue",t)},expression:"model.currentMenuValue"}})],1)]:n("a-form-model-item",{attrs:{label:"当前菜单名",prop:"currentMenuName"}},[n("a-input",{staticClass:"w-200",attrs:{placeholder:"当前菜单名"},model:{value:e.model.currentMenuName,callback:function(t){e.$set(e.model,"currentMenuName",t)},expression:"model.currentMenuName"}})],1),e.initial?e._e():n("a-form-model-item",[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:["f_pc_page_generate"],expression:"['f_pc_page_generate']"}],attrs:{type:"primary",title:"生成代码并保存快照",loading:e.gnLoading,icon:"snippets"},on:{click:function(t){return e.generate(e.GENERATE)}}},[e._v("\n          生成代码\n        ")]),n("a-button",{directives:[{name:"permission-missing",rawName:"v-permission-missing",value:["f_pc_page_generate"],expression:"['f_pc_page_generate']"}],attrs:{type:"primary",title:"生成代码并保存快照",loading:e.gnLoading,icon:"snippets"},on:{click:function(t){e.subscribeSuccess?e.generate(e.GENERATE):e.$refs.nonePermissionModal.open()}}},[e._v("\n          生成代码\n        ")])],1),e.initial?e._e():n("a-form-model-item",[n("a-button",{attrs:{type:"primary",title:"暂存快照",loading:e.ssLoading,shape:"circle",icon:"camera"},on:{click:e.snapshoot}})],1)],2),n("fs",{ref:"fullscreen",attrs:{wrap:!0},on:{change:e.fullscreenChange}},[e.currentPanes&&e.currentPanes.length>0?n("a-tabs",{key:e.resetInitDesigner,attrs:{id:"designer-main",type:"editable-card",hideAdd:!0,"tab-bar-gutter":12},on:{edit:e.onEdit},model:{value:e.currentPaneKey,callback:function(t){e.currentPaneKey=t},expression:"currentPaneKey"}},[e._l(e.currentPanes,function(t){return[n("a-tab-pane",{key:t.code,attrs:{"force-render":!0,closable:t.closable}},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:t.icon}}),e._v("\n              "+e._s(t.name)+"\n            ")],1),n("pc-designer",{ref:"pc_designer_"+t.code,refInFor:!0,attrs:{code:t.code,"init-module-mark-list":t.moduleList,"init-module-list":e.initModuleListMap[t.code],"project-type":e.model.projectType},on:{add:e.addModule,remove:e.removeModule,change:function(n){return e.moduleListChanged(t.code,n)}}})],1)]}),n("template",{slot:"tabBarExtraContent"},[n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"添加",type:"plus"},on:{click:e.addPane}}),n("a-popover",{attrs:{placement:"leftTop",title:"常用设置",trigger:"click"}},[n("div",{staticStyle:{width:"280px",height:"120px"},attrs:{slot:"content"},slot:"content"},[n("a-form-model",e._b({attrs:{layout:"horizontal"}},"a-form-model",{labelCol:{span:12},wrapperCol:{span:12}},!1),[n("a-form-model-item",{attrs:{label:"操作按钮对齐方式"}},[n("a-radio-group",{attrs:{value:e.previewBtnGroupAlign},on:{change:function(t){return e.$store.commit("SET_DESINGER_PREVIEW_BTN_GROUP_ALIGN",t.target.value)}}},[n("a-radio-button",{attrs:{value:"left"}},[n("a-icon",{attrs:{type:"align-left"}})],1),n("a-radio-button",{attrs:{value:"right"}},[n("a-icon",{attrs:{type:"align-right"}})],1)],1)],1)],1)],1),n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"设置",type:"setting"}})],1),n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"全屏/取消",type:e.fullscreen?"fullscreen-exit":"fullscreen"},on:{click:e.toggle}})],1)],2):e._e()],1)],1),n("router-create-modal",{ref:"routerCreateModal",attrs:{projectType:e.model.projectType},on:{complete:function(t){return e.getMenuList(t)}}}),n("none-permission-modal",{ref:"nonePermissionModal",on:{subscribeSuccess:function(t){e.subscribeSuccess=!0}}})],1)},o=[],a=(n("28a5"),n("7f7f"),n("a481"),n("456d"),n("75fc")),r=(n("ac6a"),n("96cf"),n("3b8d")),c=(n("7514"),n("6762"),n("2fdb"),n("cebc")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-layout",{staticClass:"layout-container"},[n("a-layout-sider",{staticClass:"layout-sider-container sider-left",staticStyle:{margin:"0"},attrs:{width:e.sidebarState.left?260:0}},[n("source-tabs",{attrs:{"show-left-sidebar":e.sidebarState.left,"current-module":e.currentModule,code:e.code}})],1),n("a-layout-content",{staticStyle:{background:"#fff"}},[n("div",{staticClass:"layout-content-container"},[n("div",{staticClass:"module-modal"},[n("work-panel",{ref:"workPanel",attrs:{type:"root",code:e.code,"project-type":e.projectType,"before-module-join-validate":e.beforeModuleJoinValidate},on:{add:function(t){return e.$emit("add",t)},remove:function(t){return e.$emit("remove",t)}},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}})],1),n("div",{staticClass:"expand-btn expand-left",attrs:{title:e.sidebarState.left?"收起":"展开"},on:{click:function(t){e.sidebarState.left=!e.sidebarState.left}}},[e.sidebarState.left?n("a-icon",{attrs:{type:"double-left"}}):n("a-icon",{attrs:{type:"double-right"}})],1),n("div",{staticClass:"expand-btn expand-right",attrs:{title:e.sidebarState.right?"收起":"展开"},on:{click:function(t){e.sidebarState.right=!e.sidebarState.right}}},[e.sidebarState.right?n("a-icon",{attrs:{type:"double-right"}}):n("a-icon",{attrs:{type:"double-left"}})],1)])]),n("a-layout-sider",{staticClass:"layout-sider-container sider-right",attrs:{width:e.sidebarState.right?360:0}},[n("config-page",{attrs:{"project-type":e.projectType,code:e.code}})],1)],1)],1)},l=[],u=n("b76a"),d=n.n(u),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-container"},[n("a-tabs",{model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[n("a-tab-pane",{key:"config_1",attrs:{tab:"组件属性"}},[n("div",{staticClass:"config-container"},e._l(e.moduleConfigMap,function(t){return n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:!!e.currentModule.uuid&&e.currentModule.uuid===t.uuid,expression:"!!currentModule.uuid && currentModule.uuid === item.uuid"}],key:t.uuid,tag:"component",attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType}})}),1)]),n("a-tab-pane",{key:"config_2",attrs:{tab:"通用属性","force-render":!0}},[n("common-config",{staticClass:"config-container",attrs:{projectType:e.projectType,code:e.code}})],1)],1)],1)},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-box"},[n("general-data-config",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_m_panelData"],expression:"['pc_page_m_panelData']"}],attrs:{code:e.code,workspace:"DragConfig"}}),n("a-form",{attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("功能配置")]),n("a-form-model",{attrs:{layout:"horizontal"}},[n("a-form-model-item",{attrs:{label:"",labelCol:{span:2},wrapperCol:{span:22}}},[n("a-row",[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{indeterminate:e.indeterminate,checked:e.checkAll},on:{change:e.onCheckAllChange}},[e._v("\n              全选\n            ")])],1)],1),n("a-checkbox-group",{attrs:{value:e.funcList},on:{change:e.onChange}},[e._l(e.funcOptions,function(t){return["delete"===t.value?[n("a-row",{key:t.value},[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])],1)],1)]:"create"===t.value||"update"===t.value?[n("a-row",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_p_form"],expression:"['pc_page_p_form']"}],key:t.value},[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])],1)],1)]:[n("a-row",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_p_"+t.value],expression:"[`pc_page_p_${opt.value}`]"}],key:t.value},[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])],1)],1)]]})],2)],1)],1)],1)],1)},g=[],h=n("8141"),v=n("2f62"),b=Object(v["a"])("DragConfig"),y=b.mapMutations,C=b.mapState,k=[{label:"详情",value:"detail"},{label:"新建",value:"create"},{label:"更新",value:"update"},{label:"删除",value:"delete"},{label:"导入",value:"import"},{label:"导出",value:"export"}],M={name:"CommonConfig",data:function(){return{funcOptions:k}},methods:Object(c["a"])({},y(["updateFuncList"]),{onChange:function(e){console.log("common config onchange",e),this.updateFuncList(e)},onCheckAllChange:function(e){console.log("common config onCheckAllChange",e);var t=this.funcOptions.map(function(e){return e.value});this.updateFuncList(e.target.checked?t:[])}}),computed:Object(c["a"])({},C({funcList:function(e){return e.commonConfig.funcList}}),{indeterminate:function(){return!!this.funcList.length&&this.funcList.length>1&&this.funcList.length<this.funcOptions.length+1},checkAll:function(){return this.funcList.length===this.funcOptions.length+1}}),components:{generalDataConfig:h["a"]},props:{code:{type:String,default:""},projectType:{type:String,required:!0}}},w=M,x=(n("fdfb"),n("2877")),L=Object(x["a"])(w,m,g,!1,null,"88fd0832",null),_=L.exports,T=n("6892"),S={name:"configPage",data:function(){return{panelActiveKey:"config_1",showConfigPannel:!0,componentMap:{}}},methods:{removeCurrentModule:function(){this.$emit("removeCurrentModule")},loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("f826")("./".concat(e.mark,"/config.vue"))})}},watch:{currentModule:function(e){this.loadModule(e)}},computed:Object(c["a"])({},Object(v["f"])({panelWidthType:function(e){return e.customProperties.designer.configPanelWidthType}}),{currentModule:function(){return this.$store.state.DragConfig[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.DragConfig[this.code].moduleConfigMap}}),components:{commonConfig:_},props:{code:{type:String,required:!0},projectType:{type:String,required:!0}},created:function(){var e=this;T["a"].$on("switchModuleConfigPanel_".concat(this.code),function(){e.panelActiveKey="config_1"})}},O=S,N=(n("0dbf"),Object(x["a"])(O,f,p,!1,null,"3cbd2432",null)),R=N.exports,j=n("5bd9"),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-container designer-tabs-container"},[e.showLeftSidebar?n("div",{staticClass:"modules-box"},[e._l(e.sourceList,function(t,i){return[n("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"s.hidden === undefined || !s.hidden"}],key:t+"_"+i},[n("h3",{staticClass:"title-line"},[e._v(e._s(t.name))]),n("draggable",{attrs:{element:"a-row","ghost-class":"sortable-ghost",options:{group:{name:"compgroup",pull:"clone",put:!1},sort:!1}},model:{value:t.list,callback:function(n){e.$set(t,"list",n)},expression:"s.list"}},[e._l(t.list,function(t){return[t.comment?n("a-tooltip",{key:t.mark,attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[e._v(e._s(t.comment))])]),n("div",{key:t.mark,staticClass:"module-item",class:{current:e.currentModule.mark===t.mark}},[n("p",{staticClass:"item-line"},[n("span",{staticClass:"item-icon"},[n("a-icon",{attrs:{type:t.icon}})],1),e._v("\n                  "+e._s(t.name)+"\n                ")])])],2):n("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.notIn||!t.notIn.includes(e.code),expression:"item.notIn === undefined || !item.notIn.includes(code)"}],key:t.mark,staticClass:"module-item",class:{current:e.currentModule.mark===t.mark}},[n("p",{staticClass:"item-line"},[n("span",{staticClass:"item-icon"},[n("a-icon",{attrs:{type:t.icon}})],1),e._v("\n                "+e._s(t.name)+"\n              ")])])]})],2)],1)]})],2):e._e(),"list"===e.code?[n("solution-list",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{code:e.code},on:{solutionsChange:e.solutionsChange,countChange:function(t){e.solutionCount=t}}})]:[n("solution-list",{attrs:{code:e.code},on:{countChange:function(t){e.solutionCount=t}}})],e.hasTreeList?n("div",[n("h3",{staticClass:"title-line"},[e._v("相关操作")]),n("a-row",[n("a-col",{attrs:{span:24}},[n("a-button",{attrs:{type:"primary",block:""},on:{click:e.switchLeftTreeRightList}},[e._v("切换为左侧树结构")])],1)],1)],1):e._e()],2)},P=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modules-box"},[e.sourceList.length>0?[n("h3",{staticClass:"title-line"},[e._v("关联组件")]),n("draggable",{attrs:{element:"a-row","ghost-class":"sortable-ghost",options:{group:{name:"compgroup",pull:"clone",put:!1},sort:!1}},model:{value:e.sourceList,callback:function(t){e.sourceList=t},expression:"sourceList"}},[e._l(e.sourceList,function(t){return[t.comment?n("a-tooltip",{key:t.type,attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[e._v(e._s(t.comment))])]),n("div",{key:t.type,staticClass:"module-item"},[n("p",{staticClass:"item-line"},[e._v("\n              "+e._s(t.name)+"\n            ")])])],2):n("div",{key:t.type,staticClass:"module-item"},[n("p",{staticClass:"item-line"},[e._v("\n            "+e._s(t.name)+"\n          ")])])]})],2)]:e._e()],2)},D=[],E=n("3e9c"),I=Object(v["a"])("database"),A=I.mapState,V={name:"SolutionList",data:function(){return{}},methods:{},computed:Object(c["a"])({},A({currentTableName:function(e){return e.currentTableName},relationInfo:function(e){return e.relationInfo}}),{sourceList:function(){var e=this,t=this.relationInfo;return E["a"].filter(function(t){var n=e.code,i=t.permissions;return!i||0===i.length||i.includes(n)}).filter(function(e){var n=e.isValid;return void 0===n||!0===n||"function"!==typeof n||n(t)})}}),watch:{sourceList:function(e){var t=0;e&&(t=e.length),this.$emit("solutionsChange",e),this.$emit("countChange",t)}},components:{draggable:d.a},props:{code:{type:String,default:""}}},q=V,G=(n("5ab4"),Object(x["a"])(q,$,D,!1,null,"7a2a22dc",null)),z=G.exports,B=[{name:"列表页组件",code:"list",list:[{name:"搜索区",icon:"search",mark:"tableSearch"},{name:"操作区",icon:"tool",mark:"tableOperate"},{name:"表格列表",icon:"unordered-list",mark:"tableList"}]},{name:"表单页组件",code:"form",list:[{name:"表单组件",icon:"form",mark:"formPanel"}]},{name:"详情页组件",code:"detail",list:[{name:"详情信息",icon:"more",mark:"detailPanel"},{name:"附加信息",icon:"table",comment:"detailVO中的关联对象列表信息",mark:"refEntityListPanel"}]},{name:"数据导入",code:"import",list:[{name:"表格导入",icon:"cloud-upload",mark:"excelImport"}]},{name:"数据导出",code:"export",list:[{name:"表格导出",icon:"cloud-download",mark:"excelExport"}]},{name:"页面集成",hidden:!0,list:[{name:"通用参数",icon:"code-sandbox",mark:"panelData"}]},{name:"基础组件",list:[{name:"间隔行",icon:"column-height",mark:"paddingc"},{name:"标题行",icon:"line-height",mark:"titleLine"},{name:"操作栏",icon:"control",mark:"operateLine"},{name:"布局器",icon:"layout",mark:"layoutc",notIn:["list"]}]},{name:"自定义组件",list:[{name:"面板组件",icon:"block",mark:"panelContainer"}]},{name:"布局组件",code:"",list:[{name:"布局",icon:"table",mark:"layoutc"}]}],U={name:"SourceTabs",data:function(){return{solutionCount:0,solutions:[]}},methods:{solutionsChange:function(e){this.solutions=e},switchLeftTreeRightList:function(){T["a"].$emit("switchLeftTreeRightList")}},computed:{sourceList:function(){var e=this,t=B.filter(function(t){return void 0===t.code||t.code===e.code});return["import","export"].includes(this.code)&&(t=t.filter(function(e){return void 0!==e.code})),t},hasTreeList:function(){var e=this.solutions;return!(!e||0===e.length)&&e.find(function(e){return"tree4listPage"===e.key})}},components:{draggable:d.a,solutionList:z},props:{code:{type:String,required:!0},currentModule:{type:Object,default:function(){}},showLeftSidebar:{type:Boolean,default:!0}}},K=U,J=(n("d484"),Object(x["a"])(K,F,P,!1,null,"7642387f",null)),W=J.exports,H=Object(v["a"])("DragConfig"),Y=H.mapActions,Q={LEFT_TREE_RIGHT_LIST:"LEFT_TREE_RIGHT_LIST"},X={LEFT_TREE_RIGHT_LIST:{funcName:"leftTreeRightList"}},Z={methods:Object(c["a"])({},Y({modifyCurrentModule:"modifyCurrentModule"}),{leftTreeRightList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i,o,a,r,c,s,l,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=E["a"].find(function(e){return"tree4listPage"===e.key}),n){e.next=3;break}return e.abrupt("return",!1);case 3:return i=this.targetList.length,o="layoutc",e.next=7,this.$refs.workPanel.addModuleObj({mark:o},i);case 7:return a=this.targetList[i],r=a.uuid,e.next=11,this.$refs.workPanel.addModuleObj(n,i+1);case 11:return c=this.targetList[i+1],e.next=14,this.$refs.workPanel.afterAddModuleObj(n,c);case 14:if(s=this.moduleConfigMap[r],s&&s.metadata){e.next=17;break}return e.abrupt("return",!1);case 17:return l=this.targetList.filter(function(e){return"layoutc"!==e.mark&&"tree4listPage"!==e.key}),s.metadata.colList=[{span:6,moduleList:[c]},{span:18,moduleList:l}],u=this.targetList.filter(function(e){return"layoutc"===e.mark}),e.next=22,this.$refs.workPanel.loadValue(u);case 22:return e.next=24,this.modifyCurrentModule({key:this.code,module:c});case 24:t.tableName&&T["a"].$emit("setTableName4abstractPanel_".concat(c.uuid),t.tableName),T["a"].$emit("layoutModuleListReload_".concat(r)),this.$forceUpdate();case 27:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),asynSetTimeout:function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},waitNextTick:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){t()})})}}),computed:{moduleConfigMap:function(){var e=this.code;return this.$store.state.DragConfig[e].moduleConfigMap}},mounted:function(){var e=this;this.$nextTick(function(){var t=e.code;console.log("监听事件：pageLayoutChange_".concat(t)),T["a"].$on("pageLayoutChange_".concat(t),function(n){console.log("接受事件: pageLayoutChange_".concat(t));var i=n.type;i&&Q[i]&&X[i].funcName&&e[X[i].funcName](n)})})},destroyed:function(){var e=this.code;console.log("销毁事件：pageLayoutChange_".concat(e)),T["a"].$off("pageLayoutChange_".concat(e))}},ee=Object(v["a"])("DragConfig"),te=ee.mapMutations,ne={name:"PcDesigner",data:function(){return{targetList:[],sidebarState:{left:!0,right:!0}}},methods:Object(c["a"])({},te(["resetPcDesigner","updateConfigMap"]),{setModuleList:function(e){this.targetList=e},toggleSidebar:function(e){this.sidebarState[e]=!this.sidebarState[e]},beforeModuleJoinValidate:function(e){var t=e.mark;if("detailPanel"===t){var n=this.targetList.find(function(e){return e.mark===t});return n?{valid:!1,msg:"当前组件不允许重复添加"}:{valid:!0}}return{valid:!0}},reset:function(){this.targetList=[],this.resetPcDesigner(this.code),this.$refs.workPanel.clearAllModuleList()},resetData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.moduleList,i=t.configMap,this.reset(),e.next=4,this.nextTick();case 4:return e.next=6,this.setData({moduleList:n,configMap:i});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.moduleList,i=t.configMap,this.updateConfigMap({key:this.code,configMap:i}),!(n&&n.length>0)){e.next=11;break}o=0;case 4:if(!(o<n.length)){e.next=11;break}return a=n[o],e.next=8,this.$refs.workPanel.addModuleObj(a,o);case 8:o++,e.next=4;break;case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),nextTick:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){t()})})}}),watch:{targetList:function(e,t){1!==t.length||2!==e.length||e[0].uuid||(e[0]=t[0]),this.$emit("change",e)}},computed:{sourceList:function(){var e=this;return B.filter(function(t){return void 0===t.code||t.code===e.code})},currentModule:function(){return this.$store.state.DragConfig[this.code].currentModule}},mixins:[Z],components:{draggable:d.a,sourceTabs:W,"work-panel":j["a"],"config-page":R},props:{code:{type:String,required:!0},initModuleList:{type:Array,required:!1,default:void 0},initModuleMarkList:{type:Array,required:!1,default:void 0},projectType:{type:String,required:!0}},mounted:function(){this.$nextTick(Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.initModuleList,!(void 0!==t&&t.length>0)){e.next=7;break}return this.targetList=this.initModuleList,e.next=5,this.$refs.workPanel.initTargetList(t);case 5:e.next=16;break;case 7:if(void 0===this.initModuleMarkList){e.next=16;break}n=0;case 9:if(!(n<this.initModuleMarkList.length)){e.next=16;break}return i=this.initModuleMarkList[n],e.next=13,this.$refs.workPanel.addModuleObj({mark:i},n);case 13:n++,e.next=9;break;case 16:case"end":return e.stop()}},e,this)})))},created:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}}},ie=ne,oe=(n("1813"),Object(x["a"])(ie,s,l,!1,null,"902ea6c8",null)),ae=oe.exports,re=n("3aa3"),ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"添加上级菜单",visible:e.state.visible,width:720,okText:"确定",cancelText:"取消"},on:{ok:e.onSubmit,cancel:e.close}},[n("a-form",{attrs:{layout:"vertical",form:e.form}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"菜单名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["displayName",{rules:[{required:!0,message:"菜单名称不能为空",whitespace:!0}]}],expression:"[\n              'displayName',\n              {\n                rules: [{ required: true, message: '菜单名称不能为空', whitespace: true }]\n              }\n            ]"}],attrs:{placeholder:"菜单显示名称"}})],1)],1),n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"菜单编码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["resourceCode",{rules:[{required:!0,message:"菜单编码不能为空",whitespace:!0},{validator:e.validator}]}],expression:"[\n              'resourceCode',\n              {\n                rules: [{ required: true, message: '菜单编码不能为空', whitespace: true }, {validator}]\n              }\n            ]"}],attrs:{placeholder:"小写英文编码"}})],1)],1),n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"菜单图标"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{rules:[{required:!0,message:"菜单图标不能为空",whitespace:!0}]}],expression:"[\n              'icon',\n              {\n                rules: [{ required: true, message: '菜单图标不能为空', whitespace: true }]\n              }\n            ]"}],attrs:{placeholder:"请选择或输入菜单图标"}})],1)],1)],1),n("a-form-item",{attrs:{label:"点击选择图标"}},[n("a-row",{staticStyle:{"max-height":"240px","overflow-y":"scroll"}},["antdv"===e.projectType?e._l(e.iconsMap["antdv"],function(t){return n("a-col",{key:t,staticClass:"icon-col",class:{current:e.form.getFieldValue("icon")===t},attrs:{span:2},on:{click:function(){e.form.setFieldsValue({icon:t})}}},[n("a-icon",{attrs:{type:t}})],1)}):e._e(),"element"===e.projectType?e._l(e.iconsMap["element"],function(t){return n("a-col",{key:t,staticClass:"icon-col icon-element",class:{current:e.form.getFieldValue("icon")===t},attrs:{span:2},on:{click:function(){e.form.setFieldsValue({icon:t})}}},[n("i",{class:t})])}):e._e()],2)],1)],1)],1)},se=[],le=n("2abb"),ue={antdv:["account-book","alert","api","appstore","audio","bank","bell","book","bug","bulb","calculator","build","calendar","camera","car","carry-out","cloud","code","compass","contacts","container","control","credit-card","crown","customer-service","dashboard","database","dislike","environment","experiment","eye-invisible","eye","file-add","file-excel","file-exclamation","file-image","file-markdown","file-pdf","file-ppt","file-text","file-unknown","file-word","file-zip","file","filter","fire","flag","folder-add","folder","folder-open","frown","funnel-plot","gift","hdd","heart","home","hourglass","idcard","insurance","interaction","layout","like","lock","mail","medicine-box","meh","message","mobile","money-collect","pay-circle","notification","phone","picture","play-square","printer","profile","project","pushpin","property-safety","read","reconciliation","red-envelope","rest","rocket","safety-certificate","save","schedule","security-scan","setting","shop","shopping","skin","smile","sound","star","switcher","tablet","tag","tags","tool","thunderbolt","trophy","unlock","usb","video-camera","wallet","apartment","audit","barcode","bars","block","border","branches","ci","cloud-download","cloud-server","cloud-sync","cloud-upload","cluster","coffee","copyright","deployment-unit","desktop","disconnect","dollar","download","ellipsis","euro","exception","export","file-done","file-jpg","file-protect","file-sync","file-search","fork","gateway","global","gold","history","import","inbox","key","laptop","link","line","loading-3-quarters","loading","man","menu","monitor","more","number","percentage","paper-clip","pound","poweroff","pull-request","qrcode","reload","safety","robot","scan","search","select","shake","share-alt","shopping-cart","solution","sync","table","team","to-top","trademark","transaction","upload","user-add","user-delete","usergroup-add","user","usergroup-delete","wifi","woman"],element:["el-icon-platform-eleme","el-icon-eleme","el-icon-delete-solid","el-icon-delete","el-icon-s-tools","el-icon-setting","el-icon-user-solid","el-icon-user","el-icon-phone","el-icon-phone-outline","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-s-goods","el-icon-goods","el-icon-warning","el-icon-warning-outline","el-icon-question","el-icon-info","el-icon-remove","el-icon-circle-plus","el-icon-success","el-icon-error","el-icon-zoom-in","el-icon-zoom-out","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-circle-check","el-icon-circle-close","el-icon-s-help","el-icon-help","el-icon-minus","el-icon-plus","el-icon-check","el-icon-close","el-icon-picture","el-icon-picture-outline","el-icon-picture-outline-round","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-camera-solid","el-icon-camera","el-icon-video-camera-solid","el-icon-video-camera","el-icon-message-solid","el-icon-bell","el-icon-s-cooperation","el-icon-s-order","el-icon-s-platform","el-icon-s-fold","el-icon-s-unfold","el-icon-s-operation","el-icon-s-promotion","el-icon-s-home","el-icon-s-release","el-icon-s-ticket","el-icon-s-management","el-icon-s-open","el-icon-s-shop","el-icon-s-marketing","el-icon-s-flag","el-icon-s-comment","el-icon-s-finance","el-icon-s-claim","el-icon-s-custom","el-icon-s-opportunity","el-icon-s-data","el-icon-s-check","el-icon-s-grid","el-icon-menu","el-icon-share","el-icon-d-caret","el-icon-caret-left","el-icon-caret-right","el-icon-caret-bottom","el-icon-caret-top","el-icon-bottom-left","el-icon-bottom-right","el-icon-back","el-icon-right","el-icon-bottom","el-icon-top","el-icon-top-left","el-icon-top-right","el-icon-arrow-left","el-icon-arrow-right","el-icon-arrow-down","el-icon-arrow-up","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-video-pause","el-icon-video-play","el-icon-refresh","el-icon-refresh-right","el-icon-refresh-left","el-icon-finished","el-icon-sort","el-icon-sort-up","el-icon-sort-down","el-icon-rank","el-icon-loading","el-icon-view","el-icon-c-scale-to-original","el-icon-date","el-icon-edit","el-icon-edit-outline","el-icon-folder","el-icon-folder-opened","el-icon-folder-add","el-icon-folder-remove","el-icon-folder-delete","el-icon-folder-checked","el-icon-tickets","el-icon-document-remove","el-icon-document-delete","el-icon-document-copy","el-icon-document-checked","el-icon-document","el-icon-document-add","el-icon-printer","el-icon-paperclip","el-icon-takeaway-box","el-icon-search","el-icon-monitor","el-icon-attract","el-icon-mobile","el-icon-scissors","el-icon-umbrella","el-icon-headset","el-icon-brush","el-icon-mouse","el-icon-coordinate","el-icon-magic-stick","el-icon-reading","el-icon-data-line","el-icon-data-board","el-icon-pie-chart","el-icon-data-analysis","el-icon-collection-tag","el-icon-film","el-icon-suitcase","el-icon-suitcase-1","el-icon-receiving","el-icon-collection","el-icon-files","el-icon-notebook-1","el-icon-notebook-2","el-icon-toilet-paper","el-icon-office-building","el-icon-school","el-icon-table-lamp","el-icon-house","el-icon-no-smoking","el-icon-smoking","el-icon-shopping-cart-full","el-icon-shopping-cart-1","el-icon-shopping-cart-2","el-icon-shopping-bag-1","el-icon-shopping-bag-2","el-icon-sold-out","el-icon-sell","el-icon-present","el-icon-box","el-icon-bank-card","el-icon-money","el-icon-coin","el-icon-wallet","el-icon-discount","el-icon-price-tag","el-icon-news","el-icon-guide","el-icon-male","el-icon-female","el-icon-thumb","el-icon-cpu","el-icon-link","el-icon-connection","el-icon-open","el-icon-turn-off","el-icon-set-up","el-icon-chat-round","el-icon-chat-line-round","el-icon-chat-square","el-icon-chat-dot-round","el-icon-chat-dot-square","el-icon-chat-line-square","el-icon-message","el-icon-postcard","el-icon-position","el-icon-turn-off-microphone","el-icon-microphone","el-icon-close-notification","el-icon-bangzhu","el-icon-time","el-icon-odometer","el-icon-crop","el-icon-aim","el-icon-switch-button","el-icon-full-screen","el-icon-copy-document","el-icon-mic","el-icon-stopwatch","el-icon-medal-1","el-icon-medal","el-icon-trophy","el-icon-trophy-1","el-icon-first-aid-kit","el-icon-discover","el-icon-place","el-icon-location","el-icon-location-outline","el-icon-location-information","el-icon-add-location","el-icon-delete-location","el-icon-map-location","el-icon-alarm-clock","el-icon-timer","el-icon-watch-1","el-icon-watch","el-icon-lock","el-icon-unlock","el-icon-key","el-icon-service","el-icon-mobile-phone","el-icon-bicycle","el-icon-truck","el-icon-ship","el-icon-basketball","el-icon-football","el-icon-soccer","el-icon-baseball","el-icon-wind-power","el-icon-light-rain","el-icon-lightning","el-icon-heavy-rain","el-icon-sunrise","el-icon-sunrise-1","el-icon-sunset","el-icon-sunny","el-icon-cloudy","el-icon-partly-cloudy","el-icon-cloudy-and-sunny","el-icon-moon","el-icon-moon-night","el-icon-dish","el-icon-dish-1","el-icon-food","el-icon-chicken","el-icon-fork-spoon","el-icon-knife-fork","el-icon-burger","el-icon-tableware","el-icon-sugar","el-icon-dessert","el-icon-ice-cream","el-icon-hot-water","el-icon-water-cup","el-icon-coffee-cup","el-icon-cold-drink","el-icon-goblet","el-icon-goblet-full","el-icon-goblet-square","el-icon-goblet-square-full","el-icon-refrigerator","el-icon-grape","el-icon-watermelon","el-icon-cherry","el-icon-apple","el-icon-pear","el-icon-orange","el-icon-coffee","el-icon-ice-tea","el-icon-ice-drink","el-icon-milk-tea","el-icon-potato-strips","el-icon-lollipop","el-icon-ice-cream-square","el-icon-ice-cream-round"]},de={name:"DictionaryModal",data:function(){return{state:{visible:!1,submitBtn:!1},form:this.$form.createForm(this),icon:"",iconsMap:ue}},methods:{validator:function(e,t,n){"system"===t?n(new Error("菜单编码不能设置为system")):n()},open:function(){this.state.visible=!0},close:function(){this.state.visible=!1,this.form.resetFields()},validate:function(){var e=this;return new Promise(function(t,n){e.form.validateFields(function(i,o){i?n(i):(o["parentId"]=0,o["displayType"]="MENU",t(o)),setTimeout(function(){e.state.submitBtn=!1},600)})})},onSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.state.submitBtn=!0,e.next=3,this.validate();case 3:return t=e.sent,e.prev=4,e.next=7,this.add(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](4),this.submitFailed(e.t0);case 12:case"end":return e.stop()}},e,this,[[4,9]])}));function t(){return e.apply(this,arguments)}return t}(),add:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(c["a"])({},t,{parentId:0,displayType:"MENU"}),e.next=3,le["a"].post("/diboot/devtools/pcds/addm",t);case 3:if(n=e.sent,0!==n.code){e.next=9;break}sessionStorage.setItem("currentIcon",t.icon),this.submitSuccess("添加上级菜单成功",n.data),e.next=10;break;case 9:throw new Error(n.msg);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),submitSuccess:function(e,t){this.$notification.success({message:"操作成功",description:e}),this.close(),this.form.resetFields(),this.$emit("complete",t)},submitFailed:function(e){e&&e.msg&&this.$notification.error({message:"操作失败",description:e.msg})}},props:{projectType:{type:String,default:""}}},fe=de,pe=(n("a0ab6"),Object(x["a"])(fe,ce,se,!1,null,"6e31f73e",null)),me=pe.exports,ge=n("4999"),he=n("2ef0"),ve=n.n(he),be=[{code:"custom",name:"自定义",icon:"profile",funcList:["custom"],moduleList:[],closable:!1},{code:"list",name:"列表页",icon:"unordered-list",funcList:["list"],moduleList:["tableSearch","tableOperate","tableList"],closable:!0},{code:"form",name:"表单页",icon:"form",funcList:["create","update"],moduleList:["formPanel"],closable:!0},{code:"detail",name:"详情页",icon:"info-circle",funcList:["detail"],moduleList:["detailPanel"],closable:!0},{code:"export",name:"导出",icon:"cloud-download",funcList:["export"],moduleList:["excelExport"],closable:!0},{code:"import",name:"导入",icon:"cloud-upload",funcList:["import"],moduleList:["excelImport"],closable:!0}],ye=n("03cd"),Ce=n.n(ye),ke=n("2b0e"),Me=n("3e16"),we=n("fa62"),xe=n("c1df"),Le=n.n(xe),_e=n("9fb0"),Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tooltip",{attrs:{overlayClassName:"subscribe-container"}},[n("qrcode",{attrs:{slot:"title"},slot:"title"}),n("h6",{staticClass:"subscribe-title"},[n("a-icon",{attrs:{type:"scan"}}),e._v(" 订阅/续费前端生成")],1)],1)},Se=[],Oe=n("49f6"),Ne={name:"subscribe",components:{qrcode:Oe["a"]}},Re=Ne,je=(n("804a"),Object(x["a"])(Re,Te,Se,!1,null,null,null)),Fe=je.exports,Pe=Object(v["a"])("DragConfig"),$e=Pe.mapState,De=Pe.mapMutations,Ee=Pe.mapActions,Ie=Object(v["a"])("panelDesigner"),Ae=Ie.mapMutations,Ve=Object(v["a"])("database"),qe=Ve.mapState,Ge=Ve.mapMutations,ze=Ve.mapActions,Be=Object(v["a"])("customProperties"),Ue=Be.mapState;ke["default"].use(Ce.a,{name:"fs"});var Ke="CUSTOM_PAGE__",Je="ss",We="gn",He={name:"PcDesignerIndex",inject:["reload"],data:function(){return{SNAPSHOT:Je,GENERATE:We,resetInitDesigner:!1,initial:!0,customPage:!1,loadTableFlag:!1,popoverVisible:!1,activeSnapshotId:"",saveSnapshot:!0,snapshotLoading:!1,subscribeSuccess:!1,initModuleListMap:{},hasIam:void 0,currentPaneKey:"list",moduleListMap:{},router:void 0,menuList:[],originRouter:"",currentGenerateRouter:"",currentGenerateChildRouter:"",fullscreen:!1,gnLoading:!1,ssLoading:!1,oldFuncListSize:0,recentVersionList:[],recentVersion:void 0,model:{projectType:"",parentMenuCode:"",currentMenuName:"",currentMenuValue:"",storageVersion:""},rules:{projectType:[{required:!0,message:"请选择项目类型",trigger:"change"}],parentMenuCode:[{required:!0,message:"请选择上级菜单",trigger:"change"}],currentMenuName:[{required:!0,message:"请输入菜单名称",trigger:"change"}],currentMenuValue:[{required:!0,message:"请输入菜单编码",trigger:"change"}]}}},methods:Object(c["a"])({},De(["addFunc","removeFunc","resetPcDesigner","updateFuncList","setDefaultFuncList","setCustomFuncList","updatePageConfig"]),Ae({batchAddPanelConfigMap:"batchAddConfigMap"}),Ge(["resetDatabase"]),Ee(["loadProjectType"]),ze(["switchTable","GetTables"]),{addModule:function(e){if(this.snapshotLoading)return!1;if("tableOperate"===e.mark){var t=this.funcList.filter(function(e){return!["create","import","export"].includes(e)});t.push.apply(t,["create","import","export"]),this.updateFuncList(t)}},removeModule:function(e){var t=e.m,n=e.targetList;if("tableOperate"===t.mark){var i=n.find(function(e){return e.mark===t.mark});if(void 0===i){var o=this.funcList.filter(function(e){return!["create","import","export"].includes(e)});this.updateFuncList(o)}}},changeCurrentTable:function(e){var t=this;e===Ke?(this.setCustomFuncList(),this.initial=!1,this.customPage=!0,this.model.currentMenuName="自定义页面",this.loadRecentVersion(Ke),setTimeout(function(){t.loadTableFlag=!0,t.currentPaneKey="custom"},320)):(this.customPage=!1,this.switchTable(e).then(function(){t.loadRecentVersion(e).then(function(){t.recentVersion?t.loadRecentVersionConfig(t.recentVersion):t.setDefaultFuncList()}).catch(function(){t.setDefaultFuncList()}),t.initial=!1,t.model.currentMenuName="".concat(t.tableObj[e].classLabel,"管理"),setTimeout(function(){t.loadTableFlag=!0},320)}))},loadRecentVersion:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={tableName:t},e.prev=1,e.next=4,re["a"].get("/diboot/devtools/pcds/rctl",n);case 4:i=e.sent,0===i.code&&i.data&&i.data.length>0?(this.recentVersionList=i.data,this.recentVersion=i.data[0]):(this.recentVersion=void 0,this.recentVersionList=[]),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log("加载最新版本快照失败",e.t0),this.recentVersion=void 0;case 12:case"end":return e.stop()}},e,this,[[1,8]])}));function t(t){return e.apply(this,arguments)}return t}(),loadRecentVersionConfig:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i,o,a,r,c,s,l,u,d,f,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.activeSnapshotId=t.id,n=this.recentVersion,i=t||n,o=i.panelName,a=i.configData,a){e.next=6;break}return this.$message.warning("加载当前版本失败"),e.abrupt("return",!1);case 6:return e.prev=6,this.snapshotLoading=!0,r=JSON.parse(a),c=r.pageConfig,s=r.commonConfig,l=r.panelConfig,u=r.className,this.customPage&&(this.model.currentMenuValue=u,this.model.currentMenuName=o),this.updatePageConfig({key:"commonConfig",config:s}),e.next=14,this.nextTick();case 14:e.t0=regeneratorRuntime.keys(c);case 15:if((e.t1=e.t0()).done){e.next=32;break}return f=e.t1.value,void 0===d&&(d=f),this.currentPaneKey=f,e.next=21,this.nextTick();case 21:return p=c[f],e.prev=22,e.next=25,this.resetDesignerConfig(f,p);case 25:e.next=30;break;case 27:e.prev=27,e.t2=e["catch"](22),console.log("重置出错",f,e.t2);case 30:e.next=15;break;case 32:return e.next=34,this.nextTick();case 34:return this.batchAddPanelConfigMap({key:"preview",configMap:l.moduleConfigMap}),e.next=37,this.nextTick();case 37:this.saveSnapshot=!0,this.model.storageVersion=o,this.popoverVisible=!1,void 0!==d&&(this.currentPaneKey=d),e.next=48;break;case 43:e.prev=43,e.t3=e["catch"](6),console.log("加载当前页面配置版本失败",e.t3),this.$message.error("加载当前页面配置版本失败",e.t3),this.reload();case 48:this.snapshotLoading=!0;case 49:case"end":return e.stop()}},e,this,[[6,43],[22,27]])}));function t(t){return e.apply(this,arguments)}return t}(),nextTick:function(){var e=this;return new Promise(function(t){e.$nextTick(function(){t()})})},resetDesignerConfig:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var i,o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=ve.a.cloneDeep(n.moduleList),o=n.moduleConfigMap,console.log("reset designer config",t),a=this.$refs["pc_designer_".concat(t)],!(a&&a.length>0)){e.next=7;break}return e.next=7,a[0].resetData({moduleList:i,configMap:o});case 7:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),onEdit:function(e,t){this["".concat(t,"Pane")](e)},addPane:function(){var e=this,t=this.currentPanes.map(function(e){return e.code}),n=this.nowAllPanes.find(function(e){return!t.includes(e.code)});if(void 0===n)return this.$message.warning("没有更多选项"),!1;this.currentPaneKey=n.code;var i=ve.a.cloneDeep(n.funcList);if("form"!==n.code||this.funcList.includes("delete"))i.forEach(function(t){e.addFunc(t)});else{var o=this;this.$confirm({title:"需要同步添加删除功能吗?",content:"您正在自动添加表单项，是否也需要添加删除功能，确认后将自动添加该功能！",onOk:function(){i.push("delete"),i.forEach(function(e){o.addFunc(e)})},onCancel:function(){i.forEach(function(e){o.addFunc(e)})}})}},removePane:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPaneFuncList(t);case 2:n=e.sent,n.forEach(function(e){i.removeFunc(e)});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getPaneFuncList:function(e){var t=this,n=this;return new Promise(function(i){var o=be.find(function(t){return t.code===e});if(void 0===o)return n.$message.warning("参数错误"),i([]),[];"form"===e&&t.funcList.includes("delete")?n.$confirm({title:"需要同步移除删除功能吗?",content:"您正在移除表单项，是否也需要移除删除功能，确认后将自动移除删除功能！",onOk:function(){i([].concat(Object(a["a"])(o.funcList),["delete"]))},onCancel:function(){i(o.funcList)}}):i(o.funcList)})},onMainTableChange:function(){},moduleListChanged:function(e,t){this.moduleListMap[e]=t},snapshoot:function(){this.generate(Je)},generate:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i,o,a,r,s,l,u,d,f,p,m,g,h,v,b,y,C,k=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.customPage,t!==We){e.next=4;break}return e.next=4,this.validateFormModel();case 4:if(i=Ke,n||(i=this.$store.state.database.currentTableName),o={},this.currentPanes.forEach(function(e){o[e.code]=ve.a.cloneDeep(k.$store.state.DragConfig[e.code]),o[e.code].moduleList=k.moduleListMap[e.code]||[],delete o[e.code].currentModule}),n||0!==Object.keys(o).length){e.next=11;break}return this.$message.error("无可提交页面，请至少配置一个页面！"),e.abrupt("return",!1);case 11:return a=!!o["list"],r=this.$store.state.DragConfig.commonConfig,s=this.$store.state.panelDesigner.preview,l=this.model.projectType,u={tableName:i,projectType:l,pageConfig:o,commonConfig:r,panelConfig:s},this.model.storageVersion="快照版本_".concat(Le()().format("YYYY_MM_DD hh:mm:ss")),d=this.model,f=d.storageVersion,p=d.currentMenuName,m=d.currentMenuValue,n&&(u.className=m,u.instClassName=m),e.next=21,this.validateConfig(u);case 21:if(g=e.sent,g){e.next=24;break}return e.abrupt("return",!1);case 24:this["".concat(t,"Loading")]=!0,h=m,v=p,n||(h=this.tableObj[i].className,v=this.tableObj[i].classLabel),b=JSON.stringify(u),y={config:b,className:h,classLabel:v,tableName:i,storageVersion:f,hasListPage:a},C=t===We&&this.buildMenuRouterInfo(n,m,p,i)||{},this.submit(Object(c["a"])({},y,C),t);case 32:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),buildMenuRouterInfo:function(e,t,n,i){var o=JSON.parse(this.model.parentMenuCode),a=o.id,r=o.moduleName,c=o.moduleTitle,s=r?r.replace(r[0],r[0].toLowerCase()):"";this.currentGenerateRouter=e?this.generateCustomRouter(s,t,n,r,c,sessionStorage.getItem("currentIcon")):this.generateRouter(s,i,r,c,sessionStorage.getItem("currentIcon"));var l=this.originRouter,u=this.currentGenerateRouter,d=this.currentChildRouter;return{originRouter:l,currentGenerateRouter:u,currentChildRouter:d,moduleName:r,moduleId:a}},submit:function(e,t){var n=this,i="gn"===t?"生成页面成功！":"暂存快照成功！";re["a"].post("/diboot/devtools/pcds/".concat(t),e).then(function(e){n["".concat(t,"Loading")]=!1,0===e.code?(n.$notification.success({message:"操作成功！",description:i}),sessionStorage.removeItem("currentIcon"),n.reload()):n.$notification.error({message:"操作失败！",description:e.msg})}).catch(function(){n["".concat(t,"Loading")]=!1})},validateConfig:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.pageConfig,!n){e.next=8;break}if(i=[],ve.a.forEach(n,function(e,t){var n=e.moduleList;0===n.length&&i.push(t)}),!(i.length>0)){e.next=8;break}return o=be.filter(function(e){return i.includes(e.code)}).map(function(e){return e.name}).join("、"),this.$message.error("请先预览确认 ".concat(o," 相关页面的配置！")),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validateFormModel:function(){var e=this;return new Promise(function(t,n){e.$refs.formModel.validate(function(e){e?t():n(new Error("校验失败"))})})},checkFileExist:function(){var e=this;re["a"].get("/diboot/devtools/cpt/all").then(function(t){if(0===t.code&&!t.data.includes("FILE")){var n="open".concat(Date.now());e.$notification.open({message:"后端文件组件缺失，请知悉！",duration:0,description:"文件组件的缺失将导致 导入、导出，文件、图片上传等功能不能正常使用，请在后端依赖中引入文件组件",btn:function(t){return t("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return e.$notification.close(n)}}},"确定")},key:n,onClose:close})}})},getProjectType:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadProjectType();case 2:t=e.sent,this.model.projectType=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getMenuList:function(e){var t=this;re["a"].get("/diboot/devtools/pcds/trmnl").then(function(n){0===n.code&&(t.menuList=n.data,void 0!==e&&setTimeout(function(){t.model.parentMenuCode='{"moduleName": "'.concat(e.resourceCode,'", "moduleTitle": "').concat(e.displayName,'", "id": ').concat(e.id,"}")},200))})},getRouter:function(){var e=this;re["a"].getWithoutMsg("/diboot/devtools/pcds/rt").then(function(t){0===t.code?e.originRouter=t.data:e.$notification.warning({key:t.msg,message:"前端配置提示",description:t.msg&&t.msg.includes(":")?t.msg.split(":")[1]:t.msg})})},generateRouter:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dashboard",a=this.tableObj[t].instClassName,r=this.tableObj[t].className,c=this.model.currentMenuName||this.tableObj[t].classLabel,s=e?"/".concat(e):"/";i=i||c,n=n||"GenerateRouter",e=e?"/".concat(e,"/"):"/";var l="antdv"===this.model.projectType;return this.currentChildRouter="\n       {\n         path: '".concat(l?e:"").concat(a,"/list',\n         name: '").concat(a,"List',\n         component: () => import('@/views").concat(e).concat(a,"/list'),\n         meta: { title: '").concat(c,"', keepAlive: true, permission: ['").concat(r,"'] }\n       }\n      "),"\n    {\n     path: '".concat(s,"',\n     redirect: '").concat(e).concat(a,"/list',\n     component: ").concat(l?"RouteView":"Layout",",").concat(l?"":"\n     alwaysShow: true,","\n     name: '").concat(n,"',\n     meta: { title: '").concat(i,"', icon: '").concat(o,"', permission: ['").concat(n,"'] },\n     children: [\n       ").concat(this.currentChildRouter,"\n     ]\n    }")},generateCustomRouter:function(e,t,n,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"dashboard",r=this.model.currentMenuName,c=e?"/".concat(e):"/";o=o||r,i=i||"GenerateRouter",e=e?"/".concat(e,"/"):"/";var s="antdv"===this.model.projectType;return this.currentChildRouter="\n       {\n         path: '".concat(s?e:"").concat(t,"/index',\n         name: '").concat(t,"Index',\n         component: () => import('@/views").concat(e).concat(t,"/index'),\n         meta: { title: '").concat(n,"', keepAlive: true }\n       }\n      "),"\n    {\n     path: '".concat(c,"',\n     redirect: '").concat(e).concat(t,"/index',\n     component: ").concat(s?"RouteView":"Layout",",").concat(s?"":"\n     alwaysShow: true,","\n     name: '").concat(i,"',\n     meta: { title: '").concat(o,"', icon: '").concat(a,"', permission: ['").concat(i,"'] },\n     children: [\n       ").concat(this.currentChildRouter,"\n     ]\n    }")},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},toggle:function(){this.$refs["fullscreen"].toggle()},fullscreenChange:function(e){var t=this;this.fullscreen=e,setTimeout(function(){t.currentPanes.forEach(function(n){var i="pc_designer_".concat(n.code);t.$refs[i]&&t.$refs[i].length>0&&t.$refs[i][0].windowResize&&t.$refs[i][0].windowResize(e)})},500)},checkIamExist:function(){var e=this;re["a"].get("/diboot/devtools/cpt/all").then(function(t){0===t.code&&(e.hasIam=t.data&&t.data.includes("IAM"))}).catch(function(){})},resetInitPcDesigner:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.customPage,n=Ke,t||(n=this.$store.state.database.currentTableName),this.GetTables(),this.resetDatabase(),this.resetPcDesigner(),this.resetInitDesigner=!this.resetInitDesigner,t?(this.model.currentMenuName="自定义页面",this.model.currentMenuValue="",this.setCustomFuncList()):this.switchTable(n).then(function(){i.setDefaultFuncList()});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}),mixins:[Me["a"]],computed:Object(c["a"])({},$e({funcList:function(e){return e.commonConfig.funcList}}),Ue({previewBtnGroupAlign:function(e){return e.designer.previewBtnGroupAlign}}),qe({visibleTables:function(e){return e.visibleTables},currentTableName:function(e){return e.currentTableName}}),{menuOptions:function(){var e=this.menuList;return e&&0!==e.length?e.filter(function(e){return"orgStructure"!==e.resourceCode}):[]},isNotEnt:function(){var e=this.$ls.get(_e["a"]);return e&&0!==e.indexOf("EntL_")},tableObj:function(){var e={};return this.visibleTables.forEach(function(t){e[t.tableName]={className:t.className,instClassName:t.instClassName,classLabel:t.objName}}),e},currentTableObj:function(){var e=this;return this.visibleTables&&this.visibleTables.length>0&&this.currentTableName?this.visibleTables.find(function(t){return t.tableName===e.currentTableName}):{}},currentPanes:function(){var e=this;return this.nowAllPanes.filter(function(t){var n=t.funcList.find(function(t){return e.funcList.includes(t)});return void 0!==n})},nowAllPanes:function(){var e=this;return be.filter(function(t){return e.customPage&&"custom"===t.code||!e.customPage&&"custom"!==t.code})}}),watch:{funcList:function(e){0!==this.oldFuncListSize&&e&&e.length<this.oldFuncListSize&&(this.currentPanes&&this.currentPanes.length>0?this.currentPaneKey=this.currentPanes[0].code:this.currentPaneKey="list"),this.oldFuncListSize=e?e.length:0}},components:{Subscribe:Fe,pcDesigner:ae,routerCreateModal:me,tableListSearch:ge["a"],Fullscreen:Ce.a,nonePermissionModal:we["a"]},created:function(){this.resetDatabase(),this.resetPcDesigner(),this.getProjectType(),this.getRouter(),this.getMenuList(),this.checkFileExist(),this.checkIamExist(),this.$store.commit("INIT_DESINGER_CONFIG")},destroyed:function(){this.resetDatabase(),this.resetPcDesigner()}},Ye=He,Qe=(n("5ebd"),Object(x["a"])(Ye,i,o,!1,null,"254cdf5a",null));t["default"]=Qe.exports},"804a":function(e,t,n){"use strict";var i=n("0536"),o=n.n(i);o.a},8141:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-form",{staticClass:"panel-props-config ",attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("\n      面板data参数配置\n      "),n("a-icon",{staticStyle:{cursor:"pointer",color:"rgb(24, 144, 255)"},attrs:{type:"plus-circle"},on:{click:e.addProp}})],1),n("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[e._l(e.moduleConfig.scriptConfig.data,function(t,i){return[n("a-collapse-panel",{key:"config_panel_"+i,attrs:{header:t.key?t.key:"参数"+(i+1)+" 配置"}},[n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"参数"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数名称"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"config.key"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"说明"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数说明"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"config.name"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"类型"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"参数类型",size:"small"},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"config.type"}},[n("a-select-option",{attrs:{value:"String"}},[e._v("\n                String\n              ")]),n("a-select-option",{attrs:{value:"Array"}},[e._v("\n                Array\n              ")]),n("a-select-option",{attrs:{value:"Object"}},[e._v("\n                Object\n              ")]),n("a-select-option",{attrs:{value:"Function"}},[e._v("\n                Function\n              ")]),n("a-select-option",{attrs:{value:"Number"}},[e._v("\n                Number\n              ")]),n("a-select-option",{attrs:{value:"Boolean"}},[e._v("\n                Boolean\n              ")])],1)],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"默认值"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数默认值"},model:{value:t.default,callback:function(n){e.$set(t,"default",n)},expression:"config.default"}})],1),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数变化检测"}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"不启用"},model:{value:t.hasWatch,callback:function(n){e.$set(t,"hasWatch",n)},expression:"config.hasWatch"}})],1),t.hasWatch?n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数检测编辑"}},[n("a-popover",{attrs:{title:"参数检测代码编辑",placement:"left",trigger:"click"}},[n("template",{slot:"content"},[n("smart-code-editor",{attrs:{code:e.code},model:{value:t.watchCode,callback:function(n){e.$set(t,"watchCode",n)},expression:"config.watchCode"}})],1),n("a-button",{attrs:{type:"link"}},[e._v("\n                设置\n              ")])],2)],1):e._e(),n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"操作"}},[n("a-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",type:"primary",icon:"copy"},on:{click:function(t){return e.copyProp(i)}}},[e._v("\n              复制\n            ")]),n("a-popconfirm",{attrs:{placement:"topLeft",title:"是否确认删除该按钮？","ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.removeProp(i)}}},[n("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("\n                删除\n              ")])],1)],1)],1)]})],2)],1)],1)},o=[],a=(n("ac6a"),n("6762"),n("2fdb"),n("7514"),n("788b")),r=n("2ef0"),c=n.n(r),s=n("6892"),l=n("80da"),u={key:"data",name:"Data参数",type:"String",default:"",hasWatch:!1,watchCode:"function(val) {\n  // 数据更改处理流程\n}"},d="panelData",f={name:"GeneralDataConfig",data:function(){return{panelActiveKey:"config_panel_0",moduleConfig:{scriptConfig:{data:[]}}}},methods:{validateComplete:function(e){this.moduleConfig.scriptConfig.data.length>0&&s["a"].$emit("validateComplete",{mark:this.moduleConfig.mark,err:e})},addProp:function(){this.moduleConfig.scriptConfig.data.push(c.a.cloneDeep(u)),this.panelActiveKey="config_panel_".concat(this.moduleConfig.scriptConfig.data.length-1)},autoAddData:function(e){if(!e)return!1;var t=this.moduleConfig.scriptConfig.data.find(function(t){return t.key===e.key});if(void 0!==t)return!1;this.moduleConfig.scriptConfig.data.push(c.a.clone(e))},autoRemoveData:function(e){if(!e||0===e.length)return!1;this.moduleConfig.scriptConfig.data=this.moduleConfig.scriptConfig.data.filter(function(t){return void 0!==t&&!e.includes(t.key)})},copyProp:function(e){var t=c.a.cloneDeep(this.moduleConfig.scriptConfig.data[e]);this.moduleConfig.scriptConfig.data.splice(e,0,t),this.panelActiveKey="config_panel_".concat(e+1)},removeProp:function(e){this.moduleConfig.scriptConfig.data.splice(e,1),e>0?this.panelActiveKey="config_panel_".concat(e-1):this.moduleConfig.scriptConfig.data.length>0&&(this.panelActiveKey="config_panel_".concat(0))},onModuleConfigChanged:function(e){0===e.scriptConfig.data.length?s["a"].$emit("autoRemoveModule_".concat(this.code),d):s["a"].$emit("autoSetModuleConfig_".concat(this.code),{mark:d,moduleConfig:e})},resetData:function(){var e=this,t=this.$store.state[this.workspace][this.code].moduleConfigMap,n=!1;t&&c.a.forEach(t,function(t){"panelData"===t.mark&&(e.moduleConfig=t,n=!0)}),n||(this.moduleConfig={scriptConfig:{data:[]}})}},components:{smartCodeEditor:a["a"]},mixins:[l["a"]],props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""}},created:function(){var e=this;this.unwatch=this.$watch("moduleConfig",{handler:this.onModuleConfigChanged,deep:!0}),s["a"].$on("setGeneralDataConfig_".concat(this.code),function(t){e.unwatch&&e.unwatch(),void 0!==t?e.moduleConfig=t:e.moduleConfig.scriptConfig.data=[],e.unwatch=e.$watch("moduleConfig",{handler:e.onModuleConfigChanged,deep:!0})}),s["a"].$on("addGlobalData",function(t){e.autoAddData(t)}),s["a"].$on("removeGlobalData",function(t){e.autoRemoveData(t)})},destroyed:function(){s["a"].$off("setGeneralDataConfig"),s["a"].$off("addGlobalData"),s["a"].$off("removeGlobalData")}},p=f,m=(n("c493"),n("2877")),g=Object(m["a"])(p,i,o,!1,null,"20b0a7fa",null);t["a"]=g.exports},"882a8":function(e,t,n){"use strict";var i=n("27d7"),o=n.n(i);o.a},"9eda":function(e,t,n){},a0ab6:function(e,t,n){"use strict";var i=n("11d3"),o=n.n(i);o.a},a9e0:function(e,t,n){},b66f:function(e,t,n){},c493:function(e,t,n){"use strict";var i=n("9eda"),o=n.n(i);o.a},d484:function(e,t,n){"use strict";var i=n("b66f"),o=n.n(i);o.a},f0c8:function(e,t,n){},f826:function(e,t,n){var i={"./abstractPanel/config.vue":["e6f0","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","designerModuleConfig0"],"./detailPanel/config.vue":["dc04","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig1"],"./excelExport/config.vue":["9b68","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","designerModuleConfig2"],"./excelImport/config.vue":["b4db","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig3"],"./formPanel/config.vue":["0ef1","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig4"],"./layoutc/config.vue":["1028","chunk-0973db29","chunk-bcee4c08","chunk-57df489f","designerModuleConfig5"],"./operateLine/config.vue":["b095","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","chunk-bf815da8","designerModuleConfig12~designerModuleConfig6","designerModuleConfig6"],"./paddingc/config.vue":["6c8b","designerModuleConfig7~designerModuleConfig9","designerModuleConfig7"],"./panelContainer/config.vue":["2773","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","designerModuleConfig8"],"./panelData/config.vue":["4a92","designerModuleConfig7~designerModuleConfig9","designerModuleConfig9"],"./refEntityListPanel/config.vue":["7411","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig10"],"./tableList/config.vue":["2f35","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig11"],"./tableOperate/config.vue":["1b72","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig0~designerModuleConfig12~designerModuleConfig6~designerModuleConfig8","chunk-bf815da8","designerModuleConfig12~designerModuleConfig6","designerModuleConfig12"],"./tableSearch/config.vue":["60c2","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","chunk-57df489f","designerModuleConfig13"],"./timeLine/config.vue":["47ac","designerModuleConfig0~designerModuleConfig1~designerModuleConfig10~designerModuleConfig11~designerMo~693c3c65","designerModuleConfig14"],"./titleLine/config.vue":["9bbb","chunk-57df489f","designerModuleConfig15"]};function o(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(i)},o.id="f826",e.exports=o},f95a:function(e,t,n){var i={"./abstractPanel/index.vue":["2b1f","designerModule0~designerModule3~designerModule4","designerModule0~designerModule1","designerModule0"],"./detailPanel/index.vue":["7db1","designerModule0~designerModule1","designerModule1"],"./excelExport/index.vue":["e832","designerModule2~designerModule5","designerModule2"],"./excelImport/index.vue":["5eba","designerModule0~designerModule3~designerModule4","designerModule3"],"./formPanel/index.vue":["5d31","designerModule0~designerModule3~designerModule4","designerModule4"],"./layoutc/index.vue":["f9bb","designerModule2~designerModule5","designerModule5"],"./operateLine/index.vue":["aed9","designerModule6~designerModule8","designerModule6"],"./paddingc/index.vue":["3d36","designerModule7"],"./panelContainer/index.vue":["fff3","designerModule6~designerModule8","designerModule8"],"./panelData/index.vue":["ff56","chunk-0973db29","designerModule9"],"./refEntityListPanel/index.vue":["d603","designerModule10"],"./tableList/index.vue":["130c","designerModule11"],"./tableOperate/index.vue":["e715","designerModule12"],"./tableSearch/index.vue":["ec29","designerModule13"],"./timeLine/index.vue":["7a86","designerModule14"],"./titleLine/index.vue":["7cf1","designerModule15"]};function o(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(i)},o.id="f95a",e.exports=o},fa62:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"订阅提示",visible:e.state.visible,"dialog-style":{top:"30px"},width:720},on:{cancel:e.close}},[n("div",{staticClass:"content-wrapper"},[e.explainListMap.SUBSCRIBE_DESCRIPTION?e._l(e.explainListMap.SUBSCRIBE_DESCRIPTION,function(e,t){return n("rich-render",{key:t,attrs:{content:e.content}})}):[e.state.loading?e._e():n("p",[e._v("该功能为订阅用户专享，请访问官网，或关注diboot公众号进行订阅！")])]],2),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("a-button",{attrs:{type:"primary",ghost:""},on:{click:e.subscribeCompleted}},[e._v("我已完成订阅！")])],1)])},o=[],a=(n("96cf"),n("3b8d")),r=n("cebc"),c=n("5274"),s=n("3aa3"),l=n("2f62"),u={name:"NonePermissionModal",data:function(){return{state:{visible:!1,loading:!1},explainListMap:{}}},methods:Object(r["a"])({},Object(l["c"])(["GetInfo"]),{subscribeCompleted:function(){var e=this;this.GetInfo().then(function(t){var n=!1;t&&t.data&&t.data.mainLevel&&t.data.levelList&&t.data.levelList.length>0&&(n=t.data.levelList.some(function(e){return"enterprice"===e.levelCode})),n?(e.$message.success("感谢订阅，您的订阅已生效！"),e.$emit("subscribeSuccess",!0),e.state.visible=!1):e.$message.warning("非常抱歉，暂未查询到您的订阅信息，请检查是否订阅成功!")})},open:function(){this.state.visible=!0,this.loadSubscribeDescription()},loadSubscribeDescription:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.explainListMap.SUBSCRIBE_DESCRIPTION){e.next=2;break}return e.abrupt("return");case 2:return this.state.loading=!0,e.prev=3,e.next=6,s["a"].get("/diboot/devtools/ver");case 6:if(t=e.sent,0===t.code){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,s["a"].get("/diboot/devtools/public-api/appsExplain/".concat(t.data));case 11:t=e.sent,0===t.code&&t.data&&(this.explainListMap=t.data),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log(e.t0);case 18:this.state.loading=!1;case 19:case"end":return e.stop()}},e,this,[[3,15]])}));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.state.visible=!1}}),components:{RichRender:c["a"]}},d=u,f=(n("2c07"),n("2877")),p=Object(f["a"])(d,i,o,!1,null,"73a58298",null);t["a"]=p.exports},fdfb:function(e,t,n){"use strict";var i=n("2ae2"),o=n.n(i);o.a},fe42:function(e,t,n){}}]);