(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig7~designerModuleConfig9"],{"085b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"props-kit"},[a("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:t.panelActiveKey,callback:function(e){t.panelActiveKey=e},expression:"panelActiveKey"}},[t._l(t.scriptConfig.props,function(e,n){return[a("a-collapse-panel",{key:"props_panel_"+n,staticStyle:{"padding-left":"0"},attrs:{header:e.key}},[a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"是否启用该参数",labelCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:e.open,callback:function(a){t.$set(e,"open",a)},expression:"prop.open"}})],1)],1)],1),e.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticClass:"form-line",staticStyle:{"margin-bottom":"0"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择绑定参数",showSearch:"",filterOption:function(a,n){return t.filterOptionAndSetValue(e,a,n)},size:"small"},model:{value:e.targetData,callback:function(a){t.$set(e,"targetData",a)},expression:"prop.targetData"}},[a("a-select-option",{attrs:{value:""}},[t._v("\n                  请选择绑定参数\n                ")]),t._l(t.scriptDataList,function(e,n){return a("a-select-option",{key:n,attrs:{value:e.key}},[t._v("\n                  "+t._s(e.key)+" ["+t._s(e.name)+"]\n                ")])})],2)],1)],1)],1):t._e(),e.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticClass:"form-line",staticStyle:{"margin-bottom":"0"}},[a("a-input",{attrs:{size:"small",placeholder:"或输入绑定参数"},model:{value:e.targetData,callback:function(a){t.$set(e,"targetData",a)},expression:"prop.targetData"}})],1)],1)],1):t._e(),e.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"参数有值时显示",labelCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:e.onlyDataShow,callback:function(a){t.$set(e,"onlyDataShow",a)},expression:"prop.onlyDataShow"}})],1)],1)],1):t._e(),e.open?a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"转String格式",labelCol:{span:16}}},[a("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:e.convertToString,callback:function(a){t.$set(e,"convertToString",a)},expression:"prop.convertToString"}})],1)],1)],1):t._e()],1)]})],2)],1)},o=[],i=a("0561"),r={name:"PropsKit",data:function(){return{panelActiveKey:"props_panel_0"}},methods:{filterOptionAndSetValue:function(t,e,a){var n=a.componentOptions.children[0].text.toLowerCase();if(n.indexOf(e.toLowerCase())>=0)return!0;var o=a.componentOptions.propsData.value.toLowerCase();return o.indexOf(e.toLowerCase())>=0||(t.targetData=e,!1)}},mixins:[i["a"]],props:{code:{type:String,default:""},scriptConfig:{type:Object,default:function(){return{}}},workspace:{type:String,default:"panelDesigner"}}},l=r,c=(a("0c19"),a("2877")),s=Object(c["a"])(l,n,o,!1,null,"2e30a0bc",null);e["a"]=s.exports},"0c19":function(t,e,a){"use strict";var n=a("b5d1"),o=a.n(n);o.a},"11ea":function(t,e,a){},"1ca6":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"event-kit"},[t.scriptConfig.event&&t.scriptConfig.event.length>0?a("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:t.panelActiveKey,callback:function(e){t.panelActiveKey=e},expression:"panelActiveKey"}},[t._l(t.scriptConfig.event,function(e,n){return[a("a-collapse-panel",{key:"event_panel_"+n,staticStyle:{"padding-left":"0"},attrs:{header:"@"+e.key+"("+e.params.map(function(t){return t.key}).join(", ")+")"}},[a("a-row",[a("a-col",{attrs:{span:18,offset:2}},[a("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"未启用"},model:{value:e.open,callback:function(a){t.$set(e,"open",a)},expression:"eve.open"}})],1)],1),e.open?a("a-popover",{attrs:{placement:"left",title:"@"+e.key+" 事件绑定",trigger:"click"}},[a("div",{staticStyle:{width:"600px",height:"400px"},attrs:{slot:"content"},slot:"content"},[a("smart-code-editor",{attrs:{code:t.code,workspace:t.workspace,"param-value-getter":function(a){return t.paramValueGetter(a,e.params,e.handlerCode)}},on:{input:function(a){return t.onHandlerCodeChange(a,e)}},model:{value:e.handlerCode,callback:function(a){t.$set(e,"handlerCode",a)},expression:"eve.handlerCode"}})],1),a("a-button",{staticStyle:{margin:"10px 0"},attrs:{block:"",type:"primary",size:"small"}},[t._v("\n            编辑事件函数\n          ")])],1):t._e()],1)]})],2):[t._v("\n    无\n  ")]],2)},o=[],i=(a("28a5"),a("4917"),a("788b")),r=a("541c"),l={name:"EventKit",data:function(){return{panelActiveKey:"event_panel_0"}},methods:{paramValueGetter:function(t,e,a){var n="";if(e&&e.length>0&&a){for(var o,i=0;i<e.length;i++)if(e[i].type===t.type){o=i;break}if(void 0===o)return"";var r=/[^(][a-zA-Z0-9]+(?=\))/,l=a.match(r);if(0===!l.length)return"";var c=l[0].split(",");if(c.length<=o)return"";n=c[o].trim()}return n},onHandlerCodeChange:function(t,e){e.handlerFuncName=Object(r["a"])(t)}},components:{smartCodeEditor:i["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},scriptConfig:{type:Object,default:function(){return{}}},extraMethodObjList:{type:Array,default:function(){return[]}}}},c=l,s=(a("8d31"),a("2877")),p=Object(s["a"])(c,n,o,!1,null,"00f37324",null);e["a"]=p.exports},"409c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticClass:"panel-props-config ",attrs:{layout:"horizontal"}},[a("h3",{staticClass:"title separator"},[t._v("\n      面板data参数配置\n      "),a("a-icon",{staticStyle:{cursor:"pointer",color:"rgb(24, 144, 255)"},attrs:{type:"plus-circle"},on:{click:t.addProp}})],1),a("a-collapse",{attrs:{"default-active-key":"0",bordered:!1},model:{value:t.panelActiveKey,callback:function(e){t.panelActiveKey=e},expression:"panelActiveKey"}},[t._l(t.moduleConfig.scriptConfig.data,function(e,n){return[a("a-collapse-panel",{key:"config_panel_"+n,attrs:{header:e.key?e.key:"参数"+(n+1)+" 配置"}},[a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"参数"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数名称"},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"config.key"}})],1),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"说明"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数说明"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"config.name"}})],1),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"类型"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"参数类型",size:"small"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"config.type"}},[a("a-select-option",{attrs:{value:"String"}},[t._v("\n                String\n              ")]),a("a-select-option",{attrs:{value:"Array"}},[t._v("\n                Array\n              ")]),a("a-select-option",{attrs:{value:"Object"}},[t._v("\n                Object\n              ")]),a("a-select-option",{attrs:{value:"Function"}},[t._v("\n                Function\n              ")]),a("a-select-option",{attrs:{value:"Number"}},[t._v("\n                Number\n              ")]),a("a-select-option",{attrs:{value:"Boolean"}},[t._v("\n                Boolean\n              ")])],1)],1),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"默认值"}},[a("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"参数默认值"},model:{value:e.default,callback:function(a){t.$set(e,"default",a)},expression:"config.default"}})],1),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数变化检测"}},[a("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"不启用"},model:{value:e.hasWatch,callback:function(a){t.$set(e,"hasWatch",a)},expression:"config.hasWatch"}})],1),e.hasWatch?a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:10},wrapperCol:{span:14},label:"参数检测编辑"}},[a("a-popover",{attrs:{title:"参数检测代码编辑",placement:"left",trigger:"click"}},[a("template",{slot:"content"},[a("smart-code-editor",{attrs:{code:t.code},model:{value:e.watchCode,callback:function(a){t.$set(e,"watchCode",a)},expression:"config.watchCode"}})],1),a("a-button",{attrs:{type:"link"}},[t._v("\n                设置\n              ")])],2)],1):t._e(),a("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"操作"}},[a("a-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"small",type:"primary",icon:"copy"},on:{click:function(e){return t.copyProp(n)}}},[t._v("\n              复制\n            ")]),a("a-popconfirm",{attrs:{placement:"topLeft",title:"是否确认删除该按钮？","ok-text":"是","cancel-text":"否"},on:{confirm:function(e){return t.removeProp(n)}}},[a("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[t._v("\n                删除\n              ")])],1)],1)],1)]})],2)],1)],1)},o=[],i=a("b57a"),r=a("788b"),l=a("2ef0"),c=a.n(l),s={key:"data",name:"Data参数",type:"String",default:"",hasWatch:!1,watchCode:"function(val) {\n  // 数据更改处理流程\n}"},p={name:"PanelDataConfig",data:function(){return{panelActiveKey:"config_panel_0",panelList:[]}},methods:{addProp:function(){this.moduleConfig.scriptConfig.data.push(c.a.cloneDeep(s)),this.panelActiveKey="config_panel_".concat(this.moduleConfig.scriptConfig.data.length-1)},copyProp:function(t){var e=c.a.cloneDeep(this.moduleConfig.scriptConfig.data[t]);this.moduleConfig.scriptConfig.data.splice(t,0,e),this.panelActiveKey="config_panel_".concat(t+1)},removeProp:function(t){this.moduleConfig.scriptConfig.data.splice(t,1),t>0?this.panelActiveKey="config_panel_".concat(t-1):this.moduleConfig.scriptConfig.data.length>0&&(this.panelActiveKey="config_panel_".concat(0))}},mixins:[i["a"]],components:{smartCodeEditor:r["a"]},created:function(){}},u=p,d=(a("f01d"),a("2877")),f=Object(d["a"])(u,n,o,!1,null,"3188e369",null);e["a"]=f.exports},"526d":function(t,e,a){},"541c":function(t,e,a){"use strict";a.d(e,"a",function(){return n});a("28a5");var n=function(t){if(!t)return"";var e=t.slice(0,t.indexOf("(")).split(" ");return 1===e.length?e[0].trim():e[e.length-1].trim()}},"7f57":function(t,e,a){"use strict";a("ac6a");var n=a("cebc"),o=a("2ef0"),i=a.n(o),r=a("1ca6"),l=a("2f62"),c=(a("96cf"),a("3b8d")),s=Object(l["a"])("panelDesigner"),p=s.mapState,u=s.mapMutations,d={methods:Object(n["a"])({},u(["completeValidate","addValidateMsg"]),{validate:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.uuid,console.log("start validate module",e),t.next=4,this.formValidate();case 4:if(a=t.sent,console.log("module valid",a),a){t.next=10;break}return this.addValidateMsg({uuid:e}),this.completeValidate({uuid:e}),t.abrupt("return",!1);case 10:return t.next=12,this.customValidate();case 12:if(a=t.sent,this.completeValidate({uuid:e}),a){t.next=17;break}return this.addValidateMsg({uuid:e}),t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),formValidate:function(){var t=this;return new Promise(function(e){var a=t.$refs.form;console.log("form validate ref",a),a?a.validate(function(t){e(t)}):e(!0)})},customValidate:function(){return new Promise(function(t){return t(!0)})}}),computed:Object(n["a"])({},p({validateInfo:function(t){return t.validateInfo},configMap:function(t){return t.default.moduleConfigMap}})),watch:{"validateInfo.currentModuleId":{handler:function(t){console.log("validateInfo.currentModuleId",t),console.log("validateInfo.currentModuleId uuid",this.uuid),t===this.uuid&&this.validate()},deep:!0}}},f=Object(l["a"])("panelDesigner"),m=f.mapState,g=f.mapMutations;e["a"]={data:function(){return{workspace:"panelDesigner"}},methods:Object(n["a"])({},g(["updateModuleConfigList","updateConfigMap","clearAbstractStrategys","clearAllAbstractStrategys","addAbstractStrategy","addAbstractStrategys"]),{filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},getAbstractStrategys:function(){return[]}}),computed:Object(n["a"])({},m({abstractPanel:function(t){return t.abstractPanel}}),{moduleConfig:{get:function(){var t=this.$store.state.panelDesigner[this.code].moduleConfigMap;return t[this.uuid]},set:function(t){var e=this.$store.state.panelDesigner[this.code].moduleConfigMap;e[this.uuid];i.a.cloneDeep(t),this.updateConfigMap({key:this.code,configMap:e})}}}),watch:{abstractPanel:{handler:function(t){if(t){var e=this.uuid,a=this.getAbstractStrategys(),n=i.a.cloneDeep(a);n.forEach(function(t){t.uuid=e}),this.addAbstractStrategys(n)}else this.clearAllAbstractStrategys()},immediate:!0}},mixins:[d],components:{eventKit:r["a"]},props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}},"8d31":function(t,e,a){"use strict";var n=a("11ea"),o=a.n(n);o.a},b57a:function(t,e,a){"use strict";var n=a("085b"),o=a("1ca6");e["a"]={data:function(){return{moduleConfig:{}}},methods:{filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}},watch:{moduleConfig:{handler:function(t){this.$emit("input",t)},deep:!0,immediate:!0},value:{handler:function(t){this.moduleConfig=t},deep:!0,immediate:!0}},components:{propsKit:n["a"],eventKit:o["a"]},props:{workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},projectType:{type:String,required:!0},value:{type:Object,default:function(){return{}}}}}},b5d1:function(t,e,a){},e5b5:function(t,e,a){"use strict";var n=a("cebc"),o=a("2ef0"),i=a.n(o),r=a("2f62"),l=a("1ca6"),c=a("80da"),s=Object(r["a"])("DragConfig"),p=s.mapMutations;e["a"]={data:function(){return{workspace:"DragConfig"}},methods:Object(n["a"])({},p(["updateModuleConfigList","updateConfigMap"])),computed:{moduleConfig:{get:function(){var t=this.$store.state.DragConfig[this.code].moduleConfigMap;return t[this.uuid]},set:function(t){var e=this.$store.state.DragConfig[this.code].moduleConfigMap;e[this.uuid];i.a.cloneDeep(t),this.updateConfigMap({key:this.code,configMap:e})}}},components:{eventKit:l["a"]},mixins:[c["a"]],props:{uuid:{type:String,required:!0},code:{type:String,required:!0},projectType:{type:String,required:!0}}}},f01d:function(t,e,a){"use strict";var n=a("526d"),o=a.n(n);o.a}}]);